<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenRAVE: include/openrave/mathextra.h (r2848/r2831) ソースファイル 0.5.0</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<h1><a href="http://openrave.org"><img src="openrave_banner_dark.png" border="0" alt="openrave.org" width="400"/></a></h1>
<!-- 作成： Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'検索');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>メインページ</span></a></li>
      <li><a href="pages.html"><span>関連ページ</span></a></li>
      <li><a href="modules.html"><span>モジュール</span></a></li>
      <li><a href="namespaces.html"><span>ネームスペース</span></a></li>
      <li><a href="annotated.html"><span>クラス</span></a></li>
      <li class="current"><a href="files.html"><span>ファイル</span></a></li>
      <li><a href="examples.html"><span>例</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="検索" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>ファイル一覧</span></a></li>
      <li><a href="globals.html"><span>ファイルメンバ</span></a></li>
    </ul>
  </div>
<h1>include/openrave/mathextra.h (r2848/r2831)</h1><a href="mathextra_8h.html">説明を見る。</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// -*- coding: utf-8 -*-</span>
<a name="l00002"></a>00002 <span class="comment">// Copyright (C) 2006-2011 Rosen Diankov &lt;rosen.diankov@gmail.com&gt;</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// This file is part of OpenRAVE.</span>
<a name="l00005"></a>00005 <span class="comment">// OpenRAVE is free software: you can redistribute it and/or modify</span>
<a name="l00006"></a>00006 <span class="comment">// it under the terms of the GNU Lesser General Public License as published by</span>
<a name="l00007"></a>00007 <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00008"></a>00008 <span class="comment">// at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment">//</span>
<a name="l00010"></a>00010 <span class="comment">// This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="comment">// GNU Lesser General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment">//</span>
<a name="l00015"></a>00015 <span class="comment">// You should have received a copy of the GNU Lesser General Public License</span>
<a name="l00016"></a>00016 <span class="comment">// along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00020"></a>00020 <span class="comment"></span><span class="preprocessor">#ifndef OPENRAVE_MATHEXTRA_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define OPENRAVE_MATHEXTRA_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#ifndef OPENRAVE_API</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#define OPENRAVE_API</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a>00027 <span class="preprocessor">#ifdef BOOST_ASSERT</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#define MATH_ASSERT BOOST_ASSERT</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#include &lt;cassert&gt;</span>
<a name="l00031"></a><a class="code" href="mathextra_8h.html#af24c16dd00620665fbbeddd0579003c2">00031</a> <span class="preprocessor">#define MATH_ASSERT assert</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;climits&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">namespace </span>OpenRAVE {
<a name="l00038"></a>00038 
<a name="l00040"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html">00040</a> <span class="keyword">namespace </span>mathextra {
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="mathextra_8h.html#a1c5a68152fd8c2d5c231f721cda03d56">00042</a> <span class="preprocessor">#define distinctRoots 0                       // roots r0 &lt; r1 &lt; r2</span>
<a name="l00043"></a><a class="code" href="mathextra_8h.html#a87ece92dcd9718f61b799bde21d701e7">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define singleRoot 1                       // root r0</span>
<a name="l00044"></a><a class="code" href="mathextra_8h.html#a762d7a7cd57955c294601bfe80209604">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define floatRoot01 2                       // roots r0 = r1 &lt; r2</span>
<a name="l00045"></a><a class="code" href="mathextra_8h.html#aa01b7937c4887369b17811d204f95590">00045</a> <span class="preprocessor"></span><span class="preprocessor">#define floatRoot12 4                       // roots r0 &lt; r1 = r2</span>
<a name="l00046"></a><a class="code" href="mathextra_8h.html#ad858a3ebff1f58b97f8a99a3c5ae79c5">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define tripleRoot 6                       // roots r0 = r1 = r2</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a>00048 <span class="comment">// multiplies 4x4 matrices</span>
<a name="l00049"></a>00049 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a81fb331bc68449313f352e6582e361a6">mult4</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2);
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="comment">// pf1^T * pf2</span>
<a name="l00052"></a>00052 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4a44ef5d851ffffeb1288c50abbf29b3">multtrans3</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2);
<a name="l00053"></a>00053 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a06f3263e838f64e607923ff065d9c37a">multtrans4</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2);
<a name="l00054"></a>00054 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a725e782059052b4e40f8dc99b39c2779">transnorm3</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pfmat, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf);
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a1f2f6a714d9937409f4af7e8abbedf60">transpose3</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf, <span class="keywordtype">float</span>* pfres);
<a name="l00057"></a>00057 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ae3ecb8ff5bf7b3701e1eff7a399d5724">transpose4</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf, <span class="keywordtype">float</span>* pfres);
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a6e66dbcddc141b9c134e65aeeb444b68">dot2</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2);
<a name="l00060"></a>00060 <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a527c9a64311f7f2c2428d79acae6cbff">dot3</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2);
<a name="l00061"></a>00061 <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a96bf07ea8f5101a0147508758262f674">dot4</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2);
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3a0b2ebd387daef7aafb864d73c77038">lengthsqr2</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf);
<a name="l00064"></a>00064 <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad8930797789eae5569491c0f05174426">lengthsqr3</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf);
<a name="l00065"></a>00065 <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aed0b451327f9924a83137a0aa1229f42">lengthsqr4</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf);
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#affc167f7a19e542e4d13b79775bdec8f">normalize2</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf);
<a name="l00068"></a>00068 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a229decb2c54cdee7cca9a03139d6f6ec">normalize3</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf);
<a name="l00069"></a>00069 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4fe10078a02dc7fa9f562de150662fbc">normalize4</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf);
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28281cdd752b067fcfa996b3ed329067">cross3</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2);
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="comment">// multiplies 3x3 matrices</span>
<a name="l00074"></a>00074 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a43c711671450191396c6a6fb64b14ab6">mult3_s4</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2);
<a name="l00075"></a>00075 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a68d9ac2c8ee157350fb5f7a9e12777df">mult3_s3</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2);
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac0e5067fda68bff2c95ec6656447cfdc">inv3</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf, <span class="keywordtype">float</span>* pfres, <span class="keywordtype">float</span>* pfdet, <span class="keywordtype">int</span> stride);
<a name="l00078"></a>00078 <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab4314fb677aba33db7ec8988bdedc1c7">inv4</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf, <span class="keywordtype">float</span>* pfres);
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a81fb331bc68449313f352e6582e361a6">mult4</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2);
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">// pf1^T * pf2</span>
<a name="l00084"></a>00084 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4a44ef5d851ffffeb1288c50abbf29b3">multtrans3</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2);
<a name="l00085"></a>00085 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a06f3263e838f64e607923ff065d9c37a">multtrans4</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2);
<a name="l00086"></a>00086 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a725e782059052b4e40f8dc99b39c2779">transnorm3</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pfmat, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf);
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a1f2f6a714d9937409f4af7e8abbedf60">transpose3</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf, <span class="keywordtype">double</span>* pfres);
<a name="l00089"></a>00089 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ae3ecb8ff5bf7b3701e1eff7a399d5724">transpose4</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf, <span class="keywordtype">double</span>* pfres);
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a6e66dbcddc141b9c134e65aeeb444b68">dot2</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2);
<a name="l00092"></a>00092 <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a527c9a64311f7f2c2428d79acae6cbff">dot3</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2);
<a name="l00093"></a>00093 <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a96bf07ea8f5101a0147508758262f674">dot4</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3a0b2ebd387daef7aafb864d73c77038">lengthsqr2</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf);
<a name="l00096"></a>00096 <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad8930797789eae5569491c0f05174426">lengthsqr3</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf);
<a name="l00097"></a>00097 <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aed0b451327f9924a83137a0aa1229f42">lengthsqr4</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf);
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#affc167f7a19e542e4d13b79775bdec8f">normalize2</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf);
<a name="l00100"></a>00100 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a229decb2c54cdee7cca9a03139d6f6ec">normalize3</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf);
<a name="l00101"></a>00101 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4fe10078a02dc7fa9f562de150662fbc">normalize4</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf);
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28281cdd752b067fcfa996b3ed329067">cross3</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2);
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="comment">// multiplies 3x3 matrices</span>
<a name="l00106"></a>00106 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a43c711671450191396c6a6fb64b14ab6">mult3_s4</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2);
<a name="l00107"></a>00107 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a68d9ac2c8ee157350fb5f7a9e12777df">mult3_s3</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2);
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac0e5067fda68bff2c95ec6656447cfdc">inv3</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf, <span class="keywordtype">double</span>* pfres, <span class="keywordtype">double</span>* pfdet, <span class="keywordtype">int</span> stride);
<a name="l00110"></a>00110 <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab4314fb677aba33db7ec8988bdedc1c7">inv4</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf, <span class="keywordtype">double</span>* pfres);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 
<a name="l00114"></a>00114 <span class="comment">// More complex ops that deal with arbitrary matrices //</span>
<a name="l00116"></a>00116 <span class="comment"></span>
<a name="l00119"></a>00119 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00120"></a>00120 <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3c6e92adb2deae09d195c86818918c4b">eig2</a>(<span class="keyword">const</span> T* pfmat, T* peigs, T&amp; fv1x, T&amp; fv1y, T&amp; fv2x, T&amp; fv2y);
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 <span class="comment">// Simple routines for linear algebra algorithms //</span>
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <a class="code" href="config_8h.html#a5570a9c8b03ef026009d5233c146aa0c">OPENRAVE_API</a> <span class="keywordtype">int</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a497d33fc82165e195c97e0c834e65db8">CubicRoots</a> (<span class="keywordtype">double</span> c0, <span class="keywordtype">double</span> c1, <span class="keywordtype">double</span> c2, <span class="keywordtype">double</span> *r0, <span class="keywordtype">double</span> *r1, <span class="keywordtype">double</span> *r2);
<a name="l00125"></a>00125 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> S&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad10d0faef4a5cb3a8469265678154d85">Tridiagonal3</a> (S* mat, T* diag, T* subd);
<a name="l00126"></a>00126 <a class="code" href="config_8h.html#a5570a9c8b03ef026009d5233c146aa0c">OPENRAVE_API</a> <span class="keywordtype">bool</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab4008c737b79b568a509235e6b9c5f01">QLAlgorithm3</a> (<span class="keywordtype">float</span>* m_aafEntry, <span class="keywordtype">float</span>* afDiag, <span class="keywordtype">float</span>* afSubDiag);
<a name="l00127"></a>00127 <a class="code" href="config_8h.html#a5570a9c8b03ef026009d5233c146aa0c">OPENRAVE_API</a> <span class="keywordtype">bool</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab4008c737b79b568a509235e6b9c5f01">QLAlgorithm3</a> (<span class="keywordtype">double</span>* m_aafEntry, <span class="keywordtype">double</span>* afDiag, <span class="keywordtype">double</span>* afSubDiag);
<a name="l00128"></a>00128 <a class="code" href="config_8h.html#a5570a9c8b03ef026009d5233c146aa0c">OPENRAVE_API</a> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a49dafe034618c02f2190ca994eeea976">EigenSymmetric3</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* fCovariance, <span class="keywordtype">double</span>* eval, <span class="keywordtype">double</span>* fAxes);
<a name="l00129"></a>00129 
<a name="l00133"></a>00133 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00134"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac7b910595448278e861ce787a01fc9a2">00134</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac7b910595448278e861ce787a01fc9a2">GetCovarBasisVectors</a>(<span class="keyword">const</span> T fCovariance[3][3], T vbasis[3][3])
<a name="l00135"></a>00135 {
<a name="l00136"></a>00136     T EigenVals[3];
<a name="l00137"></a>00137     <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a49dafe034618c02f2190ca994eeea976">EigenSymmetric3</a>((<span class="keyword">const</span> T*)fCovariance, EigenVals, (T*)vbasis);
<a name="l00138"></a>00138     <span class="comment">// make sure that the new axes follow the right-hand coord system</span>
<a name="l00139"></a>00139     <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a229decb2c54cdee7cca9a03139d6f6ec">normalize3</a>(vbasis[0],vbasis[0]);
<a name="l00140"></a>00140     T f = <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a527c9a64311f7f2c2428d79acae6cbff">dot3</a>(vbasis[0],vbasis[1]);
<a name="l00141"></a>00141     vbasis[1][0] -= vbasis[0][0]*f; vbasis[1][1] -= vbasis[0][1]*f; vbasis[1][2] -= vbasis[0][2]*f;
<a name="l00142"></a>00142     <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a229decb2c54cdee7cca9a03139d6f6ec">normalize3</a>(vbasis[1],vbasis[1]);
<a name="l00143"></a>00143     <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28281cdd752b067fcfa996b3ed329067">cross3</a>(vbasis[2],vbasis[0],vbasis[1]);
<a name="l00144"></a>00144 }
<a name="l00145"></a>00145 
<a name="l00152"></a>00152 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a698af188ade25c457317354c0e9ebcba">svd3</a>(<span class="keyword">const</span> T* A, T* U, T* D, T* V);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a5da29cad5c0859b8f34444a2c7977744">mult</a>(T* pf, T fa, <span class="keywordtype">int</span> r)
<a name="l00155"></a>00155 {
<a name="l00156"></a>00156     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf != NULL );
<a name="l00157"></a>00157     <span class="keywordflow">while</span>(r &gt; 0) {
<a name="l00158"></a>00158         --r;
<a name="l00159"></a>00159         pf[r] *= fa;
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161 }
<a name="l00162"></a>00162 
<a name="l00163"></a>00163 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">int</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28fab5ce9954860ea9ffb5bee9fc0f09">Min</a>(T* pts, <span class="keywordtype">int</span> stride, <span class="keywordtype">int</span> numPts); <span class="comment">// returns the index, stride in units of T</span>
<a name="l00164"></a>00164 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">int</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#afa49cf2b486df8e832804efe2eb23835">Max</a>(T* pts, <span class="keywordtype">int</span> stride, <span class="keywordtype">int</span> numPts); <span class="comment">// returns the index</span>
<a name="l00165"></a>00165 
<a name="l00166"></a>00166 <span class="comment">// multiplies a matrix by a scalar</span>
<a name="l00167"></a>00167 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a5da29cad5c0859b8f34444a2c7977744">mult</a>(T* pf, T fa, <span class="keywordtype">int</span> r);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169 <span class="comment">// multiplies a r1xc1 by c1xc2 matrix into pfres, if badd is true adds the result to pfres</span>
<a name="l00170"></a>00170 <span class="comment">// does not handle cases where pfres is equal to pf1 or pf2, use multtox for those cases</span>
<a name="l00171"></a>00171 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> R, <span class="keyword">typename</span> S&gt;
<a name="l00172"></a>00172 <span class="keyword">inline</span> S* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a5da29cad5c0859b8f34444a2c7977744">mult</a>(T* pf1, R* pf2, <span class="keywordtype">int</span> r1, <span class="keywordtype">int</span> c1, <span class="keywordtype">int</span> c2, S* pfres, <span class="keywordtype">bool</span> badd = <span class="keyword">false</span>);
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 <span class="comment">// pf1 is transposed before mult</span>
<a name="l00175"></a>00175 <span class="comment">// rows of pf2 must equal rows of pf1</span>
<a name="l00176"></a>00176 <span class="comment">// pfres will be c1xc2 matrix</span>
<a name="l00177"></a>00177 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> R, <span class="keyword">typename</span> S&gt;
<a name="l00178"></a>00178 <span class="keyword">inline</span> S* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a026fa1e10be5ba90b2907f207a57d686">multtrans</a>(T* pf1, R* pf2, <span class="keywordtype">int</span> r1, <span class="keywordtype">int</span> c1, <span class="keywordtype">int</span> c2, S* pfres, <span class="keywordtype">bool</span> badd = <span class="keyword">false</span>);
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 <span class="comment">// pf2 is transposed before mult</span>
<a name="l00181"></a>00181 <span class="comment">// the columns of both matrices must be the same and equal to c1</span>
<a name="l00182"></a>00182 <span class="comment">// r2 is the number of rows in pf2</span>
<a name="l00183"></a>00183 <span class="comment">// pfres must be an r1xr2 matrix</span>
<a name="l00184"></a>00184 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> R, <span class="keyword">typename</span> S&gt;
<a name="l00185"></a>00185 <span class="keyword">inline</span> S* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a9da8532a0ff0230a01ae8e64e59d25b8">multtrans_to2</a>(T* pf1, R* pf2, <span class="keywordtype">int</span> r1, <span class="keywordtype">int</span> c1, <span class="keywordtype">int</span> r2, S* pfres, <span class="keywordtype">bool</span> badd = <span class="keyword">false</span>);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="comment">// multiplies rxc matrix pf1 and cxc matrix pf2 and stores the result in pf1,</span>
<a name="l00188"></a>00188 <span class="comment">// the function needs a temporary buffer the size of c doubles, if pftemp == NULL,</span>
<a name="l00189"></a>00189 <span class="comment">// the function will allocate the necessary memory, otherwise pftemp should be big</span>
<a name="l00190"></a>00190 <span class="comment">// enough to store all the entries</span>
<a name="l00191"></a>00191 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad9d449f5bf7205e75134e9b6452360b7">multto1</a>(T* pf1, T* pf2, <span class="keywordtype">int</span> r1, <span class="keywordtype">int</span> c1, T* pftemp = NULL);
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 <span class="comment">// same as multto1 except stores the result in pf2, pf1 has to be an r2xr2 matrix</span>
<a name="l00194"></a>00194 <span class="comment">// pftemp must be of size r2 if not NULL</span>
<a name="l00195"></a>00195 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> S&gt; <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a2ccbcd22eee92b1456746b47329263a1">multto2</a>(T* pf1, S* pf2, <span class="keywordtype">int</span> r2, <span class="keywordtype">int</span> c2, S* pftemp = NULL);
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="comment">// add pf1 + pf2 and store in pf1</span>
<a name="l00198"></a>00198 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a219be6390b14991d050a220fd5485eb1">sub</a>(T* pf1, T* pf2, <span class="keywordtype">int</span> r);
<a name="l00199"></a>00199 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a0f1951ea43605ecb4afc8c63b7df5ede">normsqr</a>(<span class="keyword">const</span> T* pf1, <span class="keywordtype">int</span> r);
<a name="l00200"></a>00200 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac64ed03a4d6b1db8560d1d0c6e19122c">lengthsqr</a>(<span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2, <span class="keywordtype">int</span> length);
<a name="l00201"></a>00201 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a88c880c263a9a5dc3731a588157ba573">dot</a>(T* pf1, T* pf2, <span class="keywordtype">int</span> length);
<a name="l00202"></a>00202 
<a name="l00203"></a>00203 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad51c7a2a23e482e3b2d13c0dd938a86f">sum</a>(T* pf, <span class="keywordtype">int</span> length);
<a name="l00204"></a>00204 
<a name="l00206"></a>00206 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#abb67a10be5fe708132dbe3792089cb43" title="takes the inverse of the 2x2 matrix pf and stores it into pfres, returns true if...">inv2</a>(T* pf, T* pfres);
<a name="l00207"></a>00207 
<a name="l00209"></a>00209 <span class="comment">// Function Definitions</span>
<a name="l00211"></a>00211 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00212"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3c6e92adb2deae09d195c86818918c4b">00212</a> <span class="keywordtype">bool</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3c6e92adb2deae09d195c86818918c4b">eig2</a>(<span class="keyword">const</span> T* pfmat, T* peigs, T&amp; fv1x, T&amp; fv1y, T&amp; fv2x, T&amp; fv2y)
<a name="l00213"></a>00213 {
<a name="l00214"></a>00214     <span class="comment">// x^2 + bx + c</span>
<a name="l00215"></a>00215     T a, b, c, d;
<a name="l00216"></a>00216     b = -(pfmat[0] + pfmat[3]);
<a name="l00217"></a>00217     c = pfmat[0] * pfmat[3] - pfmat[1] * pfmat[2];
<a name="l00218"></a>00218     d = b * b - 4.0f * c + 1e-16f;
<a name="l00219"></a>00219     <span class="keywordflow">if</span>( d &lt; 0 ) {
<a name="l00220"></a>00220         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222     <span class="keywordflow">if</span>( d &lt; 1e-16f ) {
<a name="l00223"></a>00223         a = -0.5f * b;
<a name="l00224"></a>00224         peigs[0] = a;
<a name="l00225"></a>00225         peigs[1] = a;
<a name="l00226"></a>00226         fv1x = pfmat[1];
<a name="l00227"></a>00227         fv1y = a - pfmat[0];
<a name="l00228"></a>00228         c = 1 / sqrt(fv1x*fv1x + fv1y*fv1y);
<a name="l00229"></a>00229         fv1x *= c;
<a name="l00230"></a>00230         fv1y *= c;
<a name="l00231"></a>00231         fv2x = -fv1y;
<a name="l00232"></a>00232         fv2y = fv1x;
<a name="l00233"></a>00233         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00234"></a>00234     }
<a name="l00235"></a>00235     <span class="comment">// two roots</span>
<a name="l00236"></a>00236     d = sqrt(d);
<a name="l00237"></a>00237     a = -0.5f * (b + d);
<a name="l00238"></a>00238     peigs[0] = a;
<a name="l00239"></a>00239     fv1x = pfmat[1];
<a name="l00240"></a>00240     fv1y = a-pfmat[0];
<a name="l00241"></a>00241     c = 1 / sqrt(fv1x*fv1x + fv1y*fv1y);
<a name="l00242"></a>00242     fv1x *= c;
<a name="l00243"></a>00243     fv1y *= c;
<a name="l00244"></a>00244     a += d;
<a name="l00245"></a>00245     peigs[1] = a;
<a name="l00246"></a>00246     fv2x = pfmat[1];
<a name="l00247"></a>00247     fv2y = a-pfmat[0];
<a name="l00248"></a>00248     c = 1 / sqrt(fv2x*fv2x + fv2y*fv2y);
<a name="l00249"></a>00249     fv2x *= c;
<a name="l00250"></a>00250     fv2y *= c;
<a name="l00251"></a>00251     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00252"></a>00252 }
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 <span class="comment">// returns the number of real roots, fills r1 and r2 with the answers</span>
<a name="l00255"></a>00255 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00256"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad6d7baf85607fa62597982c478ac0331">00256</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad6d7baf85607fa62597982c478ac0331">solvequad</a>(T a, T b, T c, T&amp; r1, T&amp; r2)
<a name="l00257"></a>00257 {
<a name="l00258"></a>00258     T d = b * b - (T)4 * c * a + (T)1e-16;
<a name="l00259"></a>00259     <span class="keywordflow">if</span>( d &lt; 0 ) {
<a name="l00260"></a>00260         <span class="keywordflow">return</span> 0;
<a name="l00261"></a>00261     }
<a name="l00262"></a>00262     <span class="keywordflow">if</span>( d &lt; (T)1e-16 ) {
<a name="l00263"></a>00263         r1 = r2 = (T)-0.5 * b / a;
<a name="l00264"></a>00264         <span class="keywordflow">return</span> 1;
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266     <span class="comment">// two roots</span>
<a name="l00267"></a>00267     d = sqrt(d);
<a name="l00268"></a>00268     r1 = (-b+d)/(2*a);
<a name="l00269"></a>00269     r2 = c/(a*r1);
<a name="l00270"></a>00270     <span class="keywordflow">return</span> 2;
<a name="l00271"></a>00271 }
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="mathextra_8h.html#a3d58d0ae59d734d03e8eca70d1302adf">00273</a> <span class="preprocessor">#define MULT3(stride) { \</span>
<a name="l00274"></a>00274 <span class="preprocessor">        pfres2[0*stride+0] = pf1[0*stride+0]*pf2[0*stride+0]+pf1[0*stride+1]*pf2[1*stride+0]+pf1[0*stride+2]*pf2[2*stride+0]; \</span>
<a name="l00275"></a>00275 <span class="preprocessor">        pfres2[0*stride+1] = pf1[0*stride+0]*pf2[0*stride+1]+pf1[0*stride+1]*pf2[1*stride+1]+pf1[0*stride+2]*pf2[2*stride+1]; \</span>
<a name="l00276"></a>00276 <span class="preprocessor">        pfres2[0*stride+2] = pf1[0*stride+0]*pf2[0*stride+2]+pf1[0*stride+1]*pf2[1*stride+2]+pf1[0*stride+2]*pf2[2*stride+2]; \</span>
<a name="l00277"></a>00277 <span class="preprocessor">        pfres2[1*stride+0] = pf1[1*stride+0]*pf2[0*stride+0]+pf1[1*stride+1]*pf2[1*stride+0]+pf1[1*stride+2]*pf2[2*stride+0]; \</span>
<a name="l00278"></a>00278 <span class="preprocessor">        pfres2[1*stride+1] = pf1[1*stride+0]*pf2[0*stride+1]+pf1[1*stride+1]*pf2[1*stride+1]+pf1[1*stride+2]*pf2[2*stride+1]; \</span>
<a name="l00279"></a>00279 <span class="preprocessor">        pfres2[1*stride+2] = pf1[1*stride+0]*pf2[0*stride+2]+pf1[1*stride+1]*pf2[1*stride+2]+pf1[1*stride+2]*pf2[2*stride+2]; \</span>
<a name="l00280"></a>00280 <span class="preprocessor">        pfres2[2*stride+0] = pf1[2*stride+0]*pf2[0*stride+0]+pf1[2*stride+1]*pf2[1*stride+0]+pf1[2*stride+2]*pf2[2*stride+0]; \</span>
<a name="l00281"></a>00281 <span class="preprocessor">        pfres2[2*stride+1] = pf1[2*stride+0]*pf2[0*stride+1]+pf1[2*stride+1]*pf2[1*stride+1]+pf1[2*stride+2]*pf2[2*stride+1]; \</span>
<a name="l00282"></a>00282 <span class="preprocessor">        pfres2[2*stride+2] = pf1[2*stride+0]*pf2[0*stride+2]+pf1[2*stride+1]*pf2[1*stride+2]+pf1[2*stride+2]*pf2[2*stride+2]; \</span>
<a name="l00283"></a>00283 <span class="preprocessor">}</span>
<a name="l00284"></a>00284 <span class="preprocessor"></span>
<a name="l00286"></a>00286 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00287"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#acdad3d8acab4d752d7373d9cb5a0a9db">00287</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#acdad3d8acab4d752d7373d9cb5a0a9db" title="mult3 with a 3x3 matrix whose row stride is 16 bytes">_mult3_s4</a>(T* pfres, <span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2)
<a name="l00288"></a>00288 {
<a name="l00289"></a>00289     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL &amp;&amp; pfres != NULL );
<a name="l00290"></a>00290 
<a name="l00291"></a>00291     T* pfres2;
<a name="l00292"></a>00292     <span class="keywordflow">if</span>((pfres == pf1)||(pfres == pf2)) pfres2 = (T*)alloca(12 * <span class="keyword">sizeof</span>(T));
<a name="l00293"></a>00293     <span class="keywordflow">else</span> pfres2 = pfres;
<a name="l00294"></a>00294 
<a name="l00295"></a>00295     <a class="code" href="mathextra_8h.html#a3d58d0ae59d734d03e8eca70d1302adf">MULT3</a>(4);
<a name="l00296"></a>00296     <span class="keywordflow">if</span>( pfres2 != pfres ) memcpy(pfres, pfres2, 12*<span class="keyword">sizeof</span>(T));
<a name="l00297"></a>00297     <span class="keywordflow">return</span> pfres;
<a name="l00298"></a>00298 }
<a name="l00299"></a>00299 
<a name="l00301"></a>00301 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00302"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ae5a24b1c71ce7b35a40ae7008ddf47ae">00302</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ae5a24b1c71ce7b35a40ae7008ddf47ae" title="mult3 with a 3x3 matrix whose row stride is 12 bytes">_mult3_s3</a>(T* pfres, <span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2)
<a name="l00303"></a>00303 {
<a name="l00304"></a>00304     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL &amp;&amp; pfres != NULL );
<a name="l00305"></a>00305 
<a name="l00306"></a>00306     T* pfres2;
<a name="l00307"></a>00307     <span class="keywordflow">if</span>((pfres == pf1)||(pfres == pf2)) pfres2 = (T*)alloca(9 * <span class="keyword">sizeof</span>(T));
<a name="l00308"></a>00308     <span class="keywordflow">else</span> pfres2 = pfres;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <a class="code" href="mathextra_8h.html#a3d58d0ae59d734d03e8eca70d1302adf">MULT3</a>(3);
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     <span class="keywordflow">if</span>( pfres2 != pfres ) memcpy(pfres, pfres2, 9*<span class="keyword">sizeof</span>(T));
<a name="l00313"></a>00313 
<a name="l00314"></a>00314     <span class="keywordflow">return</span> pfres;
<a name="l00315"></a>00315 }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 <span class="comment">// mult4</span>
<a name="l00318"></a>00318 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00319"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#accf35ea6f28861c4eec720e7794dacaa">00319</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#accf35ea6f28861c4eec720e7794dacaa">_mult4</a>(T* pfres, <span class="keyword">const</span> T* p1, <span class="keyword">const</span> T* p2)
<a name="l00320"></a>00320 {
<a name="l00321"></a>00321     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pfres != NULL &amp;&amp; p1 != NULL &amp;&amp; p2 != NULL );
<a name="l00322"></a>00322 
<a name="l00323"></a>00323     T* pfres2;
<a name="l00324"></a>00324     <span class="keywordflow">if</span>((pfres == p1)||(pfres == p2)) pfres2 = (T*)alloca(16 * <span class="keyword">sizeof</span>(T));
<a name="l00325"></a>00325     <span class="keywordflow">else</span> pfres2 = pfres;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327     pfres2[0*4+0] = p1[0*4+0]*p2[0*4+0] + p1[0*4+1]*p2[1*4+0] + p1[0*4+2]*p2[2*4+0] + p1[0*4+3]*p2[3*4+0];
<a name="l00328"></a>00328     pfres2[0*4+1] = p1[0*4+0]*p2[0*4+1] + p1[0*4+1]*p2[1*4+1] + p1[0*4+2]*p2[2*4+1] + p1[0*4+3]*p2[3*4+1];
<a name="l00329"></a>00329     pfres2[0*4+2] = p1[0*4+0]*p2[0*4+2] + p1[0*4+1]*p2[1*4+2] + p1[0*4+2]*p2[2*4+2] + p1[0*4+3]*p2[3*4+2];
<a name="l00330"></a>00330     pfres2[0*4+3] = p1[0*4+0]*p2[0*4+3] + p1[0*4+1]*p2[1*4+3] + p1[0*4+2]*p2[2*4+3] + p1[0*4+3]*p2[3*4+3];
<a name="l00331"></a>00331 
<a name="l00332"></a>00332     pfres2[1*4+0] = p1[1*4+0]*p2[0*4+0] + p1[1*4+1]*p2[1*4+0] + p1[1*4+2]*p2[2*4+0] + p1[1*4+3]*p2[3*4+0];
<a name="l00333"></a>00333     pfres2[1*4+1] = p1[1*4+0]*p2[0*4+1] + p1[1*4+1]*p2[1*4+1] + p1[1*4+2]*p2[2*4+1] + p1[1*4+3]*p2[3*4+1];
<a name="l00334"></a>00334     pfres2[1*4+2] = p1[1*4+0]*p2[0*4+2] + p1[1*4+1]*p2[1*4+2] + p1[1*4+2]*p2[2*4+2] + p1[1*4+3]*p2[3*4+2];
<a name="l00335"></a>00335     pfres2[1*4+3] = p1[1*4+0]*p2[0*4+3] + p1[1*4+1]*p2[1*4+3] + p1[1*4+2]*p2[2*4+3] + p1[1*4+3]*p2[3*4+3];
<a name="l00336"></a>00336 
<a name="l00337"></a>00337     pfres2[2*4+0] = p1[2*4+0]*p2[0*4+0] + p1[2*4+1]*p2[1*4+0] + p1[2*4+2]*p2[2*4+0] + p1[2*4+3]*p2[3*4+0];
<a name="l00338"></a>00338     pfres2[2*4+1] = p1[2*4+0]*p2[0*4+1] + p1[2*4+1]*p2[1*4+1] + p1[2*4+2]*p2[2*4+1] + p1[2*4+3]*p2[3*4+1];
<a name="l00339"></a>00339     pfres2[2*4+2] = p1[2*4+0]*p2[0*4+2] + p1[2*4+1]*p2[1*4+2] + p1[2*4+2]*p2[2*4+2] + p1[2*4+3]*p2[3*4+2];
<a name="l00340"></a>00340     pfres2[2*4+3] = p1[2*4+0]*p2[0*4+3] + p1[2*4+1]*p2[1*4+3] + p1[2*4+2]*p2[2*4+3] + p1[2*4+3]*p2[3*4+3];
<a name="l00341"></a>00341 
<a name="l00342"></a>00342     pfres2[3*4+0] = p1[3*4+0]*p2[0*4+0] + p1[3*4+1]*p2[1*4+0] + p1[3*4+2]*p2[2*4+0] + p1[3*4+3]*p2[3*4+0];
<a name="l00343"></a>00343     pfres2[3*4+1] = p1[3*4+0]*p2[0*4+1] + p1[3*4+1]*p2[1*4+1] + p1[3*4+2]*p2[2*4+1] + p1[3*4+3]*p2[3*4+1];
<a name="l00344"></a>00344     pfres2[3*4+2] = p1[3*4+0]*p2[0*4+2] + p1[3*4+1]*p2[1*4+2] + p1[3*4+2]*p2[2*4+2] + p1[3*4+3]*p2[3*4+2];
<a name="l00345"></a>00345     pfres2[3*4+3] = p1[3*4+0]*p2[0*4+3] + p1[3*4+1]*p2[1*4+3] + p1[3*4+2]*p2[2*4+3] + p1[3*4+3]*p2[3*4+3];
<a name="l00346"></a>00346 
<a name="l00347"></a>00347     <span class="keywordflow">if</span>( pfres != pfres2 ) memcpy(pfres, pfres2, <span class="keyword">sizeof</span>(T)*16);
<a name="l00348"></a>00348     <span class="keywordflow">return</span> pfres;
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00352"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab6a85af5edd8ccef7544f4a5f887e83b">00352</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab6a85af5edd8ccef7544f4a5f887e83b">_multtrans3</a>(T* pfres, <span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2)
<a name="l00353"></a>00353 {
<a name="l00354"></a>00354     T* pfres2;
<a name="l00355"></a>00355     <span class="keywordflow">if</span>( pfres == pf1 ) pfres2 = (T*)alloca(9 * <span class="keyword">sizeof</span>(T));
<a name="l00356"></a>00356     <span class="keywordflow">else</span> pfres2 = pfres;
<a name="l00357"></a>00357 
<a name="l00358"></a>00358     pfres2[0] = pf1[0]*pf2[0]+pf1[3]*pf2[3]+pf1[6]*pf2[6];
<a name="l00359"></a>00359     pfres2[1] = pf1[0]*pf2[1]+pf1[3]*pf2[4]+pf1[6]*pf2[7];
<a name="l00360"></a>00360     pfres2[2] = pf1[0]*pf2[2]+pf1[3]*pf2[5]+pf1[6]*pf2[8];
<a name="l00361"></a>00361 
<a name="l00362"></a>00362     pfres2[3] = pf1[1]*pf2[0]+pf1[4]*pf2[3]+pf1[7]*pf2[6];
<a name="l00363"></a>00363     pfres2[4] = pf1[1]*pf2[1]+pf1[4]*pf2[4]+pf1[7]*pf2[7];
<a name="l00364"></a>00364     pfres2[5] = pf1[1]*pf2[2]+pf1[4]*pf2[5]+pf1[7]*pf2[8];
<a name="l00365"></a>00365 
<a name="l00366"></a>00366     pfres2[6] = pf1[2]*pf2[0]+pf1[5]*pf2[3]+pf1[8]*pf2[6];
<a name="l00367"></a>00367     pfres2[7] = pf1[2]*pf2[1]+pf1[5]*pf2[4]+pf1[8]*pf2[7];
<a name="l00368"></a>00368     pfres2[8] = pf1[2]*pf2[2]+pf1[5]*pf2[5]+pf1[8]*pf2[8];
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     <span class="keywordflow">if</span>( pfres2 != pfres ) memcpy(pfres, pfres2, 9*<span class="keyword">sizeof</span>(T));
<a name="l00371"></a>00371 
<a name="l00372"></a>00372     <span class="keywordflow">return</span> pfres;
<a name="l00373"></a>00373 }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00376"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a72ce422ba1557a6048a2d9d175db1785">00376</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a72ce422ba1557a6048a2d9d175db1785">_multtrans4</a>(T* pfres, <span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2)
<a name="l00377"></a>00377 {
<a name="l00378"></a>00378     T* pfres2;
<a name="l00379"></a>00379     <span class="keywordflow">if</span>( pfres == pf1 ) pfres2 = (T*)alloca(16 * <span class="keyword">sizeof</span>(T));
<a name="l00380"></a>00380     <span class="keywordflow">else</span> pfres2 = pfres;
<a name="l00381"></a>00381 
<a name="l00382"></a>00382     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 4; ++i) {
<a name="l00383"></a>00383         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 4; ++j) {
<a name="l00384"></a>00384             pfres2[4*i+j] = pf1[i] * pf2[j] + pf1[i+4] * pf2[j+4] + pf1[i+8] * pf2[j+8] + pf1[i+12] * pf2[j+12];
<a name="l00385"></a>00385         }
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387 
<a name="l00388"></a>00388     <span class="keywordflow">if</span>( pfres2 != pfres ) memcpy(pfres, pfres2, 16*<span class="keyword">sizeof</span>(T));
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <span class="keywordflow">return</span> pfres;
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00394"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad9d110d6d2dd3e1f4777ff1c42aa2fff">00394</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad9d110d6d2dd3e1f4777ff1c42aa2fff" title="Compute the determinant of a 3x3 matrix whose row stride stride elements.">matrixdet3</a>(<span class="keyword">const</span> T* pf, <span class="keywordtype">int</span> stride)
<a name="l00395"></a>00395 {
<a name="l00396"></a>00396     <span class="keywordflow">return</span> pf[0*stride+2] * (pf[1*stride + 0] * pf[2*stride + 1] - pf[1*stride + 1] * pf[2*stride + 0]) +
<a name="l00397"></a>00397            pf[1*stride+2] * (pf[0*stride + 1] * pf[2*stride + 0] - pf[0*stride + 0] * pf[2*stride + 1]) +
<a name="l00398"></a>00398            pf[2*stride+2] * (pf[0*stride + 0] * pf[1*stride + 1] - pf[0*stride + 1] * pf[1*stride + 0]);
<a name="l00399"></a>00399 }
<a name="l00400"></a>00400 
<a name="l00408"></a>00408 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00409"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#abb859ce4ca095416219250a83ca94793">00409</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#abb859ce4ca095416219250a83ca94793" title="3x3 matrix inverse.">_inv3</a>(<span class="keyword">const</span> T* pf, T* pfres, T* pfdet, <span class="keywordtype">int</span> stride)
<a name="l00410"></a>00410 {
<a name="l00411"></a>00411     T* pfres2;
<a name="l00412"></a>00412     <span class="keywordflow">if</span>( pfres == pf ) pfres2 = (T*)alloca(3 * stride * <span class="keyword">sizeof</span>(T));
<a name="l00413"></a>00413     <span class="keywordflow">else</span> pfres2 = pfres;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415     <span class="comment">// inverse = C^t / det(pf) where C is the matrix of coefficients</span>
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     <span class="comment">// calc C^t</span>
<a name="l00418"></a>00418     pfres2[0*stride + 0] = pf[1*stride + 1] * pf[2*stride + 2] - pf[1*stride + 2] * pf[2*stride + 1];
<a name="l00419"></a>00419     pfres2[0*stride + 1] = pf[0*stride + 2] * pf[2*stride + 1] - pf[0*stride + 1] * pf[2*stride + 2];
<a name="l00420"></a>00420     pfres2[0*stride + 2] = pf[0*stride + 1] * pf[1*stride + 2] - pf[0*stride + 2] * pf[1*stride + 1];
<a name="l00421"></a>00421     pfres2[1*stride + 0] = pf[1*stride + 2] * pf[2*stride + 0] - pf[1*stride + 0] * pf[2*stride + 2];
<a name="l00422"></a>00422     pfres2[1*stride + 1] = pf[0*stride + 0] * pf[2*stride + 2] - pf[0*stride + 2] * pf[2*stride + 0];
<a name="l00423"></a>00423     pfres2[1*stride + 2] = pf[0*stride + 2] * pf[1*stride + 0] - pf[0*stride + 0] * pf[1*stride + 2];
<a name="l00424"></a>00424     pfres2[2*stride + 0] = pf[1*stride + 0] * pf[2*stride + 1] - pf[1*stride + 1] * pf[2*stride + 0];
<a name="l00425"></a>00425     pfres2[2*stride + 1] = pf[0*stride + 1] * pf[2*stride + 0] - pf[0*stride + 0] * pf[2*stride + 1];
<a name="l00426"></a>00426     pfres2[2*stride + 2] = pf[0*stride + 0] * pf[1*stride + 1] - pf[0*stride + 1] * pf[1*stride + 0];
<a name="l00427"></a>00427 
<a name="l00428"></a>00428     T fdet = pf[0*stride + 2] * pfres2[2*stride + 0] + pf[1*stride + 2] * pfres2[2*stride + 1] +
<a name="l00429"></a>00429              pf[2*stride + 2] * pfres2[2*stride + 2];
<a name="l00430"></a>00430 
<a name="l00431"></a>00431     <span class="keywordflow">if</span>( pfdet != NULL )
<a name="l00432"></a>00432         pfdet[0] = fdet;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434     <span class="keywordflow">if</span>( fabs(fdet) &lt; 1e-12 ) {
<a name="l00435"></a>00435         <span class="keywordflow">return</span> NULL;
<a name="l00436"></a>00436     }
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     fdet = 1 / fdet;
<a name="l00439"></a>00439     <span class="comment">//if( pfdet != NULL ) *pfdet = fdet;</span>
<a name="l00440"></a>00440 
<a name="l00441"></a>00441     <span class="keywordflow">if</span>( pfres != pf ) {
<a name="l00442"></a>00442         pfres[0*stride+0] *= fdet;              pfres[0*stride+1] *= fdet;              pfres[0*stride+2] *= fdet;
<a name="l00443"></a>00443         pfres[1*stride+0] *= fdet;              pfres[1*stride+1] *= fdet;              pfres[1*stride+2] *= fdet;
<a name="l00444"></a>00444         pfres[2*stride+0] *= fdet;              pfres[2*stride+1] *= fdet;              pfres[2*stride+2] *= fdet;
<a name="l00445"></a>00445         <span class="keywordflow">return</span> pfres;
<a name="l00446"></a>00446     }
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     pfres[0*stride+0] = pfres2[0*stride+0] * fdet;
<a name="l00449"></a>00449     pfres[0*stride+1] = pfres2[0*stride+1] * fdet;
<a name="l00450"></a>00450     pfres[0*stride+2] = pfres2[0*stride+2] * fdet;
<a name="l00451"></a>00451     pfres[1*stride+0] = pfres2[1*stride+0] * fdet;
<a name="l00452"></a>00452     pfres[1*stride+1] = pfres2[1*stride+1] * fdet;
<a name="l00453"></a>00453     pfres[1*stride+2] = pfres2[1*stride+2] * fdet;
<a name="l00454"></a>00454     pfres[2*stride+0] = pfres2[2*stride+0] * fdet;
<a name="l00455"></a>00455     pfres[2*stride+1] = pfres2[2*stride+1] * fdet;
<a name="l00456"></a>00456     pfres[2*stride+2] = pfres2[2*stride+2] * fdet;
<a name="l00457"></a>00457     <span class="keywordflow">return</span> pfres;
<a name="l00458"></a>00458 }
<a name="l00459"></a>00459 
<a name="l00461"></a>00461 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00462"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a81c950faa17b5d293eb547c9b3bcab41">00462</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a81c950faa17b5d293eb547c9b3bcab41" title="4x4 matrix inverse.">_inv4</a>(<span class="keyword">const</span> T* pf, T* pfres)
<a name="l00463"></a>00463 {
<a name="l00464"></a>00464     T* pfres2;
<a name="l00465"></a>00465     <span class="keywordflow">if</span>( pfres == pf ) pfres2 = (T*)alloca(16 * <span class="keyword">sizeof</span>(T));
<a name="l00466"></a>00466     <span class="keywordflow">else</span> pfres2 = pfres;
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     <span class="comment">// inverse = C^t / det(pf) where C is the matrix of coefficients</span>
<a name="l00469"></a>00469 
<a name="l00470"></a>00470     <span class="comment">// calc C^t</span>
<a name="l00471"></a>00471 
<a name="l00472"></a>00472     <span class="comment">// determinants of all possibel 2x2 submatrices formed by last two rows</span>
<a name="l00473"></a>00473     T fd0, fd1, fd2;
<a name="l00474"></a>00474     T f1, f2, f3;
<a name="l00475"></a>00475     fd0 = pf[2*4 + 0] * pf[3*4 + 1] - pf[2*4 + 1] * pf[3*4 + 0];
<a name="l00476"></a>00476     fd1 = pf[2*4 + 1] * pf[3*4 + 2] - pf[2*4 + 2] * pf[3*4 + 1];
<a name="l00477"></a>00477     fd2 = pf[2*4 + 2] * pf[3*4 + 3] - pf[2*4 + 3] * pf[3*4 + 2];
<a name="l00478"></a>00478 
<a name="l00479"></a>00479     f1 = pf[2*4 + 1] * pf[3*4 + 3] - pf[2*4 + 3] * pf[3*4 + 1];
<a name="l00480"></a>00480     f2 = pf[2*4 + 0] * pf[3*4 + 3] - pf[2*4 + 3] * pf[3*4 + 0];
<a name="l00481"></a>00481     f3 = pf[2*4 + 0] * pf[3*4 + 2] - pf[2*4 + 2] * pf[3*4 + 0];
<a name="l00482"></a>00482 
<a name="l00483"></a>00483     pfres2[0*4 + 0] =   pf[1*4 + 1] * fd2 - pf[1*4 + 2] * f1 + pf[1*4 + 3] * fd1;
<a name="l00484"></a>00484     pfres2[0*4 + 1] = -(pf[0*4 + 1] * fd2 - pf[0*4 + 2] * f1 + pf[0*4 + 3] * fd1);
<a name="l00485"></a>00485 
<a name="l00486"></a>00486     pfres2[1*4 + 0] = -(pf[1*4 + 0] * fd2 - pf[1*4 + 2] * f2 + pf[1*4 + 3] * f3);
<a name="l00487"></a>00487     pfres2[1*4 + 1] =   pf[0*4 + 0] * fd2 - pf[0*4 + 2] * f2 + pf[0*4 + 3] * f3;
<a name="l00488"></a>00488 
<a name="l00489"></a>00489     pfres2[2*4 + 0] =   pf[1*4 + 0] * f1 -  pf[1*4 + 1] * f2 + pf[1*4 + 3] * fd0;
<a name="l00490"></a>00490     pfres2[2*4 + 1] = -(pf[0*4 + 0] * f1 -  pf[0*4 + 1] * f2 + pf[0*4 + 3] * fd0);
<a name="l00491"></a>00491 
<a name="l00492"></a>00492     pfres2[3*4 + 0] = -(pf[1*4 + 0] * fd1 - pf[1*4 + 1] * f3 + pf[1*4 + 2] * fd0);
<a name="l00493"></a>00493     pfres2[3*4 + 1] =   pf[0*4 + 0] * fd1 - pf[0*4 + 1] * f3 + pf[0*4 + 2] * fd0;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495     <span class="comment">// determinants of first 2 rows of 4x4 matrix</span>
<a name="l00496"></a>00496     fd0 = pf[0*4 + 0] * pf[1*4 + 1] - pf[0*4 + 1] * pf[1*4 + 0];
<a name="l00497"></a>00497     fd1 = pf[0*4 + 1] * pf[1*4 + 2] - pf[0*4 + 2] * pf[1*4 + 1];
<a name="l00498"></a>00498     fd2 = pf[0*4 + 2] * pf[1*4 + 3] - pf[0*4 + 3] * pf[1*4 + 2];
<a name="l00499"></a>00499 
<a name="l00500"></a>00500     f1 = pf[0*4 + 1] * pf[1*4 + 3] - pf[0*4 + 3] * pf[1*4 + 1];
<a name="l00501"></a>00501     f2 = pf[0*4 + 0] * pf[1*4 + 3] - pf[0*4 + 3] * pf[1*4 + 0];
<a name="l00502"></a>00502     f3 = pf[0*4 + 0] * pf[1*4 + 2] - pf[0*4 + 2] * pf[1*4 + 0];
<a name="l00503"></a>00503 
<a name="l00504"></a>00504     pfres2[0*4 + 2] =   pf[3*4 + 1] * fd2 - pf[3*4 + 2] * f1 + pf[3*4 + 3] * fd1;
<a name="l00505"></a>00505     pfres2[0*4 + 3] = -(pf[2*4 + 1] * fd2 - pf[2*4 + 2] * f1 + pf[2*4 + 3] * fd1);
<a name="l00506"></a>00506 
<a name="l00507"></a>00507     pfres2[1*4 + 2] = -(pf[3*4 + 0] * fd2 - pf[3*4 + 2] * f2 + pf[3*4 + 3] * f3);
<a name="l00508"></a>00508     pfres2[1*4 + 3] =   pf[2*4 + 0] * fd2 - pf[2*4 + 2] * f2 + pf[2*4 + 3] * f3;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510     pfres2[2*4 + 2] =   pf[3*4 + 0] * f1 -  pf[3*4 + 1] * f2 + pf[3*4 + 3] * fd0;
<a name="l00511"></a>00511     pfres2[2*4 + 3] = -(pf[2*4 + 0] * f1 -  pf[2*4 + 1] * f2 + pf[2*4 + 3] * fd0);
<a name="l00512"></a>00512 
<a name="l00513"></a>00513     pfres2[3*4 + 2] = -(pf[3*4 + 0] * fd1 - pf[3*4 + 1] * f3 + pf[3*4 + 2] * fd0);
<a name="l00514"></a>00514     pfres2[3*4 + 3] =   pf[2*4 + 0] * fd1 - pf[2*4 + 1] * f3 + pf[2*4 + 2] * fd0;
<a name="l00515"></a>00515 
<a name="l00516"></a>00516     T fdet = pf[0*4 + 3] * pfres2[3*4 + 0] + pf[1*4 + 3] * pfres2[3*4 + 1] +
<a name="l00517"></a>00517              pf[2*4 + 3] * pfres2[3*4 + 2] + pf[3*4 + 3] * pfres2[3*4 + 3];
<a name="l00518"></a>00518 
<a name="l00519"></a>00519     <span class="keywordflow">if</span>( fabs(fdet) &lt; 1e-9) <span class="keywordflow">return</span> NULL;
<a name="l00520"></a>00520 
<a name="l00521"></a>00521     fdet = 1 / fdet;
<a name="l00522"></a>00522     <span class="comment">//if( pfdet != NULL ) *pfdet = fdet;</span>
<a name="l00523"></a>00523 
<a name="l00524"></a>00524     <span class="keywordflow">if</span>( pfres2 == pfres ) {
<a name="l00525"></a>00525         <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a5da29cad5c0859b8f34444a2c7977744">mult</a>(pfres, fdet, 16);
<a name="l00526"></a>00526         <span class="keywordflow">return</span> pfres;
<a name="l00527"></a>00527     }
<a name="l00528"></a>00528 
<a name="l00529"></a>00529     <span class="keywordtype">int</span> i = 0;
<a name="l00530"></a>00530     <span class="keywordflow">while</span>(i &lt; 16) {
<a name="l00531"></a>00531         pfres[i] = pfres2[i] * fdet;
<a name="l00532"></a>00532         ++i;
<a name="l00533"></a>00533     }
<a name="l00534"></a>00534 
<a name="l00535"></a>00535     <span class="keywordflow">return</span> pfres;
<a name="l00536"></a>00536 }
<a name="l00537"></a>00537 
<a name="l00539"></a>00539 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00540"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a98432a8613c3ee83bb5b6d2092b406ff">00540</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a98432a8613c3ee83bb5b6d2092b406ff" title="Transpose a 3x3 matrix.">_transpose3</a>(<span class="keyword">const</span> T* pf, T* pfres)
<a name="l00541"></a>00541 {
<a name="l00542"></a>00542     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf != NULL &amp;&amp; pfres != NULL );
<a name="l00543"></a>00543 
<a name="l00544"></a>00544     <span class="keywordflow">if</span>( pf == pfres ) {
<a name="l00545"></a>00545         std::swap(pfres[1], pfres[3]);
<a name="l00546"></a>00546         std::swap(pfres[2], pfres[6]);
<a name="l00547"></a>00547         std::swap(pfres[5], pfres[7]);
<a name="l00548"></a>00548         <span class="keywordflow">return</span> pfres;
<a name="l00549"></a>00549     }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551     pfres[0] = pf[0];       pfres[1] = pf[3];       pfres[2] = pf[6];
<a name="l00552"></a>00552     pfres[3] = pf[1];       pfres[4] = pf[4];       pfres[5] = pf[7];
<a name="l00553"></a>00553     pfres[6] = pf[2];       pfres[7] = pf[5];       pfres[8] = pf[8];
<a name="l00554"></a>00554 
<a name="l00555"></a>00555     <span class="keywordflow">return</span> pfres;
<a name="l00556"></a>00556 }
<a name="l00557"></a>00557 
<a name="l00559"></a>00559 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00560"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#af6485a9fbc08e970a019a8c78df0d54b">00560</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#af6485a9fbc08e970a019a8c78df0d54b" title="Transpose a 4x4 matrix.">_transpose4</a>(<span class="keyword">const</span> T* pf, T* pfres)
<a name="l00561"></a>00561 {
<a name="l00562"></a>00562     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf != NULL &amp;&amp; pfres != NULL );
<a name="l00563"></a>00563 
<a name="l00564"></a>00564     <span class="keywordflow">if</span>( pf == pfres ) {
<a name="l00565"></a>00565         std::swap(pfres[1], pfres[4]);
<a name="l00566"></a>00566         std::swap(pfres[2], pfres[8]);
<a name="l00567"></a>00567         std::swap(pfres[3], pfres[12]);
<a name="l00568"></a>00568         std::swap(pfres[6], pfres[9]);
<a name="l00569"></a>00569         std::swap(pfres[7], pfres[13]);
<a name="l00570"></a>00570         std::swap(pfres[11], pfres[15]);
<a name="l00571"></a>00571         <span class="keywordflow">return</span> pfres;
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574     pfres[0] = pf[0];       pfres[1] = pf[4];       pfres[2] = pf[8];               pfres[3] = pf[12];
<a name="l00575"></a>00575     pfres[4] = pf[1];       pfres[5] = pf[5];       pfres[6] = pf[9];               pfres[7] = pf[13];
<a name="l00576"></a>00576     pfres[8] = pf[2];       pfres[9] = pf[6];       pfres[10] = pf[10];             pfres[11] = pf[14];
<a name="l00577"></a>00577     pfres[12] = pf[3];      pfres[13] = pf[7];      pfres[14] = pf[11];             pfres[15] = pf[15];
<a name="l00578"></a>00578     <span class="keywordflow">return</span> pfres;
<a name="l00579"></a>00579 }
<a name="l00580"></a>00580 
<a name="l00581"></a>00581 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00582"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a623e8f4c9e97b3c84962c6e9b99fa679">00582</a> <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a623e8f4c9e97b3c84962c6e9b99fa679">_dot2</a>(<span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2)
<a name="l00583"></a>00583 {
<a name="l00584"></a>00584     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL );
<a name="l00585"></a>00585     <span class="keywordflow">return</span> pf1[0]*pf2[0] + pf1[1]*pf2[1];
<a name="l00586"></a>00586 }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00589"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a659ebd94608c5ff92aae50be29fd2097">00589</a> <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a659ebd94608c5ff92aae50be29fd2097">_dot3</a>(<span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2)
<a name="l00590"></a>00590 {
<a name="l00591"></a>00591     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL );
<a name="l00592"></a>00592     <span class="keywordflow">return</span> pf1[0]*pf2[0] + pf1[1]*pf2[1] + pf1[2]*pf2[2];
<a name="l00593"></a>00593 }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00596"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#acaa8f8e426d6febf2e4fe5d3b497c161">00596</a> <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#acaa8f8e426d6febf2e4fe5d3b497c161">_dot4</a>(<span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2)
<a name="l00597"></a>00597 {
<a name="l00598"></a>00598     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL );
<a name="l00599"></a>00599     <span class="keywordflow">return</span> pf1[0]*pf2[0] + pf1[1]*pf2[1] + pf1[2]*pf2[2] + pf1[3] * pf2[3];
<a name="l00600"></a>00600 }
<a name="l00601"></a>00601 
<a name="l00602"></a>00602 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00603"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad2db5ce47ed368515243a0945634a3c5">00603</a> <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad2db5ce47ed368515243a0945634a3c5">_lengthsqr2</a>(<span class="keyword">const</span> T* pf)
<a name="l00604"></a>00604 {
<a name="l00605"></a>00605     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf != NULL );
<a name="l00606"></a>00606     <span class="keywordflow">return</span> pf[0] * pf[0] + pf[1] * pf[1];
<a name="l00607"></a>00607 }
<a name="l00608"></a>00608 
<a name="l00609"></a>00609 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00610"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a2712ff08011a416b781253817d713788">00610</a> <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a2712ff08011a416b781253817d713788">_lengthsqr3</a>(<span class="keyword">const</span> T* pf)
<a name="l00611"></a>00611 {
<a name="l00612"></a>00612     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf != NULL );
<a name="l00613"></a>00613     <span class="keywordflow">return</span> pf[0] * pf[0] + pf[1] * pf[1] + pf[2] * pf[2];
<a name="l00614"></a>00614 }
<a name="l00615"></a>00615 
<a name="l00616"></a>00616 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00617"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aa64e50799e90cc59c2c1733fb8031373">00617</a> <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aa64e50799e90cc59c2c1733fb8031373">_lengthsqr4</a>(<span class="keyword">const</span> T* pf)
<a name="l00618"></a>00618 {
<a name="l00619"></a>00619     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf != NULL );
<a name="l00620"></a>00620     <span class="keywordflow">return</span> pf[0] * pf[0] + pf[1] * pf[1] + pf[2] * pf[2] + pf[3] * pf[3];
<a name="l00621"></a>00621 }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00624"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a82f1895d58de57e819a121aa483c698e">00624</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a82f1895d58de57e819a121aa483c698e">_normalize2</a>(T* pfout, <span class="keyword">const</span> T* pf)
<a name="l00625"></a>00625 {
<a name="l00626"></a>00626     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>(pf != NULL);
<a name="l00627"></a>00627 
<a name="l00628"></a>00628     T f = pf[0]*pf[0] + pf[1]*pf[1];
<a name="l00629"></a>00629     f = 1 / sqrt(f);
<a name="l00630"></a>00630     pfout[0] = pf[0] * f;
<a name="l00631"></a>00631     pfout[1] = pf[1] * f;
<a name="l00632"></a>00632 
<a name="l00633"></a>00633     <span class="keywordflow">return</span> pfout;
<a name="l00634"></a>00634 }
<a name="l00635"></a>00635 
<a name="l00636"></a>00636 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00637"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a937a71d661275c59259cdd6d62775ec3">00637</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a937a71d661275c59259cdd6d62775ec3">_normalize3</a>(T* pfout, <span class="keyword">const</span> T* pf)
<a name="l00638"></a>00638 {
<a name="l00639"></a>00639     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>(pf != NULL);
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     T f = pf[0]*pf[0] + pf[1]*pf[1] + pf[2]*pf[2];
<a name="l00642"></a>00642 
<a name="l00643"></a>00643     f = 1 / sqrt(f);
<a name="l00644"></a>00644     pfout[0] = pf[0] * f;
<a name="l00645"></a>00645     pfout[1] = pf[1] * f;
<a name="l00646"></a>00646     pfout[2] = pf[2] * f;
<a name="l00647"></a>00647 
<a name="l00648"></a>00648     <span class="keywordflow">return</span> pfout;
<a name="l00649"></a>00649 }
<a name="l00650"></a>00650 
<a name="l00651"></a>00651 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00652"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a6064a73d64b7d0e816f1e6a8b2dd6d4f">00652</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a6064a73d64b7d0e816f1e6a8b2dd6d4f">_normalize4</a>(T* pfout, <span class="keyword">const</span> T* pf)
<a name="l00653"></a>00653 {
<a name="l00654"></a>00654     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>(pf != NULL);
<a name="l00655"></a>00655 
<a name="l00656"></a>00656     T f = pf[0]*pf[0] + pf[1]*pf[1] + pf[2]*pf[2] + pf[3]*pf[3];
<a name="l00657"></a>00657 
<a name="l00658"></a>00658     f = 1 / sqrt(f);
<a name="l00659"></a>00659     pfout[0] = pf[0] * f;
<a name="l00660"></a>00660     pfout[1] = pf[1] * f;
<a name="l00661"></a>00661     pfout[2] = pf[2] * f;
<a name="l00662"></a>00662     pfout[3] = pf[3] * f;
<a name="l00663"></a>00663 
<a name="l00664"></a>00664     <span class="keywordflow">return</span> pfout;
<a name="l00665"></a>00665 }
<a name="l00666"></a>00666 
<a name="l00667"></a>00667 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00668"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a058906813b50d023a9b2d4f6c3722b7f">00668</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a058906813b50d023a9b2d4f6c3722b7f">_cross3</a>(T* pfout, <span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2)
<a name="l00669"></a>00669 {
<a name="l00670"></a>00670     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pfout != NULL &amp;&amp; pf1 != NULL &amp;&amp; pf2 != NULL );
<a name="l00671"></a>00671 
<a name="l00672"></a>00672     T temp[3];
<a name="l00673"></a>00673     temp[0] = pf1[1] * pf2[2] - pf1[2] * pf2[1];
<a name="l00674"></a>00674     temp[1] = pf1[2] * pf2[0] - pf1[0] * pf2[2];
<a name="l00675"></a>00675     temp[2] = pf1[0] * pf2[1] - pf1[1] * pf2[0];
<a name="l00676"></a>00676 
<a name="l00677"></a>00677     pfout[0] = temp[0]; pfout[1] = temp[1]; pfout[2] = temp[2];
<a name="l00678"></a>00678     <span class="keywordflow">return</span> pfout;
<a name="l00679"></a>00679 }
<a name="l00680"></a>00680 
<a name="l00681"></a>00681 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00682"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a01d9e7e21e06c174e19d9b7335960770">00682</a> <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a01d9e7e21e06c174e19d9b7335960770">_transnorm3</a>(T* pfout, <span class="keyword">const</span> T* pfmat, <span class="keyword">const</span> T* pf)
<a name="l00683"></a>00683 {
<a name="l00684"></a>00684     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pfout != NULL &amp;&amp; pf != NULL &amp;&amp; pfmat != NULL );
<a name="l00685"></a>00685 
<a name="l00686"></a>00686     T dummy[3];
<a name="l00687"></a>00687     T* pfreal = (pfout == pf) ? dummy : pfout;
<a name="l00688"></a>00688 
<a name="l00689"></a>00689     pfreal[0] = pf[0] * pfmat[0] + pf[1] * pfmat[1] + pf[2] * pfmat[2];
<a name="l00690"></a>00690     pfreal[1] = pf[0] * pfmat[3] + pf[1] * pfmat[4] + pf[2] * pfmat[5];
<a name="l00691"></a>00691     pfreal[2] = pf[0] * pfmat[6] + pf[1] * pfmat[7] + pf[2] * pfmat[8];
<a name="l00692"></a>00692 
<a name="l00693"></a>00693     <span class="keywordflow">if</span>( pfout ==pf ) {
<a name="l00694"></a>00694         pfout[0] = pfreal[0];
<a name="l00695"></a>00695         pfout[1] = pfreal[1];
<a name="l00696"></a>00696         pfout[2] = pfreal[2];
<a name="l00697"></a>00697     }
<a name="l00698"></a>00698 
<a name="l00699"></a>00699     <span class="keywordflow">return</span> pfout;
<a name="l00700"></a>00700 }
<a name="l00701"></a>00701 
<a name="l00702"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a81fb331bc68449313f352e6582e361a6">00702</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a81fb331bc68449313f352e6582e361a6">mult4</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2) {
<a name="l00703"></a>00703     <span class="keywordflow">return</span> _mult4&lt;float&gt;(pfres, pf1, pf2);
<a name="l00704"></a>00704 }
<a name="l00705"></a>00705 <span class="comment">// pf1^T * pf2</span>
<a name="l00706"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4a44ef5d851ffffeb1288c50abbf29b3">00706</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4a44ef5d851ffffeb1288c50abbf29b3">multtrans3</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2) {
<a name="l00707"></a>00707     <span class="keywordflow">return</span> _multtrans3&lt;float&gt;(pfres, pf1, pf2);
<a name="l00708"></a>00708 }
<a name="l00709"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a06f3263e838f64e607923ff065d9c37a">00709</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a06f3263e838f64e607923ff065d9c37a">multtrans4</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2) {
<a name="l00710"></a>00710     <span class="keywordflow">return</span> _multtrans4&lt;float&gt;(pfres, pf1, pf2);
<a name="l00711"></a>00711 }
<a name="l00712"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a725e782059052b4e40f8dc99b39c2779">00712</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a725e782059052b4e40f8dc99b39c2779">transnorm3</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pfmat, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf) {
<a name="l00713"></a>00713     <span class="keywordflow">return</span> _transnorm3&lt;float&gt;(pfout, pfmat, pf);
<a name="l00714"></a>00714 }
<a name="l00715"></a>00715 
<a name="l00716"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a1f2f6a714d9937409f4af7e8abbedf60">00716</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a1f2f6a714d9937409f4af7e8abbedf60">transpose3</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf, <span class="keywordtype">float</span>* pfres) {
<a name="l00717"></a>00717     <span class="keywordflow">return</span> _transpose3&lt;float&gt;(pf, pfres);
<a name="l00718"></a>00718 }
<a name="l00719"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ae3ecb8ff5bf7b3701e1eff7a399d5724">00719</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ae3ecb8ff5bf7b3701e1eff7a399d5724">transpose4</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf, <span class="keywordtype">float</span>* pfres) {
<a name="l00720"></a>00720     <span class="keywordflow">return</span> _transpose4&lt;float&gt;(pf, pfres);
<a name="l00721"></a>00721 }
<a name="l00722"></a>00722 
<a name="l00723"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a6e66dbcddc141b9c134e65aeeb444b68">00723</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a6e66dbcddc141b9c134e65aeeb444b68">dot2</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2) {
<a name="l00724"></a>00724     <span class="keywordflow">return</span> _dot2&lt;float&gt;(pf1, pf2);
<a name="l00725"></a>00725 }
<a name="l00726"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a527c9a64311f7f2c2428d79acae6cbff">00726</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a527c9a64311f7f2c2428d79acae6cbff">dot3</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2) {
<a name="l00727"></a>00727     <span class="keywordflow">return</span> _dot3&lt;float&gt;(pf1, pf2);
<a name="l00728"></a>00728 }
<a name="l00729"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a96bf07ea8f5101a0147508758262f674">00729</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a96bf07ea8f5101a0147508758262f674">dot4</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2) {
<a name="l00730"></a>00730     <span class="keywordflow">return</span> _dot4&lt;float&gt;(pf1, pf2);
<a name="l00731"></a>00731 }
<a name="l00732"></a>00732 
<a name="l00733"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3a0b2ebd387daef7aafb864d73c77038">00733</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3a0b2ebd387daef7aafb864d73c77038">lengthsqr2</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf) {
<a name="l00734"></a>00734     <span class="keywordflow">return</span> _lengthsqr2&lt;float&gt;(pf);
<a name="l00735"></a>00735 }
<a name="l00736"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad8930797789eae5569491c0f05174426">00736</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad8930797789eae5569491c0f05174426">lengthsqr3</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf) {
<a name="l00737"></a>00737     <span class="keywordflow">return</span> _lengthsqr3&lt;float&gt;(pf);
<a name="l00738"></a>00738 }
<a name="l00739"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aed0b451327f9924a83137a0aa1229f42">00739</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aed0b451327f9924a83137a0aa1229f42">lengthsqr4</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf) {
<a name="l00740"></a>00740     <span class="keywordflow">return</span> _lengthsqr4&lt;float&gt;(pf);
<a name="l00741"></a>00741 }
<a name="l00742"></a>00742 
<a name="l00743"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#affc167f7a19e542e4d13b79775bdec8f">00743</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#affc167f7a19e542e4d13b79775bdec8f">normalize2</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf) {
<a name="l00744"></a>00744     <span class="keywordflow">return</span> _normalize2&lt;float&gt;(pfout, pf);
<a name="l00745"></a>00745 }
<a name="l00746"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a229decb2c54cdee7cca9a03139d6f6ec">00746</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a229decb2c54cdee7cca9a03139d6f6ec">normalize3</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf) {
<a name="l00747"></a>00747     <span class="keywordflow">return</span> _normalize3&lt;float&gt;(pfout, pf);
<a name="l00748"></a>00748 }
<a name="l00749"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4fe10078a02dc7fa9f562de150662fbc">00749</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4fe10078a02dc7fa9f562de150662fbc">normalize4</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf) {
<a name="l00750"></a>00750     <span class="keywordflow">return</span> _normalize4&lt;float&gt;(pfout, pf);
<a name="l00751"></a>00751 }
<a name="l00752"></a>00752 
<a name="l00753"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28281cdd752b067fcfa996b3ed329067">00753</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28281cdd752b067fcfa996b3ed329067">cross3</a>(<span class="keywordtype">float</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2) {
<a name="l00754"></a>00754     <span class="keywordflow">return</span> _cross3&lt;float&gt;(pfout, pf1, pf2);
<a name="l00755"></a>00755 }
<a name="l00756"></a>00756 
<a name="l00757"></a>00757 <span class="comment">// multiplies 3x3 matrices</span>
<a name="l00758"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a43c711671450191396c6a6fb64b14ab6">00758</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a43c711671450191396c6a6fb64b14ab6">mult3_s4</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2) {
<a name="l00759"></a>00759     <span class="keywordflow">return</span> _mult3_s4&lt;float&gt;(pfres, pf1, pf2);
<a name="l00760"></a>00760 }
<a name="l00761"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a68d9ac2c8ee157350fb5f7a9e12777df">00761</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a68d9ac2c8ee157350fb5f7a9e12777df">mult3_s3</a>(<span class="keywordtype">float</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">float</span>* pf2) {
<a name="l00762"></a>00762     <span class="keywordflow">return</span> _mult3_s3&lt;float&gt;(pfres, pf1, pf2);
<a name="l00763"></a>00763 }
<a name="l00764"></a>00764 
<a name="l00765"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac0e5067fda68bff2c95ec6656447cfdc">00765</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac0e5067fda68bff2c95ec6656447cfdc">inv3</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf, <span class="keywordtype">float</span>* pfres, <span class="keywordtype">float</span>* pfdet, <span class="keywordtype">int</span> stride) {
<a name="l00766"></a>00766     <span class="keywordflow">return</span> _inv3&lt;float&gt;(pf, pfres, pfdet, stride);
<a name="l00767"></a>00767 }
<a name="l00768"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab4314fb677aba33db7ec8988bdedc1c7">00768</a> <span class="keyword">inline</span> <span class="keywordtype">float</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab4314fb677aba33db7ec8988bdedc1c7">inv4</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>* pf, <span class="keywordtype">float</span>* pfres) {
<a name="l00769"></a>00769     <span class="keywordflow">return</span> _inv4&lt;float&gt;(pf, pfres);
<a name="l00770"></a>00770 }
<a name="l00771"></a>00771 
<a name="l00772"></a>00772 
<a name="l00773"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a51d61c3f4ce92cc12ddc36c596e28818">00773</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a81fb331bc68449313f352e6582e361a6">mult4</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2) {
<a name="l00774"></a>00774     <span class="keywordflow">return</span> _mult4&lt;double&gt;(pfres, pf1, pf2);
<a name="l00775"></a>00775 }
<a name="l00776"></a>00776 <span class="comment">// pf1^T * pf2</span>
<a name="l00777"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad913b5b9fe5fd614847b31e53e3e7db7">00777</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4a44ef5d851ffffeb1288c50abbf29b3">multtrans3</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2) {
<a name="l00778"></a>00778     <span class="keywordflow">return</span> _multtrans3&lt;double&gt;(pfres, pf1, pf2);
<a name="l00779"></a>00779 }
<a name="l00780"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a17dfaea3650877d99d2d5f29a1ed231c">00780</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a06f3263e838f64e607923ff065d9c37a">multtrans4</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2) {
<a name="l00781"></a>00781     <span class="keywordflow">return</span> _multtrans4&lt;double&gt;(pfres, pf1, pf2);
<a name="l00782"></a>00782 }
<a name="l00783"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aa3a8acec5125df0f367c0c953d60e31a">00783</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a725e782059052b4e40f8dc99b39c2779">transnorm3</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pfmat, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf) {
<a name="l00784"></a>00784     <span class="keywordflow">return</span> _transnorm3&lt;double&gt;(pfout, pfmat, pf);
<a name="l00785"></a>00785 }
<a name="l00786"></a>00786 
<a name="l00787"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a457012e782e2f95245815950325c0efa">00787</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a1f2f6a714d9937409f4af7e8abbedf60">transpose3</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf, <span class="keywordtype">double</span>* pfres) {
<a name="l00788"></a>00788     <span class="keywordflow">return</span> _transpose3&lt;double&gt;(pf, pfres);
<a name="l00789"></a>00789 }
<a name="l00790"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aeacb67821892b748b6f71a122212d570">00790</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ae3ecb8ff5bf7b3701e1eff7a399d5724">transpose4</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf, <span class="keywordtype">double</span>* pfres) {
<a name="l00791"></a>00791     <span class="keywordflow">return</span> _transpose4&lt;double&gt;(pf, pfres);
<a name="l00792"></a>00792 }
<a name="l00793"></a>00793 
<a name="l00794"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a2b1c71ffd8f415e540c9fe6ae219209b">00794</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a6e66dbcddc141b9c134e65aeeb444b68">dot2</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2) {
<a name="l00795"></a>00795     <span class="keywordflow">return</span> _dot2&lt;double&gt;(pf1, pf2);
<a name="l00796"></a>00796 }
<a name="l00797"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#afaa340ef61dba68399a443d1b5b850da">00797</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a527c9a64311f7f2c2428d79acae6cbff">dot3</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2) {
<a name="l00798"></a>00798     <span class="keywordflow">return</span> _dot3&lt;double&gt;(pf1, pf2);
<a name="l00799"></a>00799 }
<a name="l00800"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aec2800b40c34066bd48eb3274267c7d2">00800</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a96bf07ea8f5101a0147508758262f674">dot4</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2) {
<a name="l00801"></a>00801     <span class="keywordflow">return</span> _dot4&lt;double&gt;(pf1, pf2);
<a name="l00802"></a>00802 }
<a name="l00803"></a>00803 
<a name="l00804"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3107f8f697b36b792709be295f88fac3">00804</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3a0b2ebd387daef7aafb864d73c77038">lengthsqr2</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf) {
<a name="l00805"></a>00805     <span class="keywordflow">return</span> _lengthsqr2&lt;double&gt;(pf);
<a name="l00806"></a>00806 }
<a name="l00807"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ae8b2f5dd2264fc8f50a197f0a055eacd">00807</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad8930797789eae5569491c0f05174426">lengthsqr3</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf) {
<a name="l00808"></a>00808     <span class="keywordflow">return</span> _lengthsqr3&lt;double&gt;(pf);
<a name="l00809"></a>00809 }
<a name="l00810"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a1af3baebf2928b5a4b99ad29665b837f">00810</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aed0b451327f9924a83137a0aa1229f42">lengthsqr4</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf) {
<a name="l00811"></a>00811     <span class="keywordflow">return</span> _lengthsqr4&lt;double&gt;(pf);
<a name="l00812"></a>00812 }
<a name="l00813"></a>00813 
<a name="l00814"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#aa020dd4463b869ba8786d255fc5ecb91">00814</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#affc167f7a19e542e4d13b79775bdec8f">normalize2</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf) {
<a name="l00815"></a>00815     <span class="keywordflow">return</span> _normalize2&lt;double&gt;(pfout, pf);
<a name="l00816"></a>00816 }
<a name="l00817"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a3b2de808d9b42ec46282a1b8aeb3eb68">00817</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a229decb2c54cdee7cca9a03139d6f6ec">normalize3</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf) {
<a name="l00818"></a>00818     <span class="keywordflow">return</span> _normalize3&lt;double&gt;(pfout, pf);
<a name="l00819"></a>00819 }
<a name="l00820"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a73ac77b5d5ecdb67f6d4f998373b4aa8">00820</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4fe10078a02dc7fa9f562de150662fbc">normalize4</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf) {
<a name="l00821"></a>00821     <span class="keywordflow">return</span> _normalize4&lt;double&gt;(pfout, pf);
<a name="l00822"></a>00822 }
<a name="l00823"></a>00823 
<a name="l00824"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a2b3b5a10b93accf124ff45ea0bd5c68f">00824</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28281cdd752b067fcfa996b3ed329067">cross3</a>(<span class="keywordtype">double</span>* pfout, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2) {
<a name="l00825"></a>00825     <span class="keywordflow">return</span> _cross3&lt;double&gt;(pfout, pf1, pf2);
<a name="l00826"></a>00826 }
<a name="l00827"></a>00827 
<a name="l00828"></a>00828 <span class="comment">// multiplies 3x3 matrices</span>
<a name="l00829"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4c9a9fb2d0102a448f615ef4d63f1b1f">00829</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a43c711671450191396c6a6fb64b14ab6">mult3_s4</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2) {
<a name="l00830"></a>00830     <span class="keywordflow">return</span> _mult3_s4&lt;double&gt;(pfres, pf1, pf2);
<a name="l00831"></a>00831 }
<a name="l00832"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab384d1c83141acdad73f6cec4f5a6c78">00832</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a68d9ac2c8ee157350fb5f7a9e12777df">mult3_s3</a>(<span class="keywordtype">double</span>* pfres, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf1, <span class="keyword">const</span> <span class="keywordtype">double</span>* pf2) {
<a name="l00833"></a>00833     <span class="keywordflow">return</span> _mult3_s3&lt;double&gt;(pfres, pf1, pf2);
<a name="l00834"></a>00834 }
<a name="l00835"></a>00835 
<a name="l00836"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#addece3c4630229504027ea78f2eab03c">00836</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac0e5067fda68bff2c95ec6656447cfdc">inv3</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf, <span class="keywordtype">double</span>* pfres, <span class="keywordtype">double</span>* pfdet, <span class="keywordtype">int</span> stride) {
<a name="l00837"></a>00837     <span class="keywordflow">return</span> _inv3&lt;double&gt;(pf, pfres, pfdet, stride);
<a name="l00838"></a>00838 }
<a name="l00839"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a1f42b846cb8ee1147d2fe85fdd8e8be3">00839</a> <span class="keyword">inline</span> <span class="keywordtype">double</span>* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab4314fb677aba33db7ec8988bdedc1c7">inv4</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>* pf, <span class="keywordtype">double</span>* pfres) {
<a name="l00840"></a>00840     <span class="keywordflow">return</span> _inv4&lt;double&gt;(pf, pfres);
<a name="l00841"></a>00841 }
<a name="l00842"></a>00842 
<a name="l00843"></a>00843 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> R, <span class="keyword">typename</span> S&gt;
<a name="l00844"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a83ec66af95ada84efae402892c3b4550">00844</a> <span class="keyword">inline</span> S* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a5da29cad5c0859b8f34444a2c7977744">mult</a>(T* pf1, R* pf2, <span class="keywordtype">int</span> r1, <span class="keywordtype">int</span> c1, <span class="keywordtype">int</span> c2, S* pfres, <span class="keywordtype">bool</span> badd)
<a name="l00845"></a>00845 {
<a name="l00846"></a>00846     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL &amp;&amp; pfres != NULL);
<a name="l00847"></a>00847     <span class="keywordtype">int</span> j, k;
<a name="l00848"></a>00848 
<a name="l00849"></a>00849     <span class="keywordflow">if</span>( !badd ) memset(pfres, 0, <span class="keyword">sizeof</span>(S) * r1 * c2);
<a name="l00850"></a>00850 
<a name="l00851"></a>00851     <span class="keywordflow">while</span>(r1 &gt; 0) {
<a name="l00852"></a>00852         --r1;
<a name="l00853"></a>00853 
<a name="l00854"></a>00854         j = 0;
<a name="l00855"></a>00855         <span class="keywordflow">while</span>(j &lt; c2) {
<a name="l00856"></a>00856             k = 0;
<a name="l00857"></a>00857             <span class="keywordflow">while</span>(k &lt; c1) {
<a name="l00858"></a>00858                 pfres[j] += (S)(pf1[k] * pf2[k*c2 + j]);
<a name="l00859"></a>00859                 ++k;
<a name="l00860"></a>00860             }
<a name="l00861"></a>00861             ++j;
<a name="l00862"></a>00862         }
<a name="l00863"></a>00863 
<a name="l00864"></a>00864         pf1 += c1;
<a name="l00865"></a>00865         pfres += c2;
<a name="l00866"></a>00866     }
<a name="l00867"></a>00867 
<a name="l00868"></a>00868     <span class="keywordflow">return</span> pfres;
<a name="l00869"></a>00869 }
<a name="l00870"></a>00870 
<a name="l00871"></a>00871 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> R, <span class="keyword">typename</span> S&gt;
<a name="l00872"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a026fa1e10be5ba90b2907f207a57d686">00872</a> <span class="keyword">inline</span> S* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a026fa1e10be5ba90b2907f207a57d686">multtrans</a>(T* pf1, R* pf2, <span class="keywordtype">int</span> r1, <span class="keywordtype">int</span> c1, <span class="keywordtype">int</span> c2, S* pfres, <span class="keywordtype">bool</span> badd)
<a name="l00873"></a>00873 {
<a name="l00874"></a>00874     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL &amp;&amp; pfres != NULL);
<a name="l00875"></a>00875     <span class="keywordtype">int</span> i, j, k;
<a name="l00876"></a>00876 
<a name="l00877"></a>00877     <span class="keywordflow">if</span>( !badd ) memset(pfres, 0, <span class="keyword">sizeof</span>(S) * c1 * c2);
<a name="l00878"></a>00878 
<a name="l00879"></a>00879     i = 0;
<a name="l00880"></a>00880     <span class="keywordflow">while</span>(i &lt; c1) {
<a name="l00881"></a>00881 
<a name="l00882"></a>00882         j = 0;
<a name="l00883"></a>00883         <span class="keywordflow">while</span>(j &lt; c2) {
<a name="l00884"></a>00884 
<a name="l00885"></a>00885             k = 0;
<a name="l00886"></a>00886             <span class="keywordflow">while</span>(k &lt; r1) {
<a name="l00887"></a>00887                 pfres[j] += (S)(pf1[k*c1] * pf2[k*c2 + j]);
<a name="l00888"></a>00888                 ++k;
<a name="l00889"></a>00889             }
<a name="l00890"></a>00890             ++j;
<a name="l00891"></a>00891         }
<a name="l00892"></a>00892 
<a name="l00893"></a>00893         pfres += c2;
<a name="l00894"></a>00894         ++pf1;
<a name="l00895"></a>00895 
<a name="l00896"></a>00896         ++i;
<a name="l00897"></a>00897     }
<a name="l00898"></a>00898 
<a name="l00899"></a>00899     <span class="keywordflow">return</span> pfres;
<a name="l00900"></a>00900 }
<a name="l00901"></a>00901 
<a name="l00902"></a>00902 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> R, <span class="keyword">typename</span> S&gt;
<a name="l00903"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a9da8532a0ff0230a01ae8e64e59d25b8">00903</a> <span class="keyword">inline</span> S* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a9da8532a0ff0230a01ae8e64e59d25b8">multtrans_to2</a>(T* pf1, R* pf2, <span class="keywordtype">int</span> r1, <span class="keywordtype">int</span> c1, <span class="keywordtype">int</span> r2, S* pfres, <span class="keywordtype">bool</span> badd)
<a name="l00904"></a>00904 {
<a name="l00905"></a>00905     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL &amp;&amp; pfres != NULL);
<a name="l00906"></a>00906     <span class="keywordtype">int</span> j, k;
<a name="l00907"></a>00907 
<a name="l00908"></a>00908     <span class="keywordflow">if</span>( !badd ) memset(pfres, 0, <span class="keyword">sizeof</span>(S) * r1 * r2);
<a name="l00909"></a>00909 
<a name="l00910"></a>00910     <span class="keywordflow">while</span>(r1 &gt; 0) {
<a name="l00911"></a>00911         --r1;
<a name="l00912"></a>00912 
<a name="l00913"></a>00913         j = 0;
<a name="l00914"></a>00914         <span class="keywordflow">while</span>(j &lt; r2) {
<a name="l00915"></a>00915             k = 0;
<a name="l00916"></a>00916             <span class="keywordflow">while</span>(k &lt; c1) {
<a name="l00917"></a>00917                 pfres[j] += (S)(pf1[k] * pf2[j*c1 + k]);
<a name="l00918"></a>00918                 ++k;
<a name="l00919"></a>00919             }
<a name="l00920"></a>00920             ++j;
<a name="l00921"></a>00921         }
<a name="l00922"></a>00922 
<a name="l00923"></a>00923         pf1 += c1;
<a name="l00924"></a>00924         pfres += r2;
<a name="l00925"></a>00925     }
<a name="l00926"></a>00926 
<a name="l00927"></a>00927     <span class="keywordflow">return</span> pfres;
<a name="l00928"></a>00928 }
<a name="l00929"></a>00929 
<a name="l00930"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad9d449f5bf7205e75134e9b6452360b7">00930</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad9d449f5bf7205e75134e9b6452360b7">multto1</a>(T* pf1, T* pf2, <span class="keywordtype">int</span> r, <span class="keywordtype">int</span> c, T* pftemp)
<a name="l00931"></a>00931 {
<a name="l00932"></a>00932     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL );
<a name="l00933"></a>00933 
<a name="l00934"></a>00934     <span class="keywordtype">int</span> j, k;
<a name="l00935"></a>00935     <span class="keywordtype">bool</span> bdel = <span class="keyword">false</span>;
<a name="l00936"></a>00936 
<a name="l00937"></a>00937     <span class="keywordflow">if</span>( pftemp == NULL ) {
<a name="l00938"></a>00938         pftemp = <span class="keyword">new</span> T[c];
<a name="l00939"></a>00939         bdel = <span class="keyword">true</span>;
<a name="l00940"></a>00940     }
<a name="l00941"></a>00941 
<a name="l00942"></a>00942     <span class="keywordflow">while</span>(r &gt; 0) {
<a name="l00943"></a>00943         --r;
<a name="l00944"></a>00944 
<a name="l00945"></a>00945         j = 0;
<a name="l00946"></a>00946         <span class="keywordflow">while</span>(j &lt; c) {
<a name="l00947"></a>00947 
<a name="l00948"></a>00948             pftemp[j] = 0.0;
<a name="l00949"></a>00949 
<a name="l00950"></a>00950             k = 0;
<a name="l00951"></a>00951             <span class="keywordflow">while</span>(k &lt; c) {
<a name="l00952"></a>00952                 pftemp[j] += pf1[k] * pf2[k*c + j];
<a name="l00953"></a>00953                 ++k;
<a name="l00954"></a>00954             }
<a name="l00955"></a>00955             ++j;
<a name="l00956"></a>00956         }
<a name="l00957"></a>00957 
<a name="l00958"></a>00958         memcpy(pf1, pftemp, c * <span class="keyword">sizeof</span>(T));
<a name="l00959"></a>00959         pf1 += c;
<a name="l00960"></a>00960     }
<a name="l00961"></a>00961 
<a name="l00962"></a>00962     <span class="keywordflow">if</span>( bdel ) <span class="keyword">delete</span>[] pftemp;
<a name="l00963"></a>00963 
<a name="l00964"></a>00964     <span class="keywordflow">return</span> pf1;
<a name="l00965"></a>00965 }
<a name="l00966"></a>00966 
<a name="l00967"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a2ccbcd22eee92b1456746b47329263a1">00967</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> S&gt; <span class="keyword">inline</span> T* <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a2ccbcd22eee92b1456746b47329263a1">multto2</a>(T* pf1, S* pf2, <span class="keywordtype">int</span> r2, <span class="keywordtype">int</span> c2, S* pftemp)
<a name="l00968"></a>00968 {
<a name="l00969"></a>00969     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL );
<a name="l00970"></a>00970 
<a name="l00971"></a>00971     <span class="keywordtype">int</span> i, j, k;
<a name="l00972"></a>00972     <span class="keywordtype">bool</span> bdel = <span class="keyword">false</span>;
<a name="l00973"></a>00973 
<a name="l00974"></a>00974     <span class="keywordflow">if</span>( pftemp == NULL ) {
<a name="l00975"></a>00975         pftemp = <span class="keyword">new</span> S[r2];
<a name="l00976"></a>00976         bdel = <span class="keyword">true</span>;
<a name="l00977"></a>00977     }
<a name="l00978"></a>00978 
<a name="l00979"></a>00979     <span class="comment">// do columns first</span>
<a name="l00980"></a>00980     j = 0;
<a name="l00981"></a>00981     <span class="keywordflow">while</span>(j &lt; c2) {
<a name="l00982"></a>00982         i = 0;
<a name="l00983"></a>00983         <span class="keywordflow">while</span>(i &lt; r2) {
<a name="l00984"></a>00984 
<a name="l00985"></a>00985             pftemp[i] = 0.0;
<a name="l00986"></a>00986 
<a name="l00987"></a>00987             k = 0;
<a name="l00988"></a>00988             <span class="keywordflow">while</span>(k &lt; r2) {
<a name="l00989"></a>00989                 pftemp[i] += pf1[i*r2 + k] * pf2[k*c2 + j];
<a name="l00990"></a>00990                 ++k;
<a name="l00991"></a>00991             }
<a name="l00992"></a>00992             ++i;
<a name="l00993"></a>00993         }
<a name="l00994"></a>00994 
<a name="l00995"></a>00995         i = 0;
<a name="l00996"></a>00996         <span class="keywordflow">while</span>(i &lt; r2) {
<a name="l00997"></a>00997             *(pf2+i*c2+j) = pftemp[i];
<a name="l00998"></a>00998             ++i;
<a name="l00999"></a>00999         }
<a name="l01000"></a>01000 
<a name="l01001"></a>01001         ++j;
<a name="l01002"></a>01002     }
<a name="l01003"></a>01003 
<a name="l01004"></a>01004     <span class="keywordflow">if</span>( bdel ) <span class="keyword">delete</span>[] pftemp;
<a name="l01005"></a>01005 
<a name="l01006"></a>01006     <span class="keywordflow">return</span> pf1;
<a name="l01007"></a>01007 }
<a name="l01008"></a>01008 
<a name="l01009"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab6e747e0ab612067f2652d7b13b0289d">01009</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab6e747e0ab612067f2652d7b13b0289d">add</a>(T* pf1, T* pf2, <span class="keywordtype">int</span> r)
<a name="l01010"></a>01010 {
<a name="l01011"></a>01011     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL);
<a name="l01012"></a>01012 
<a name="l01013"></a>01013     <span class="keywordflow">while</span>(r &gt; 0) {
<a name="l01014"></a>01014         --r;
<a name="l01015"></a>01015         pf1[r] += pf2[r];
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017 }
<a name="l01018"></a>01018 
<a name="l01019"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a219be6390b14991d050a220fd5485eb1">01019</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a219be6390b14991d050a220fd5485eb1">sub</a>(T* pf1, T* pf2, <span class="keywordtype">int</span> r)
<a name="l01020"></a>01020 {
<a name="l01021"></a>01021     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL &amp;&amp; pf2 != NULL);
<a name="l01022"></a>01022 
<a name="l01023"></a>01023     <span class="keywordflow">while</span>(r &gt; 0) {
<a name="l01024"></a>01024         --r;
<a name="l01025"></a>01025         pf1[r] -= pf2[r];
<a name="l01026"></a>01026     }
<a name="l01027"></a>01027 }
<a name="l01028"></a>01028 
<a name="l01029"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a0f1951ea43605ecb4afc8c63b7df5ede">01029</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a0f1951ea43605ecb4afc8c63b7df5ede">normsqr</a>(<span class="keyword">const</span> T* pf1, <span class="keywordtype">int</span> r)
<a name="l01030"></a>01030 {
<a name="l01031"></a>01031     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pf1 != NULL );
<a name="l01032"></a>01032 
<a name="l01033"></a>01033     T d = 0.0;
<a name="l01034"></a>01034     <span class="keywordflow">while</span>(r &gt; 0) {
<a name="l01035"></a>01035         --r;
<a name="l01036"></a>01036         d += pf1[r] * pf1[r];
<a name="l01037"></a>01037     }
<a name="l01038"></a>01038 
<a name="l01039"></a>01039     <span class="keywordflow">return</span> d;
<a name="l01040"></a>01040 }
<a name="l01041"></a>01041 
<a name="l01042"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac64ed03a4d6b1db8560d1d0c6e19122c">01042</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ac64ed03a4d6b1db8560d1d0c6e19122c">lengthsqr</a>(<span class="keyword">const</span> T* pf1, <span class="keyword">const</span> T* pf2, <span class="keywordtype">int</span> length)
<a name="l01043"></a>01043 {
<a name="l01044"></a>01044     T d = 0;
<a name="l01045"></a>01045     <span class="keywordflow">while</span>(length &gt; 0) {
<a name="l01046"></a>01046         --length;
<a name="l01047"></a>01047         T t = pf1[length] - pf2[length];
<a name="l01048"></a>01048         d += t * t;
<a name="l01049"></a>01049     }
<a name="l01050"></a>01050 
<a name="l01051"></a>01051     <span class="keywordflow">return</span> d;
<a name="l01052"></a>01052 }
<a name="l01053"></a>01053 
<a name="l01054"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a88c880c263a9a5dc3731a588157ba573">01054</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a88c880c263a9a5dc3731a588157ba573">dot</a>(T* pf1, T* pf2, <span class="keywordtype">int</span> length)
<a name="l01055"></a>01055 {
<a name="l01056"></a>01056     T d = 0;
<a name="l01057"></a>01057     <span class="keywordflow">while</span>(length &gt; 0) {
<a name="l01058"></a>01058         --length;
<a name="l01059"></a>01059         d += pf1[length] * pf2[length];
<a name="l01060"></a>01060     }
<a name="l01061"></a>01061 
<a name="l01062"></a>01062     <span class="keywordflow">return</span> d;
<a name="l01063"></a>01063 }
<a name="l01064"></a>01064 
<a name="l01065"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad51c7a2a23e482e3b2d13c0dd938a86f">01065</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad51c7a2a23e482e3b2d13c0dd938a86f">sum</a>(T* pf, <span class="keywordtype">int</span> length)
<a name="l01066"></a>01066 {
<a name="l01067"></a>01067     T d = 0;
<a name="l01068"></a>01068     <span class="keywordflow">while</span>(length &gt; 0) {
<a name="l01069"></a>01069         --length;
<a name="l01070"></a>01070         d += pf[length];
<a name="l01071"></a>01071     }
<a name="l01072"></a>01072 
<a name="l01073"></a>01073     <span class="keywordflow">return</span> d;
<a name="l01074"></a>01074 }
<a name="l01075"></a>01075 
<a name="l01076"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#abb67a10be5fe708132dbe3792089cb43">01076</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#abb67a10be5fe708132dbe3792089cb43" title="takes the inverse of the 2x2 matrix pf and stores it into pfres, returns true if...">inv2</a>(T* pf, T* pfres)
<a name="l01077"></a>01077 {
<a name="l01078"></a>01078     T fdet = pf[0] * pf[3] - pf[1] * pf[2];
<a name="l01079"></a>01079 
<a name="l01080"></a>01080     <span class="keywordflow">if</span>( fabs(fdet) &lt; 1e-16 ) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01081"></a>01081 
<a name="l01082"></a>01082     fdet = 1 / fdet;
<a name="l01083"></a>01083     <span class="comment">//if( pfdet != NULL ) *pfdet = fdet;</span>
<a name="l01084"></a>01084 
<a name="l01085"></a>01085     <span class="keywordflow">if</span>( pfres != pf ) {
<a name="l01086"></a>01086         pfres[0] = fdet * pf[3];                pfres[1] = -fdet * pf[1];
<a name="l01087"></a>01087         pfres[2] = -fdet * pf[2];               pfres[3] = fdet * pf[0];
<a name="l01088"></a>01088         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01089"></a>01089     }
<a name="l01090"></a>01090 
<a name="l01091"></a>01091     T ftemp = pf[0];
<a name="l01092"></a>01092     pfres[0] = pf[3] * fdet;
<a name="l01093"></a>01093     pfres[1] *= -fdet;
<a name="l01094"></a>01094     pfres[2] *= -fdet;
<a name="l01095"></a>01095     pfres[3] = ftemp * pf[0];
<a name="l01096"></a>01096 
<a name="l01097"></a>01097     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01098"></a>01098 }
<a name="l01099"></a>01099 
<a name="l01100"></a>01100 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> S&gt;
<a name="l01101"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad10d0faef4a5cb3a8469265678154d85">01101</a> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad10d0faef4a5cb3a8469265678154d85">Tridiagonal3</a> (S* mat, T* diag, T* subd)
<a name="l01102"></a>01102 {
<a name="l01103"></a>01103     T a, b, c, d, e, f, ell, q;
<a name="l01104"></a>01104 
<a name="l01105"></a>01105     a = mat[0*3+0];
<a name="l01106"></a>01106     b = mat[0*3+1];
<a name="l01107"></a>01107     c = mat[0*3+2];
<a name="l01108"></a>01108     d = mat[1*3+1];
<a name="l01109"></a>01109     e = mat[1*3+2];
<a name="l01110"></a>01110     f = mat[2*3+2];
<a name="l01111"></a>01111 
<a name="l01112"></a>01112     subd[2] = 0.0;
<a name="l01113"></a>01113     diag[0] = a;
<a name="l01114"></a>01114     <span class="keywordflow">if</span> ( fabs(c) &gt;= <a class="code" href="openrave_8h.html#a280aa678a7e8c375487ffb5e10d70fd3">g_fEpsilon</a> ) {
<a name="l01115"></a>01115         ell = (T)sqrt(b*b+c*c);
<a name="l01116"></a>01116         b /= ell;
<a name="l01117"></a>01117         c /= ell;
<a name="l01118"></a>01118         q = 2*b*e+c*(f-d);
<a name="l01119"></a>01119         diag[1] = d+c*q;
<a name="l01120"></a>01120         diag[2] = f-c*q;
<a name="l01121"></a>01121         subd[0] = ell;
<a name="l01122"></a>01122         subd[1] = e-b*q;
<a name="l01123"></a>01123         mat[0*3+0] = (S)1; mat[0*3+1] = (S)0; mat[0*3+2] = (T)0;
<a name="l01124"></a>01124         mat[1*3+0] = (S)0; mat[1*3+1] = b; mat[1*3+2] = c;
<a name="l01125"></a>01125         mat[2*3+0] = (S)0; mat[2*3+1] = c; mat[2*3+2] = -b;
<a name="l01126"></a>01126     }
<a name="l01127"></a>01127     <span class="keywordflow">else</span> {
<a name="l01128"></a>01128         diag[1] = d;
<a name="l01129"></a>01129         diag[2] = f;
<a name="l01130"></a>01130         subd[0] = b;
<a name="l01131"></a>01131         subd[1] = e;
<a name="l01132"></a>01132         mat[0*3+0] = (S)1; mat[0*3+1] = (S)0; mat[0*3+2] = (S)0;
<a name="l01133"></a>01133         mat[1*3+0] = (S)0; mat[1*3+1] = (S)1; mat[1*3+2] = (S)0;
<a name="l01134"></a>01134         mat[2*3+0] = (S)0; mat[2*3+1] = (S)0; mat[2*3+2] = (S)1;
<a name="l01135"></a>01135     }
<a name="l01136"></a>01136 }
<a name="l01137"></a>01137 
<a name="l01138"></a>01138 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01139"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a698af188ade25c457317354c0e9ebcba">01139</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a698af188ade25c457317354c0e9ebcba">svd3</a>(<span class="keyword">const</span> T* A, T* U, T* D, T* V)
<a name="l01140"></a>01140 {
<a name="l01141"></a>01141     T VVt[9];
<a name="l01142"></a>01142     T eigenvalues[3];
<a name="l01143"></a>01143     <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a4a44ef5d851ffffeb1288c50abbf29b3">multtrans3</a>(VVt, A, A);
<a name="l01144"></a>01144     <span class="comment">// get eigen values of V: VVt  V = V  D^2</span>
<a name="l01145"></a>01145     T afSubDiag[3];
<a name="l01146"></a>01146     std::copy(&amp;VVt,&amp;VVt[9],&amp;V[0]);
<a name="l01147"></a>01147     <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ad10d0faef4a5cb3a8469265678154d85">Tridiagonal3</a>(V,eigenvalues,afSubDiag);
<a name="l01148"></a>01148     <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#ab4008c737b79b568a509235e6b9c5f01">QLAlgorithm3</a>(V,eigenvalues,afSubDiag);
<a name="l01149"></a>01149 
<a name="l01150"></a>01150     <span class="comment">//float fDet =  V[0*3+0] * (V[1*3+1] * V[2*3+2] - V[1*3+2] * V[2*3+1]) +</span>
<a name="l01151"></a>01151     <span class="comment">//        V[0*3+1] * (V[1*3+2] * V[2*3+0] - V[1*3+0] * V[2*3+2]) +</span>
<a name="l01152"></a>01152     <span class="comment">//        V[0*3+2] * (V[1*3+0] * V[2*3+1] - V[1*3+1] * V[2*3+0]);</span>
<a name="l01153"></a>01153     <span class="comment">//</span>
<a name="l01154"></a>01154     <span class="comment">//    if ( fDet &lt; 0.0f ) {</span>
<a name="l01155"></a>01155     <span class="comment">//        V[0*3+2] = - V[0*3+2];</span>
<a name="l01156"></a>01156     <span class="comment">//        V[1*3+2] = - V[1*3+2];</span>
<a name="l01157"></a>01157     <span class="comment">//        V[2*3+2] = - V[2*3+2];</span>
<a name="l01158"></a>01158     <span class="comment">//    }</span>
<a name="l01159"></a>01159 
<a name="l01160"></a>01160     <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a68d9ac2c8ee157350fb5f7a9e12777df">mult3_s3</a>(U, A, V); <span class="comment">// U = A V = U D</span>
<a name="l01161"></a>01161     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) {
<a name="l01162"></a>01162         D[i] = sqrt(eigenvalues[i]);
<a name="l01163"></a>01163         T f = 1/D[i];
<a name="l01164"></a>01164         U[i] *= f;
<a name="l01165"></a>01165         U[i+3] *= f;
<a name="l01166"></a>01166         U[i+6] *= f;
<a name="l01167"></a>01167     }
<a name="l01168"></a>01168     <span class="keywordtype">int</span> maxval = 0;
<a name="l01169"></a>01169     <span class="keywordflow">if</span>( D[1] &gt; D[maxval] ) {
<a name="l01170"></a>01170         maxval = 1;
<a name="l01171"></a>01171     }
<a name="l01172"></a>01172     <span class="keywordflow">if</span>( D[2] &gt; D[maxval] ) {
<a name="l01173"></a>01173         maxval = 2;
<a name="l01174"></a>01174     }
<a name="l01175"></a>01175     <span class="keywordflow">if</span>( maxval &gt; 0 ) {
<a name="l01176"></a>01176         <span class="comment">// flip columns</span>
<a name="l01177"></a>01177         swap(U[0], U[maxval]);
<a name="l01178"></a>01178         swap(U[3], U[3+maxval]);
<a name="l01179"></a>01179         swap(U[6], U[6+maxval]);
<a name="l01180"></a>01180         swap(V[0], V[maxval]);
<a name="l01181"></a>01181         swap(V[3], V[3+maxval]);
<a name="l01182"></a>01182         swap(V[6], V[6+maxval]);
<a name="l01183"></a>01183         swap(D[0], D[maxval]);
<a name="l01184"></a>01184     }
<a name="l01185"></a>01185     <span class="keywordflow">if</span>( D[1] &lt; D[2] ) {
<a name="l01186"></a>01186         swap(U[1], U[2]);
<a name="l01187"></a>01187         swap(U[4], U[5]);
<a name="l01188"></a>01188         swap(U[7], U[8]);
<a name="l01189"></a>01189         swap(V[1], V[2]);
<a name="l01190"></a>01190         swap(V[4], V[5]);
<a name="l01191"></a>01191         swap(V[7], V[8]);
<a name="l01192"></a>01192         swap(D[1], D[2]);
<a name="l01193"></a>01193     }
<a name="l01194"></a>01194 }
<a name="l01195"></a>01195 
<a name="l01196"></a>01196 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01197"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28fab5ce9954860ea9ffb5bee9fc0f09">01197</a> <span class="keywordtype">int</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28fab5ce9954860ea9ffb5bee9fc0f09">Min</a>(T* pts, <span class="keywordtype">int</span> stride, <span class="keywordtype">int</span> numPts)
<a name="l01198"></a>01198 {
<a name="l01199"></a>01199     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pts != NULL &amp;&amp; numPts &gt; 0 &amp;&amp; stride &gt; 0 );
<a name="l01200"></a>01200 
<a name="l01201"></a>01201     <span class="keywordtype">int</span> best = pts[0]; pts += stride;
<a name="l01202"></a>01202     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; numPts; ++i, pts += stride) {
<a name="l01203"></a>01203         <span class="keywordflow">if</span>( best &gt; pts[0] )
<a name="l01204"></a>01204             best = pts[0];
<a name="l01205"></a>01205     }
<a name="l01206"></a>01206 
<a name="l01207"></a>01207     <span class="keywordflow">return</span> best;
<a name="l01208"></a>01208 }
<a name="l01209"></a>01209 
<a name="l01210"></a>01210 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01211"></a><a class="code" href="namespaceOpenRAVE_1_1mathextra.html#afa49cf2b486df8e832804efe2eb23835">01211</a> <span class="keywordtype">int</span> <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#afa49cf2b486df8e832804efe2eb23835">Max</a>(T* pts, <span class="keywordtype">int</span> stride, <span class="keywordtype">int</span> numPts)
<a name="l01212"></a>01212 {
<a name="l01213"></a>01213     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( pts != NULL &amp;&amp; numPts &gt; 0 &amp;&amp; stride &gt; 0 );
<a name="l01214"></a>01214 
<a name="l01215"></a>01215     <span class="keywordtype">int</span> best = pts[0]; pts += stride;
<a name="l01216"></a>01216     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; numPts; ++i, pts += stride) {
<a name="l01217"></a>01217         <span class="keywordflow">if</span>( best &lt; pts[0] )
<a name="l01218"></a>01218             best = pts[0];
<a name="l01219"></a>01219     }
<a name="l01220"></a>01220 
<a name="l01221"></a>01221     <span class="keywordflow">return</span> best;
<a name="l01222"></a>01222 }
<a name="l01223"></a>01223 
<a name="l01224"></a>01224 } <span class="comment">// end namespace mathextra</span>
<a name="l01225"></a>01225 } <span class="comment">// end namespace OpenRAVE</span>
<a name="l01226"></a>01226 
<a name="l01227"></a>01227 <span class="preprocessor">#endif</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>クラス</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>OpenRAVEに対してThu Mar 22 20:42:53 2012に生成されました。&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
