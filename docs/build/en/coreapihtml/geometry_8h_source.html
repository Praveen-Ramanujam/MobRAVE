<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenRAVE: include/openrave/geometry.h (r2848/r2831) Source File 0.5.0</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<h1><a href="http://openrave.org"><img src="openrave_banner_dark.png" border="0" alt="openrave.org" width="400"/></a></h1>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>include/openrave/geometry.h (r2848/r2831)</h1><a href="geometry_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// -*- coding: utf-8 -*-</span>
<a name="l00002"></a>00002 <span class="comment">// Copyright (C) 2006-2011 Rosen Diankov &lt;rosen.diankov@gmail.com&gt;</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// This file is part of OpenRAVE.</span>
<a name="l00005"></a>00005 <span class="comment">// OpenRAVE is free software: you can redistribute it and/or modify</span>
<a name="l00006"></a>00006 <span class="comment">// it under the terms of the GNU Lesser General Public License as published by</span>
<a name="l00007"></a>00007 <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00008"></a>00008 <span class="comment">// at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment">//</span>
<a name="l00010"></a>00010 <span class="comment">// This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="comment">// GNU Lesser General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment">//</span>
<a name="l00015"></a>00015 <span class="comment">// You should have received a copy of the GNU Lesser General Public License</span>
<a name="l00016"></a>00016 <span class="comment">// along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00020"></a>00020 <span class="comment"></span><span class="preprocessor">#ifndef OPENRAVE_GEOMETRY_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define OPENRAVE_GEOMETRY_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;limits&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;utility&gt;</span> <span class="comment">// for std::pair</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;cstring&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#ifndef RAVE_DEPRECATED</span>
<a name="l00031"></a><a class="code" href="geometry_8h.html#a9ec560a833d334f15fb49fa937820347">00031</a> <span class="preprocessor"></span><span class="preprocessor">#define RAVE_DEPRECATED</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#ifdef BOOST_ASSERT</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#define MATH_ASSERT BOOST_ASSERT</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#include &lt;cassert&gt;</span>
<a name="l00037"></a><a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">00037</a> <span class="preprocessor">#define MATH_ASSERT assert</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="keyword">namespace </span>OpenRAVE {
<a name="l00041"></a>00041 
<a name="l00043"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html">00043</a> <span class="keyword">namespace </span>geometry {
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform</a>;
<a name="l00046"></a>00046 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix</a>;
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="preprocessor">#ifndef MATH_SQRT</span>
<a name="l00049"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">00049</a> <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(<span class="keywordtype">float</span> f) {
<a name="l00050"></a>00050     <span class="keywordflow">return</span> sqrtf(f);
<a name="l00051"></a>00051 }
<a name="l00052"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a7a0a990edad220db4a91151a80862a53">00052</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(<span class="keywordtype">double</span> f) {
<a name="l00053"></a>00053     <span class="keywordflow">return</span> sqrt(f);
<a name="l00054"></a>00054 }
<a name="l00055"></a>00055 <span class="preprocessor">#endif</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="preprocessor">#ifndef MATH_SIN</span>
<a name="l00057"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a385cfc9dc9cbf1ca104d1bbed973ed32">00057</a> <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a385cfc9dc9cbf1ca104d1bbed973ed32">MATH_SIN</a>(<span class="keywordtype">float</span> f) {
<a name="l00058"></a>00058     <span class="keywordflow">return</span> sinf(f);
<a name="l00059"></a>00059 }
<a name="l00060"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#af2769f5fcc025339a38d3d2435a9d639">00060</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a385cfc9dc9cbf1ca104d1bbed973ed32">MATH_SIN</a>(<span class="keywordtype">double</span> f) {
<a name="l00061"></a>00061     <span class="keywordflow">return</span> sin(f);
<a name="l00062"></a>00062 }
<a name="l00063"></a>00063 <span class="preprocessor">#endif</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span><span class="preprocessor">#ifndef MATH_COS</span>
<a name="l00065"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#afba208e07cd534031df027a712be452d">00065</a> <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#afba208e07cd534031df027a712be452d">MATH_COS</a>(<span class="keywordtype">float</span> f) {
<a name="l00066"></a>00066     <span class="keywordflow">return</span> cosf(f);
<a name="l00067"></a>00067 }
<a name="l00068"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a8f2e39b0b80783e25b7c7e865183ac87">00068</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#afba208e07cd534031df027a712be452d">MATH_COS</a>(<span class="keywordtype">double</span> f) {
<a name="l00069"></a>00069     <span class="keywordflow">return</span> cos(f);
<a name="l00070"></a>00070 }
<a name="l00071"></a>00071 <span class="preprocessor">#endif</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span><span class="preprocessor">#ifndef MATH_FABS</span>
<a name="l00073"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">00073</a> <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(<span class="keywordtype">float</span> f) {
<a name="l00074"></a>00074     <span class="keywordflow">return</span> fabsf(f);
<a name="l00075"></a>00075 }
<a name="l00076"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a0266dddd12adf6195754c57a25436afa">00076</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(<span class="keywordtype">double</span> f) {
<a name="l00077"></a>00077     <span class="keywordflow">return</span> fabs(f);
<a name="l00078"></a>00078 }
<a name="l00079"></a>00079 <span class="preprocessor">#endif</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor">#ifndef MATH_ACOS</span>
<a name="l00081"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#aedc3766011ea14e0c1e3acf6004ac446">00081</a> <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#aedc3766011ea14e0c1e3acf6004ac446">MATH_ACOS</a>(<span class="keywordtype">float</span> f) {
<a name="l00082"></a>00082     <span class="keywordflow">return</span> acosf(f);
<a name="l00083"></a>00083 }
<a name="l00084"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#aa1dc1d88ba525bab8cbab954387ab361">00084</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#aedc3766011ea14e0c1e3acf6004ac446">MATH_ACOS</a>(<span class="keywordtype">double</span> f) {
<a name="l00085"></a>00085     <span class="keywordflow">return</span> acos(f);
<a name="l00086"></a>00086 }
<a name="l00087"></a>00087 <span class="preprocessor">#endif</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span><span class="preprocessor">#ifndef MATH_ASIN</span>
<a name="l00089"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a537e9c110e4df16454a0420097837ed2">00089</a> <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a537e9c110e4df16454a0420097837ed2">MATH_ASIN</a>(<span class="keywordtype">float</span> f) {
<a name="l00090"></a>00090     <span class="keywordflow">return</span> asinf(f);
<a name="l00091"></a>00091 }
<a name="l00092"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#aff667390630b57a8a938d3587aa7c6ac">00092</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a537e9c110e4df16454a0420097837ed2">MATH_ASIN</a>(<span class="keywordtype">double</span> f) {
<a name="l00093"></a>00093     <span class="keywordflow">return</span> asin(f);
<a name="l00094"></a>00094 }
<a name="l00095"></a>00095 <span class="preprocessor">#endif</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span><span class="preprocessor">#ifndef MATH_ATAN2</span>
<a name="l00097"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a010a3cbfcb63b09b257881a8b854d9a7">00097</a> <span class="preprocessor"></span><span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a010a3cbfcb63b09b257881a8b854d9a7">MATH_ATAN2</a>(<span class="keywordtype">float</span> fy, <span class="keywordtype">float</span> fx) {
<a name="l00098"></a>00098     <span class="keywordflow">return</span> atan2f(fy,fx);
<a name="l00099"></a>00099 }
<a name="l00100"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a1613b3da4d62ab3bfd8388610a6ea8d6">00100</a> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a010a3cbfcb63b09b257881a8b854d9a7">MATH_ATAN2</a>(<span class="keywordtype">double</span> fy, <span class="keywordtype">double</span> fx) {
<a name="l00101"></a>00101     <span class="keywordflow">return</span> atan2(fy,fx);
<a name="l00102"></a>00102 }
<a name="l00103"></a>00103 <span class="preprocessor">#endif</span>
<a name="l00104"></a>00104 <span class="preprocessor"></span>
<a name="l00110"></a>00110 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00111"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html">00111</a> <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector</a>
<a name="l00112"></a>00112 {
<a name="l00113"></a>00113 <span class="keyword">public</span>:
<a name="l00114"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">00114</a>     T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00115"></a>00115 
<a name="l00116"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a2ab77152178ff02741a6a09591050e04">00116</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a2ab77152178ff02741a6a09591050e04">RaveVector</a>() : <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>(0), <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>(0), <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>(0), <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>(0) {
<a name="l00117"></a>00117     }
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#af4764f7b84d059579c66b49853bef53f">00119</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#af4764f7b84d059579c66b49853bef53f">RaveVector</a>(T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>, T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>, T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>) : x(x), y(y), z(z), <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>(0) {
<a name="l00120"></a>00120     }
<a name="l00121"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a3f5e066616ac370da466e81839526e25">00121</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a3f5e066616ac370da466e81839526e25">RaveVector</a>(T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>, T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>, T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>, T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>) : x(x), y(y), z(z), w(w) {
<a name="l00122"></a>00122     }
<a name="l00123"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a8b7d09d302585f8ba8b4ffc5c2b9f1d0">00123</a>     <span class="keyword">template</span>&lt;<span class="keyword">typename</span> U&gt; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a8b7d09d302585f8ba8b4ffc5c2b9f1d0">RaveVector</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> &amp;vec) : <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>((T)vec.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>), <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>((T)vec.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>), <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>((T)vec.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>), <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>((T)vec.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>) {
<a name="l00124"></a>00124     }
<a name="l00125"></a>00125 
<a name="l00127"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#afd7d78f59fbf96aeeba3ccea06b070f9">00127</a>     <span class="keyword">template</span>&lt;<span class="keyword">typename</span> U&gt; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#afd7d78f59fbf96aeeba3ccea06b070f9" title="note, it only copes 3 values!">RaveVector</a>(<span class="keyword">const</span> U* pf) {
<a name="l00128"></a>00128         <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>(pf != NULL); <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = (T)pf[0]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = (T)pf[1]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = (T)pf[2]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = 0;
<a name="l00129"></a>00129     }
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a8b36789e9ecc47ad57fc55d85015651d">00131</a>     T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a8b36789e9ecc47ad57fc55d85015651d">operator[] </a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{
<a name="l00132"></a>00132         <span class="keywordflow">return</span> (&amp;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>)[i];
<a name="l00133"></a>00133     }
<a name="l00134"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a0534e977fc9fee424b3ef94f27a9ed61">00134</a>     T&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a8b36789e9ecc47ad57fc55d85015651d">operator[] </a>(<span class="keywordtype">int</span> i)             {
<a name="l00135"></a>00135         <span class="keywordflow">return</span> (&amp;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>)[i];
<a name="l00136"></a>00136     }
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <span class="comment">// casting operators</span>
<a name="l00139"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a4e20322854ce5d78776cdaf1a87aacd9">00139</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a4e20322854ce5d78776cdaf1a87aacd9">operator T* </a>() {
<a name="l00140"></a>00140         <span class="keywordflow">return</span> &amp;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l00141"></a>00141     }
<a name="l00142"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#af015545c1c88375a1fff0fd898f0d34e">00142</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#af015545c1c88375a1fff0fd898f0d34e">operator const T* </a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<span class="keyword">const</span> T*)&amp;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00145"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#af254fbe25bdb8ced05ecbce6d49e4cb8">00145</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#af254fbe25bdb8ced05ecbce6d49e4cb8">operator=</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp;r) {
<a name="l00146"></a>00146         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = (T)r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = (T)r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = (T)r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = (T)r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00147"></a>00147     }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <span class="comment">// SCALAR FUNCTIONS</span>
<a name="l00150"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aebd0ceb2abd975ab86e93daa01ab7779">00150</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aebd0ceb2abd975ab86e93daa01ab7779">dot</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> &amp;v)<span class="keyword"> const </span>{
<a name="l00151"></a>00151         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00152"></a>00152     }
<a name="l00153"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">00153</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> &amp;v)<span class="keyword"> const </span>{
<a name="l00154"></a>00154         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00155"></a>00155     }
<a name="l00156"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a7e6f41f7947539719a7721316d50c23f">00156</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a7e6f41f7947539719a7721316d50c23f">normalize</a>() {
<a name="l00157"></a>00157         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a163ea5fde6ad74443036ce3f40056184">normalize4</a>();
<a name="l00158"></a>00158     }
<a name="l00159"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a163ea5fde6ad74443036ce3f40056184">00159</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a163ea5fde6ad74443036ce3f40056184">normalize4</a>() {
<a name="l00160"></a>00160         T f = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00161"></a>00161         <span class="keywordflow">if</span>(( f &lt; T(1)-std::numeric_limits&lt;dReal&gt;::epsilon()) ||( f &gt; T(1)+std::numeric_limits&lt;dReal&gt;::epsilon()) ) {
<a name="l00162"></a>00162             <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( f &gt; 0 );
<a name="l00163"></a>00163             <span class="comment">// yes it is faster to multiply by (1/f), but with 4 divides we gain precision (which is more important in robotics)</span>
<a name="l00164"></a>00164             f = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(f);
<a name="l00165"></a>00165             <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> /= f; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> /= f; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> /= f; w /= f;
<a name="l00166"></a>00166         }
<a name="l00167"></a>00167         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00168"></a>00168     }
<a name="l00169"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab106728f86e55650e15d636d903da9b8">00169</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab106728f86e55650e15d636d903da9b8">normalize3</a>() {
<a name="l00170"></a>00170         T f = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00171"></a>00171         <span class="keywordflow">if</span>(( f &lt; T(1)-std::numeric_limits&lt;dReal&gt;::epsilon()) ||( f &gt; T(1)+std::numeric_limits&lt;dReal&gt;::epsilon()) ) {
<a name="l00172"></a>00172             <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( f &gt; 0 );
<a name="l00173"></a>00173             f = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(f);
<a name="l00174"></a>00174             <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> /= f; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> /= f; z /= f;
<a name="l00175"></a>00175         }
<a name="l00176"></a>00176         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00177"></a>00177     }
<a name="l00178"></a>00178 
<a name="l00179"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ad6daafe577ebd41ed92b3402affdf559">00179</a>     <span class="keyword">inline</span> T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ad6daafe577ebd41ed92b3402affdf559">lengthsqr2</a>()<span class="keyword"> const </span>{
<a name="l00180"></a>00180         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l00181"></a>00181     }
<a name="l00182"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">00182</a>     <span class="keyword">inline</span> T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>()<span class="keyword"> const </span>{
<a name="l00183"></a>00183         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00184"></a>00184     }
<a name="l00185"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a7578aad46d3c7072b89d4ea396898ae1">00185</a>     <span class="keyword">inline</span> T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a7578aad46d3c7072b89d4ea396898ae1">lengthsqr4</a>()<span class="keyword"> const </span>{
<a name="l00186"></a>00186         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188 
<a name="l00189"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a99e130b35f9000513aaa0990118b2283">00189</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a99e130b35f9000513aaa0990118b2283">Set3</a>(<span class="keyword">const</span> T* pvals) {
<a name="l00190"></a>00190         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = pvals[0]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = pvals[1]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = pvals[2];
<a name="l00191"></a>00191     }
<a name="l00192"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9bf0a84068036ee8ed9f6bbf4d93c0a2">00192</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9bf0a84068036ee8ed9f6bbf4d93c0a2">Set3</a>(T val1, T val2, T val3) {
<a name="l00193"></a>00193         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = val1; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = val2; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = val3;
<a name="l00194"></a>00194     }
<a name="l00195"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a8518bceb029f0e4969dec2b8e6489e39">00195</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a8518bceb029f0e4969dec2b8e6489e39">Set4</a>(<span class="keyword">const</span> T* pvals) {
<a name="l00196"></a>00196         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = pvals[0]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = pvals[1]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = pvals[2]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = pvals[3];
<a name="l00197"></a>00197     }
<a name="l00198"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#acb20274ccb6d5d8b3a076316dd1c0ec3">00198</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#acb20274ccb6d5d8b3a076316dd1c0ec3">Set4</a>(T val1, T val2, T val3, T val4) {
<a name="l00199"></a>00199         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = val1; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = val2; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = val3; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = val4;
<a name="l00200"></a>00200     }
<a name="l00202"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aaa077ecf3366c176cf3f108dfe56434b">00202</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aaa077ecf3366c176cf3f108dfe56434b" title="3 dim cross product, w is not touched">cross</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> &amp;v)<span class="keyword"> const </span>{
<a name="l00203"></a>00203         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> ucrossv;
<a name="l00204"></a>00204         ucrossv[0] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * v[2] - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * v[1];
<a name="l00205"></a>00205         ucrossv[1] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * v[0] - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * v[2];
<a name="l00206"></a>00206         ucrossv[2] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * v[1] - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * v[0];
<a name="l00207"></a>00207         <span class="keywordflow">return</span> ucrossv;
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a39a4b55c671ffbfeeef2bf2b8929c1f1">00210</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a39a4b55c671ffbfeeef2bf2b8929c1f1">Cross</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> &amp;v) <a class="code" href="namespaceOpenRAVE.html#af23fc4c2c72950a8c02f38ef71680bc6">RAVE_DEPRECATED</a> {
<a name="l00211"></a>00211         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a39a4b55c671ffbfeeef2bf2b8929c1f1">Cross</a>(*<span class="keyword">this</span>, v); <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00212"></a>00212     }
<a name="l00213"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a2a627e5b622311d9f9aa9d3818874daf">00213</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a39a4b55c671ffbfeeef2bf2b8929c1f1">Cross</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> &amp;u, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> &amp;v) <a class="code" href="namespaceOpenRAVE.html#af23fc4c2c72950a8c02f38ef71680bc6">RAVE_DEPRECATED</a>
<a name="l00214"></a>00214     {
<a name="l00215"></a>00215         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> ucrossv;
<a name="l00216"></a>00216         ucrossv[0] = u[1] * v[2] - u[2] * v[1];
<a name="l00217"></a>00217         ucrossv[1] = u[2] * v[0] - u[0] * v[2];
<a name="l00218"></a>00218         ucrossv[2] = u[0] * v[1] - u[1] * v[0];
<a name="l00219"></a>00219         *<span class="keyword">this</span> = ucrossv;
<a name="l00220"></a>00220         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222 
<a name="l00223"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a549dc79f3273e26edad707f92e02f13e">00223</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a549dc79f3273e26edad707f92e02f13e">operator-</a>()<span class="keyword"> const </span>{
<a name="l00224"></a>00224         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = -<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = -<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = -<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = -<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; <span class="keywordflow">return</span> v;
<a name="l00225"></a>00225     }
<a name="l00226"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#addbb856cd6694f5d2c7e13e9bbf37936">00226</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#addbb856cd6694f5d2c7e13e9bbf37936">operator+</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> &amp;r)<span class="keyword"> const </span>{
<a name="l00227"></a>00227         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>+r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>+r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>+r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>+r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; <span class="keywordflow">return</span> v;
<a name="l00228"></a>00228     }
<a name="l00229"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a3f50282462675c35c19d76652a3c3fad">00229</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a3f50282462675c35c19d76652a3c3fad">operator-</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> &amp;r)<span class="keyword"> const </span>{
<a name="l00230"></a>00230         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>-r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>-r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>-r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>-r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; <span class="keywordflow">return</span> v;
<a name="l00231"></a>00231     }
<a name="l00232"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#abb40b96cec56f5c9742a43c90a9eaff6">00232</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#abb40b96cec56f5c9742a43c90a9eaff6">operator*</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> &amp;r)<span class="keyword"> const </span>{
<a name="l00233"></a>00233         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; <span class="keywordflow">return</span> v;
<a name="l00234"></a>00234     }
<a name="l00235"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a02411d3e963093f0a547b782e6caef4e">00235</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a02411d3e963093f0a547b782e6caef4e">operator*</a>(T k)<span class="keyword"> const </span>{
<a name="l00236"></a>00236         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = k*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = k*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = k*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = k*<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; <span class="keywordflow">return</span> v;
<a name="l00237"></a>00237     }
<a name="l00238"></a>00238 
<a name="l00239"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ae39984f67828b1450b494b9a0deac349">00239</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ae39984f67828b1450b494b9a0deac349">operator += </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp;r) {
<a name="l00240"></a>00240         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> += r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> += r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> += r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> += r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00241"></a>00241     }
<a name="l00242"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#abf9d9e1c6bdf441053451ebf7a98b1c4">00242</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#abf9d9e1c6bdf441053451ebf7a98b1c4">operator -= </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp;r) {
<a name="l00243"></a>00243         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> -= r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> -= r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> -= r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> -= r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00244"></a>00244     }
<a name="l00245"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a385d92133d8ae381b13265501cc26d5b">00245</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a385d92133d8ae381b13265501cc26d5b">operator *= </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp;r) {
<a name="l00246"></a>00246         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> *= r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> *= r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> *= r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> *= r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00247"></a>00247     }
<a name="l00248"></a>00248 
<a name="l00249"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a6314698d2a16114bba0dbc6d3cad311e">00249</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a385d92133d8ae381b13265501cc26d5b">operator *= </a>(<span class="keyword">const</span> T k) {
<a name="l00250"></a>00250         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> *= k; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> *= k; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> *= k; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> *= k; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00251"></a>00251     }
<a name="l00252"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aefafa1fa867453597c7795ec327167be">00252</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aefafa1fa867453597c7795ec327167be">operator /= </a>(<span class="keyword">const</span> T _k) {
<a name="l00253"></a>00253         T k=1/_k; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> *= k; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> *= k; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> *= k; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> *= k; <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">friend</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#abb40b96cec56f5c9742a43c90a9eaff6">operator* </a>(<span class="keywordtype">float</span> f, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp;v);
<a name="l00257"></a>00257     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">friend</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#abb40b96cec56f5c9742a43c90a9eaff6">operator* </a>(<span class="keywordtype">double</span> f, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp;v);
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">friend</span> std::ostream&amp; operator&lt;&lt;(std::ostream&amp; O, const RaveVector&lt;U&gt;&amp;v);
<a name="l00260"></a>00260     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">friend</span> std::istream&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a3c16d74f83023fec69d8d2ffcdc35d65">operator&gt;&gt;</a>(std::istream&amp; I, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp;v);
<a name="l00261"></a>00261 
<a name="l00263"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ad293e3fe3c67f1817ae79697cf4851fc">00263</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ad293e3fe3c67f1817ae79697cf4851fc" title="cross product operator">operator^</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> &amp;v)<span class="keyword"> const </span>{
<a name="l00264"></a>00264         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> ucrossv;
<a name="l00265"></a>00265         ucrossv[0] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * v[2] - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * v[1];
<a name="l00266"></a>00266         ucrossv[1] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * v[0] - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * v[2];
<a name="l00267"></a>00267         ucrossv[2] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * v[1] - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * v[0];
<a name="l00268"></a>00268         <span class="keywordflow">return</span> ucrossv;
<a name="l00269"></a>00269     }
<a name="l00270"></a>00270 };
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00273"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#ab1d15f654176037877fe49f856d97aa8">00273</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ab1d15f654176037877fe49f856d97aa8">operator* </a>(<span class="keywordtype">float</span> f, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;left)
<a name="l00274"></a>00274 {
<a name="l00275"></a>00275     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v;
<a name="l00276"></a>00276     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = (T)f * left.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l00277"></a>00277     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = (T)f * left.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l00278"></a>00278     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = (T)f * left.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00279"></a>00279     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = (T)f * left.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00280"></a>00280     <span class="keywordflow">return</span> v;
<a name="l00281"></a>00281 }
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00284"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#af31de2189b0cd52cb6e684977b70e5bc">00284</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ab1d15f654176037877fe49f856d97aa8">operator* </a>(<span class="keywordtype">double</span> f, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;left)
<a name="l00285"></a>00285 {
<a name="l00286"></a>00286     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v;
<a name="l00287"></a>00287     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = (T)f * left.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l00288"></a>00288     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = (T)f * left.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l00289"></a>00289     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = (T)f * left.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00290"></a>00290     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = (T)f * left.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00291"></a>00291     <span class="keywordflow">return</span> v;
<a name="l00292"></a>00292 }
<a name="l00293"></a>00293 
<a name="l00298"></a>00298 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00299"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html">00299</a> <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform</a>
<a name="l00300"></a>00300 {
<a name="l00301"></a>00301 <span class="keyword">public</span>:
<a name="l00302"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a838882cb801deca4fbc1bd69134b5936">00302</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a838882cb801deca4fbc1bd69134b5936">RaveTransform</a>() {
<a name="l00303"></a>00303         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x = 1;
<a name="l00304"></a>00304     }
<a name="l00305"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a091d7057150f3ddf0fa0bbea4f465464">00305</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a091d7057150f3ddf0fa0bbea4f465464">RaveTransform</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;U&gt;</a>&amp; t) {
<a name="l00306"></a>00306         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>;
<a name="l00307"></a>00307         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>;
<a name="l00308"></a>00308         T fnorm = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.lengthsqr4();
<a name="l00309"></a>00309         <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( fnorm &gt; 0.99f &amp;&amp; fnorm &lt; 1.01f );
<a name="l00310"></a>00310     }
<a name="l00311"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a2a6551a73d7d787d0bbfa526a936314d">00311</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a2a6551a73d7d787d0bbfa526a936314d">RaveTransform</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>) : rot(rot), trans(trans) {
<a name="l00312"></a>00312         T fnorm = rot.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a7578aad46d3c7072b89d4ea396898ae1">lengthsqr4</a>();
<a name="l00313"></a>00313         <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( fnorm &gt; 0.99f &amp;&amp; fnorm &lt; 1.01f );
<a name="l00314"></a>00314     }
<a name="l00315"></a>00315     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a838882cb801deca4fbc1bd69134b5936">RaveTransform</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp;t);
<a name="l00316"></a>00316 
<a name="l00317"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#ac1b6fba75206cba9fb2cfc71ed0a7052">00317</a>     <span class="keywordtype">void</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#ac1b6fba75206cba9fb2cfc71ed0a7052">identity</a>() {
<a name="l00318"></a>00318         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x = 1; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w = 0;
<a name="l00319"></a>00319         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>.x = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>.y = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>.z = 0;
<a name="l00320"></a>00320     }
<a name="l00321"></a>00321 
<a name="l00323"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a9fd0b1d5190b14e4c8a354b875103bfd">00323</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a9fd0b1d5190b14e4c8a354b875103bfd" title="transform a 3 dim vector">operator* </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;r)<span class="keyword"> const </span>{
<a name="l00324"></a>00324         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a> + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a1a50fdbaa13ce6896da2e56679edf765" title="transform a vector by the rotation component only">rotate</a>(r);
<a name="l00325"></a>00325     }
<a name="l00326"></a>00326 
<a name="l00328"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a1a50fdbaa13ce6896da2e56679edf765">00328</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a1a50fdbaa13ce6896da2e56679edf765" title="transform a vector by the rotation component only">rotate</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; r)<span class="keyword"> const </span>{
<a name="l00329"></a>00329         T xx = 2 * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y;
<a name="l00330"></a>00330         T xy = 2 * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z;
<a name="l00331"></a>00331         T xz = 2 * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w;
<a name="l00332"></a>00332         T xw = 2 * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x;
<a name="l00333"></a>00333         T yy = 2 * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z;
<a name="l00334"></a>00334         T yz = 2 * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w;
<a name="l00335"></a>00335         T yw = 2 * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x;
<a name="l00336"></a>00336         T zz = 2 * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w;
<a name="l00337"></a>00337         T zw = 2 * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x;
<a name="l00338"></a>00338 
<a name="l00339"></a>00339         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v;
<a name="l00340"></a>00340         v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = (1-yy-zz) * r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + (xy-zw) * r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + (xz+yw)*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00341"></a>00341         v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = (xy+zw) * r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + (1-xx-zz) * r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + (yz-xw)*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00342"></a>00342         v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = (xz-yw) * r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + (yz+xw) * r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + (1-xx-yy)*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00343"></a>00343         <span class="keywordflow">return</span> v;
<a name="l00344"></a>00344     }
<a name="l00345"></a>00345 
<a name="l00347"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#ab62dd1c9c7281ec7662ae671341d0241">00347</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#ab62dd1c9c7281ec7662ae671341d0241" title="transform a transform by the rotation component only">rotate</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a>&amp; r)<span class="keyword"> const </span>{
<a name="l00348"></a>00348         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a> t;
<a name="l00349"></a>00349         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a1a50fdbaa13ce6896da2e56679edf765" title="transform a vector by the rotation component only">rotate</a>(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>);
<a name="l00350"></a>00350         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w;
<a name="l00351"></a>00351         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z;
<a name="l00352"></a>00352         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w;
<a name="l00353"></a>00353         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y;
<a name="l00354"></a>00354         <span class="comment">// normalize the transformation</span>
<a name="l00355"></a>00355         T fnorm = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.lengthsqr4();
<a name="l00356"></a>00356         <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( fnorm &gt; 0.99f &amp;&amp; fnorm &lt; 1.01f );
<a name="l00357"></a>00357         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.normalize4();
<a name="l00358"></a>00358         <span class="keywordflow">return</span> t;
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360 
<a name="l00362"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#abc0c6acd93346ae4a8009931a8c69d26">00362</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a9fd0b1d5190b14e4c8a354b875103bfd" title="transform a 3 dim vector">operator* </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a>&amp;r)<span class="keyword"> const </span>{
<a name="l00363"></a>00363         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a> t;
<a name="l00364"></a>00364         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a9fd0b1d5190b14e4c8a354b875103bfd" title="transform a 3 dim vector">operator*</a>(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>);
<a name="l00365"></a>00365         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w;
<a name="l00366"></a>00366         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z;
<a name="l00367"></a>00367         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w;
<a name="l00368"></a>00368         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y;
<a name="l00369"></a>00369         <span class="comment">// normalize the transformation</span>
<a name="l00370"></a>00370         T fnorm = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.lengthsqr4();
<a name="l00371"></a>00371         <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( fnorm &gt; 0.99f &amp;&amp; fnorm &lt; 1.01f );
<a name="l00372"></a>00372         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.normalize4();
<a name="l00373"></a>00373         <span class="keywordflow">return</span> t;
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375 
<a name="l00376"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#ad0eec2676278f4bf0398a2f886509280">00376</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#ad0eec2676278f4bf0398a2f886509280">operator*= </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a>&amp;right) {
<a name="l00377"></a>00377         *<span class="keyword">this</span> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a9fd0b1d5190b14e4c8a354b875103bfd" title="transform a 3 dim vector">operator*</a>(right);
<a name="l00378"></a>00378         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00379"></a>00379     }
<a name="l00380"></a>00380 
<a name="l00381"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a6a01b5e75a546bb016ea4e0d954ab598">00381</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a6a01b5e75a546bb016ea4e0d954ab598">inverse</a>()<span class="keyword"> const </span>{
<a name="l00382"></a>00382         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a> inv;
<a name="l00383"></a>00383         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x;
<a name="l00384"></a>00384         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y = -<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y;
<a name="l00385"></a>00385         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z = -<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z;
<a name="l00386"></a>00386         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w = -<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w;
<a name="l00387"></a>00387 
<a name="l00388"></a>00388         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a> = -inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a1a50fdbaa13ce6896da2e56679edf765" title="transform a vector by the rotation component only">rotate</a>(<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>);
<a name="l00389"></a>00389         <span class="keywordflow">return</span> inv;
<a name="l00390"></a>00390     }
<a name="l00391"></a>00391 
<a name="l00392"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a5d7787775ea54d23c4c9a01fddbef5ce">00392</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a5d7787775ea54d23c4c9a01fddbef5ce">operator= </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;U&gt;</a>&amp;r) {
<a name="l00393"></a>00393         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>;
<a name="l00394"></a>00394         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>;
<a name="l00395"></a>00395         T fnorm = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.lengthsqr4();
<a name="l00396"></a>00396         <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( fnorm &gt; 0.99f &amp;&amp; fnorm &lt; 1.01f );
<a name="l00397"></a>00397         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">friend</span> std::ostream&amp; operator&lt;&lt;(std::ostream&amp; O, const RaveTransform&lt;U&gt;&amp;v);
<a name="l00401"></a>00401     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">friend</span> std::istream&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a0819bc421f3385a774228c2b56e7d9ca">operator&gt;&gt;</a>(std::istream&amp; I, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;U&gt;</a>&amp;v);
<a name="l00402"></a>00402 
<a name="l00403"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6">00403</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>;     
<a name="l00404"></a>00404 };
<a name="l00405"></a>00405 
<a name="l00410"></a>00410 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00411"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html">00411</a> <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix</a>
<a name="l00412"></a>00412 {
<a name="l00413"></a>00413 <span class="keyword">public</span>:
<a name="l00414"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a1376d9196d5c75f5d5ae29faaf430649">00414</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a1376d9196d5c75f5d5ae29faaf430649">RaveTransformMatrix</a>() {
<a name="l00415"></a>00415         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#ac1b6fba75206cba9fb2cfc71ed0a7052">identity</a>(); <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[3] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[7] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[11] = 0;
<a name="l00416"></a>00416     }
<a name="l00417"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a9e82778a1835322d652a0d1fdf35cf8f">00417</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a9e82778a1835322d652a0d1fdf35cf8f">RaveTransformMatrix</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;U&gt;</a>&amp; t) {
<a name="l00418"></a>00418         <span class="comment">// don&#39;t memcpy!</span>
<a name="l00419"></a>00419         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[3] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[3];
<a name="l00420"></a>00420         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[7] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[7];
<a name="l00421"></a>00421         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10]; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[11] = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[11];
<a name="l00422"></a>00422         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>;
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a1376d9196d5c75f5d5ae29faaf430649">RaveTransformMatrix</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a>&amp;t);
<a name="l00425"></a>00425 
<a name="l00426"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#ac1b6fba75206cba9fb2cfc71ed0a7052">00426</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#ac1b6fba75206cba9fb2cfc71ed0a7052">identity</a>() {
<a name="l00427"></a>00427         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0] = 1; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1] = 0; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2] = 0;
<a name="l00428"></a>00428         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4] = 0; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5] = 1; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6] = 0;
<a name="l00429"></a>00429         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8] = 0; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9] = 0; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10] = 1;
<a name="l00430"></a>00430         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.x = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.y = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.z = 0;
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432 
<a name="l00433"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a5b037a32542f5ec65e76b153fc2e646a">00433</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a5b037a32542f5ec65e76b153fc2e646a">rotfrommat</a>(T m_00, T m_01, T m_02, T m_10, T m_11, T m_12, T m_20, T m_21, T m_22) {
<a name="l00434"></a>00434         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0] = m_00; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1] = m_01; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2] = m_02; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[3] = 0;
<a name="l00435"></a>00435         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4] = m_10; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5] = m_11; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6] = m_12; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[7] = 0;
<a name="l00436"></a>00436         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8] = m_20; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9] = m_21; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10] = m_22; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[11] = 0;
<a name="l00437"></a>00437     }
<a name="l00438"></a>00438 
<a name="l00439"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#abc6b9244ba87478309d0e4ba10c324fa">00439</a>     <span class="keyword">inline</span> T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#abc6b9244ba87478309d0e4ba10c324fa">rot</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)<span class="keyword"> const </span>{
<a name="l00440"></a>00440         <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( i &gt;= 0 &amp;&amp; j &gt;= 0 &amp;&amp; i &lt; 3 &amp;&amp; j &lt; 3);
<a name="l00441"></a>00441         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*i+j];
<a name="l00442"></a>00442     }
<a name="l00443"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a2bd43adf665b632eacb75b618a70a3b3">00443</a>     <span class="keyword">inline</span> T&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a2bd43adf665b632eacb75b618a70a3b3">rot</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j) {
<a name="l00444"></a>00444         <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( i &gt;= 0 &amp;&amp; j &gt;= 0 &amp;&amp; i &lt; 3 &amp;&amp; j &lt; 3);
<a name="l00445"></a>00445         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*i+j];
<a name="l00446"></a>00446     }
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00449"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#abb40b96cec56f5c9742a43c90a9eaff6">00449</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#abb40b96cec56f5c9742a43c90a9eaff6">operator* </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp;r)<span class="keyword"> const </span>{
<a name="l00450"></a>00450         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v;
<a name="l00451"></a>00451         v[0] = r[0] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0] + r[1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1] + r[2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2] + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.x;
<a name="l00452"></a>00452         v[1] = r[0] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4] + r[1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5] + r[2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6] + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.y;
<a name="l00453"></a>00453         v[2] = r[0] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8] + r[1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9] + r[2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10] + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.z;
<a name="l00454"></a>00454         <span class="keywordflow">return</span> v;
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456 
<a name="l00458"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#adeb4f0cf3457e5c58aa980091e9c83c5">00458</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#abb40b96cec56f5c9742a43c90a9eaff6">operator* </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp;r)<span class="keyword"> const </span>{
<a name="l00459"></a>00459         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> t;
<a name="l00460"></a>00460         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0];
<a name="l00461"></a>00461         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1];
<a name="l00462"></a>00462         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2];
<a name="l00463"></a>00463         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0];
<a name="l00464"></a>00464         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1];
<a name="l00465"></a>00465         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2];
<a name="l00466"></a>00466         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0];
<a name="l00467"></a>00467         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1];
<a name="l00468"></a>00468         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2];
<a name="l00469"></a>00469         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[0] = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[0] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2] + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.x;
<a name="l00470"></a>00470         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[1] = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[0] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6] + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.y;
<a name="l00471"></a>00471         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[2] = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[0] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10] + <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.z;
<a name="l00472"></a>00472         <span class="keywordflow">return</span> t;
<a name="l00473"></a>00473     }
<a name="l00474"></a>00474 
<a name="l00475"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a9c74821df7e9e3ea28d166336a5d0f98">00475</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a9c74821df7e9e3ea28d166336a5d0f98">operator*= </a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp;r)<span class="keyword"> const </span>{
<a name="l00476"></a>00476         *<span class="keyword">this</span> = *<span class="keyword">this</span> * r;
<a name="l00477"></a>00477         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00478"></a>00478     }
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00481"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acdc1c724a7b4327a4dda60aebbf1081d">00481</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acdc1c724a7b4327a4dda60aebbf1081d">rotate</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp; r)<span class="keyword"> const </span>{
<a name="l00482"></a>00482         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a> v;
<a name="l00483"></a>00483         v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2];
<a name="l00484"></a>00484         v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6];
<a name="l00485"></a>00485         v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10];
<a name="l00486"></a>00486         <span class="keywordflow">return</span> v;
<a name="l00487"></a>00487     }
<a name="l00488"></a>00488 
<a name="l00489"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a1c98b906517367c3eb964b6fa085d58f">00489</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a1c98b906517367c3eb964b6fa085d58f">rotate</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp; r)<span class="keyword"> const </span>{
<a name="l00490"></a>00490         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> t;
<a name="l00491"></a>00491         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0];
<a name="l00492"></a>00492         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1];
<a name="l00493"></a>00493         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2];
<a name="l00494"></a>00494         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0];
<a name="l00495"></a>00495         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1];
<a name="l00496"></a>00496         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2];
<a name="l00497"></a>00497         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0];
<a name="l00498"></a>00498         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1];
<a name="l00499"></a>00499         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2]+<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2]*r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2];
<a name="l00500"></a>00500         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[0] = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[0] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2];
<a name="l00501"></a>00501         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[1] = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[0] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6];
<a name="l00502"></a>00502         t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[2] = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[0] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9] + r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>[2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10];
<a name="l00503"></a>00503         <span class="keywordflow">return</span> t;
<a name="l00504"></a>00504     }
<a name="l00505"></a>00505 
<a name="l00507"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a5452318a7e4027a0907e7492ce8389f6">00507</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a5452318a7e4027a0907e7492ce8389f6" title="being on the safe side, do the full inverse incase someone uses scaling.">inverse</a>()<span class="keyword"> const </span>{
<a name="l00508"></a>00508         <span class="comment">// inverse = C^t / det(pf) where C is the matrix of coefficients</span>
<a name="l00509"></a>00509         <span class="comment">// calc C^t</span>
<a name="l00510"></a>00510         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> inv;
<a name="l00511"></a>00511         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0] = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4 + 1] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4 + 2] - <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4 + 2] * <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4 + 1];
<a name="l00512"></a>00512         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1] = m[0*4 + 2] * m[2*4 + 1] - m[0*4 + 1] * m[2*4 + 2];
<a name="l00513"></a>00513         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2] = m[0*4 + 1] * m[1*4 + 2] - m[0*4 + 2] * m[1*4 + 1];
<a name="l00514"></a>00514         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0] = m[1*4 + 2] * m[2*4 + 0] - m[1*4 + 0] * m[2*4 + 2];
<a name="l00515"></a>00515         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1] = m[0*4 + 0] * m[2*4 + 2] - m[0*4 + 2] * m[2*4 + 0];
<a name="l00516"></a>00516         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2] = m[0*4 + 2] * m[1*4 + 0] - m[0*4 + 0] * m[1*4 + 2];
<a name="l00517"></a>00517         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0] = m[1*4 + 0] * m[2*4 + 1] - m[1*4 + 1] * m[2*4 + 0];
<a name="l00518"></a>00518         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1] = m[0*4 + 1] * m[2*4 + 0] - m[0*4 + 0] * m[2*4 + 1];
<a name="l00519"></a>00519         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2] = m[0*4 + 0] * m[1*4 + 1] - m[0*4 + 1] * m[1*4 + 0];
<a name="l00520"></a>00520         T fdet = m[0*4 + 2] * inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0] + m[1*4 + 2] * inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1] + m[2*4 + 2] * inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2];
<a name="l00521"></a>00521         <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>(fdet&gt;=0);
<a name="l00522"></a>00522         fdet = 1 / fdet;
<a name="l00523"></a>00523         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+0] *= fdet;           inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+1] *= fdet;           inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0*4+2] *= fdet;
<a name="l00524"></a>00524         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+0] *= fdet;           inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+1] *= fdet;           inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1*4+2] *= fdet;
<a name="l00525"></a>00525         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+0] *= fdet;           inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+1] *= fdet;           inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2*4+2] *= fdet;
<a name="l00526"></a>00526         inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a> = -inv.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acdc1c724a7b4327a4dda60aebbf1081d">rotate</a>(<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>);
<a name="l00527"></a>00527         <span class="keywordflow">return</span> inv;
<a name="l00528"></a>00528     }
<a name="l00529"></a>00529 
<a name="l00530"></a>00530     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00531"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#ac4a42f28e3fa2f70efd4979ba7a72fba">00531</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#ac4a42f28e3fa2f70efd4979ba7a72fba">Extract</a>(<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp; right, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp; up, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp; dir, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp; pos)<span class="keyword"> const </span>{
<a name="l00532"></a>00532         pos = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>;
<a name="l00533"></a>00533         right.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0]; up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1]; dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2];
<a name="l00534"></a>00534         right.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4]; up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5]; dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6];
<a name="l00535"></a>00535         right.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8]; up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9]; dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10];
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537 
<a name="l00538"></a>00538     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">friend</span> std::ostream&amp; operator&lt;&lt;(std::ostream&amp; O, const RaveTransformMatrix&lt;U&gt;&amp;v);
<a name="l00539"></a>00539     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt; <span class="keyword">friend</span> std::istream&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a07486f83f8fcc37b79f62b689a6dba1b" title="de-serialize in column order! This is the format transformations are passed across...">operator&gt;&gt;</a>(std::istream&amp; I, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;U&gt;</a>&amp;v);
<a name="l00540"></a>00540 
<a name="l00543"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">00543</a>     T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[12];
<a name="l00544"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6">00544</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>;     
<a name="l00545"></a>00545 };
<a name="l00546"></a>00546 
<a name="l00549"></a>00549 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00550"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html">00550</a> <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html" title="A ray defined by an origin and a direction.">ray</a>
<a name="l00551"></a>00551 {
<a name="l00552"></a>00552 <span class="keyword">public</span>:
<a name="l00553"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ae1c86c368344f51e1ab206130f881ae5">00553</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ae1c86c368344f51e1ab206130f881ae5">ray</a>() {
<a name="l00554"></a>00554     }
<a name="l00555"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab9015da61c418dbafedda805978ef400">00555</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab9015da61c418dbafedda805978ef400">ray</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;_pos, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;_dir) : <a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>(_pos), <a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>(_dir) {
<a name="l00556"></a>00556     }
<a name="l00557"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab7f63b564ef04ccd22dfa2899cdd2b10">00557</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>;
<a name="l00558"></a>00558 };
<a name="l00559"></a>00559 
<a name="l00562"></a>00562 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00563"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html">00563</a> <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html" title="An axis aligned bounding box.">aabb</a>
<a name="l00564"></a>00564 {
<a name="l00565"></a>00565 <span class="keyword">public</span>:
<a name="l00566"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#acc5258cbcb272508ed7dc681bf566ff7">00566</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#acc5258cbcb272508ed7dc681bf566ff7">aabb</a>() {
<a name="l00567"></a>00567     }
<a name="l00568"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#ae07a514f76b0db150255a021f02358b8">00568</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#ae07a514f76b0db150255a021f02358b8">aabb</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;vpos, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;vextents) : <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>(vpos), <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>(vextents) {
<a name="l00569"></a>00569     }
<a name="l00570"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">00570</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>;
<a name="l00571"></a>00571 };
<a name="l00572"></a>00572 
<a name="l00575"></a>00575 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00576"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html">00576</a> <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb</a>
<a name="l00577"></a>00577 {
<a name="l00578"></a>00578 <span class="keyword">public</span>:
<a name="l00579"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">00579</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>;
<a name="l00580"></a>00580 };
<a name="l00581"></a>00581 
<a name="l00584"></a>00584 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00585"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html">00585</a> <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html" title="A triangle defined by 3 points.">triangle</a>
<a name="l00586"></a>00586 {
<a name="l00587"></a>00587 <span class="keyword">public</span>:
<a name="l00588"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#aee18579fe54e859a60b719481c024adb">00588</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#aee18579fe54e859a60b719481c024adb">triangle</a>() {
<a name="l00589"></a>00589     }
<a name="l00590"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#adf00c6c105d01ef6f8233d0338d0a8ec">00590</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#adf00c6c105d01ef6f8233d0338d0a8ec">triangle</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;<a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a999427d22750bdb0167657cfb1717899">v1</a>, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;<a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a9cf626ef7e79aa0246e7aef2999fcc33">v2</a>, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp;<a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#ac7fe127146278408bbe3b94d37d6e076" title="the vertices of the triangle">v3</a>) : v1(v1), v2(v2), v3(v3) {
<a name="l00591"></a>00591     }
<a name="l00592"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#ae8b102b9ae19210a76226af078908b9f">00592</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#ae8b102b9ae19210a76226af078908b9f">~triangle</a>() {
<a name="l00593"></a>00593     }
<a name="l00594"></a>00594 
<a name="l00595"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#ac7fe127146278408bbe3b94d37d6e076">00595</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a999427d22750bdb0167657cfb1717899">v1</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a9cf626ef7e79aa0246e7aef2999fcc33">v2</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#ac7fe127146278408bbe3b94d37d6e076" title="the vertices of the triangle">v3</a>;          
<a name="l00596"></a>00596 
<a name="l00597"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a5775a6d3e2eff07da614dce1d8431213">00597</a>     <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a5775a6d3e2eff07da614dce1d8431213">operator[] </a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{
<a name="l00598"></a>00598         <span class="keywordflow">return</span> (&amp;<a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a999427d22750bdb0167657cfb1717899">v1</a>)[i];
<a name="l00599"></a>00599     }
<a name="l00600"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a50e9d74512ba451686342d92374bca18">00600</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a5775a6d3e2eff07da614dce1d8431213">operator[] </a>(<span class="keywordtype">int</span> i)       {
<a name="l00601"></a>00601         <span class="keywordflow">return</span> (&amp;<a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a999427d22750bdb0167657cfb1717899">v1</a>)[i];
<a name="l00602"></a>00602     }
<a name="l00603"></a>00603 
<a name="l00605"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#af4d87900d43b4538e692a34a4ebb5964">00605</a>     <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#af4d87900d43b4538e692a34a4ebb5964" title="assumes CCW ordering of vertices">normal</a>() {
<a name="l00606"></a>00606         <span class="keywordflow">return</span> (<a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a9cf626ef7e79aa0246e7aef2999fcc33">v2</a>-<a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a999427d22750bdb0167657cfb1717899">v1</a>).cross(<a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#ac7fe127146278408bbe3b94d37d6e076" title="the vertices of the triangle">v3</a>-<a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html#a999427d22750bdb0167657cfb1717899">v1</a>);
<a name="l00607"></a>00607     }
<a name="l00608"></a>00608 };
<a name="l00609"></a>00609 
<a name="l00612"></a>00612 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00613"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html">00613</a> <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html" title="A pyramid with its vertex clipped.">frustum</a>
<a name="l00614"></a>00614 {
<a name="l00615"></a>00615 <span class="keyword">public</span>:
<a name="l00616"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a0a2211068fc366a7a037b35f81d6ebcf">00616</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a03eaac86e9a1081f590fefde96d049d8">right</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a358d165f685f7746473d110c6cfe7198">dir</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>;
<a name="l00617"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#ad511bbc6825e34fd66f43e620fd5de59">00617</a>     T <a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#ad511bbc6825e34fd66f43e620fd5de59">fnear</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a6907422b3462622d8e76bdad88e2535b">ffar</a>;
<a name="l00618"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#ac1784dfd0255681de0e4680860fef216">00618</a>     T <a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a9fbdd20c524b8f343eef7d93749613d5">ffovx</a>,<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#ac1784dfd0255681de0e4680860fef216">ffovy</a>;
<a name="l00619"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a0fedb83d9a1f775ab738dc8c5c938540">00619</a>     T <a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a383150aa997b64c06bd8a483342af2d2">fcosfovx</a>,<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a8fe3f22ca5538dc41a0bfbb853f1140d">fsinfovx</a>,<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a1c5077019a5b3c29e95c1ee3a8f1b4e4">fcosfovy</a>,<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a0fedb83d9a1f775ab738dc8c5c938540">fsinfovy</a>;
<a name="l00620"></a>00620 };
<a name="l00621"></a>00621 
<a name="l00623"></a>00623 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00624"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html">00624</a> <span class="keyword">class </span><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html" title="intrinsic parameters for a camera.">RaveCameraIntrinsics</a>
<a name="l00625"></a>00625 {
<a name="l00626"></a>00626 <span class="keyword">public</span>:
<a name="l00627"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a3479901190539d1184bfeba73a442b78">00627</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a3479901190539d1184bfeba73a442b78">RaveCameraIntrinsics</a>() : <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a079621bb5829e1e1ef5f4a769e46da9a">fx</a>(0),<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#abc48edd39c432bf1b9d9283113a17ca2">fy</a>(0),<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a448b21c0c0eb4e57836d0decaf2ba9fd">cx</a>(0),<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#ab633701b507c20b60f917fe53fd5892f">cy</a>(0), <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a93fa88200ad87160883fd23fd0663e49" title="physical focal length distance since focal length cannot be recovered from the intrinsic...">focal_length</a>(0.01) {
<a name="l00628"></a>00628     }
<a name="l00629"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a094bfc2026d21874ffd5971996a4e1e2">00629</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a094bfc2026d21874ffd5971996a4e1e2">RaveCameraIntrinsics</a>(T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a079621bb5829e1e1ef5f4a769e46da9a">fx</a>, T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#abc48edd39c432bf1b9d9283113a17ca2">fy</a>, T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a448b21c0c0eb4e57836d0decaf2ba9fd">cx</a>, T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#ab633701b507c20b60f917fe53fd5892f">cy</a>) : fx(fx), fy(fy), cx(cx), cy(cy), <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a93fa88200ad87160883fd23fd0663e49" title="physical focal length distance since focal length cannot be recovered from the intrinsic...">focal_length</a>(0.01) {
<a name="l00630"></a>00630     }
<a name="l00631"></a>00631 
<a name="l00632"></a>00632     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00633"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#acf1dbe1e85714ecde15bad36f1d2d4b6">00633</a>     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html" title="intrinsic parameters for a camera.">RaveCameraIntrinsics&lt;T&gt;</a>&amp; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#acf1dbe1e85714ecde15bad36f1d2d4b6">operator=</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html" title="intrinsic parameters for a camera.">RaveCameraIntrinsics&lt;U&gt;</a>&amp;r)
<a name="l00634"></a>00634     {
<a name="l00635"></a>00635         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#ac689303f406328d3c603051e11b482bf" title="distortion model of the camera. if left empty, no distortion model is used.">distortion_model</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#ac689303f406328d3c603051e11b482bf" title="distortion model of the camera. if left empty, no distortion model is used.">distortion_model</a>;
<a name="l00636"></a>00636         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a74815f0494513cfbdb460a0d7365fed0" title="coefficients of the distortion model">distortion_coeffs</a>.resize(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a74815f0494513cfbdb460a0d7365fed0" title="coefficients of the distortion model">distortion_coeffs</a>.size());
<a name="l00637"></a>00637         std::copy(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a74815f0494513cfbdb460a0d7365fed0" title="coefficients of the distortion model">distortion_coeffs</a>.begin(),r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a74815f0494513cfbdb460a0d7365fed0" title="coefficients of the distortion model">distortion_coeffs</a>.end(),<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a74815f0494513cfbdb460a0d7365fed0" title="coefficients of the distortion model">distortion_coeffs</a>.begin());
<a name="l00638"></a>00638         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a93fa88200ad87160883fd23fd0663e49" title="physical focal length distance since focal length cannot be recovered from the intrinsic...">focal_length</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a93fa88200ad87160883fd23fd0663e49" title="physical focal length distance since focal length cannot be recovered from the intrinsic...">focal_length</a>;
<a name="l00639"></a>00639         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a079621bb5829e1e1ef5f4a769e46da9a">fx</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a079621bb5829e1e1ef5f4a769e46da9a">fx</a>;
<a name="l00640"></a>00640         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#abc48edd39c432bf1b9d9283113a17ca2">fy</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#abc48edd39c432bf1b9d9283113a17ca2">fy</a>;
<a name="l00641"></a>00641         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a448b21c0c0eb4e57836d0decaf2ba9fd">cx</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a448b21c0c0eb4e57836d0decaf2ba9fd">cx</a>;
<a name="l00642"></a>00642         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#ab633701b507c20b60f917fe53fd5892f">cy</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#ab633701b507c20b60f917fe53fd5892f">cy</a>;
<a name="l00643"></a>00643     }
<a name="l00644"></a>00644 
<a name="l00645"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#abc48edd39c432bf1b9d9283113a17ca2">00645</a>     T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a079621bb5829e1e1ef5f4a769e46da9a">fx</a>,<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#abc48edd39c432bf1b9d9283113a17ca2">fy</a>, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a448b21c0c0eb4e57836d0decaf2ba9fd">cx</a>,<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#ab633701b507c20b60f917fe53fd5892f">cy</a>;
<a name="l00646"></a>00646 
<a name="l00652"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#ac689303f406328d3c603051e11b482bf">00652</a>     std::string <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#ac689303f406328d3c603051e11b482bf" title="distortion model of the camera. if left empty, no distortion model is used.">distortion_model</a>;
<a name="l00653"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a74815f0494513cfbdb460a0d7365fed0">00653</a>     std::vector&lt;T&gt; <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a74815f0494513cfbdb460a0d7365fed0" title="coefficients of the distortion model">distortion_coeffs</a>;     
<a name="l00654"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a93fa88200ad87160883fd23fd0663e49">00654</a>     T <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveCameraIntrinsics.html#a93fa88200ad87160883fd23fd0663e49" title="physical focal length distance since focal length cannot be recovered from the intrinsic...">focal_length</a>;     
<a name="l00655"></a>00655 };
<a name="l00656"></a>00656 
<a name="l00660"></a>00660 
<a name="l00661"></a>00661 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00662"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#aae7311f073989970a1ab1d34fa8b946c">00662</a> std::ostream&amp; operator&lt;&lt;(std::ostream&amp; O, const RaveVector&lt;U&gt;&amp;v)
<a name="l00663"></a>00663 {
<a name="l00664"></a>00664     <span class="keywordflow">return</span> O &lt;&lt; v.x &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.y &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.z &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.w &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00665"></a>00665 }
<a name="l00666"></a>00666 
<a name="l00667"></a>00667 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00668"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#aa2e16d81c858602abbc4a828510d6ab4">00668</a> std::istream&amp; <a class="code" href="namespaceOpenRAVE_1_1geometry.html#aa2e16d81c858602abbc4a828510d6ab4">operator&gt;&gt;</a>(std::istream&amp; I, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;U&gt;</a>&amp;v)
<a name="l00669"></a>00669 {
<a name="l00670"></a>00670     <span class="keywordflow">return</span> I &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00671"></a>00671 }
<a name="l00672"></a>00672 
<a name="l00673"></a>00673 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00674"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#ab90ce8155aaf777b0fdf95736fcc7be7">00674</a> std::ostream&amp; operator&lt;&lt;(std::ostream&amp; O, const RaveTransform&lt;U&gt;&amp;v)
<a name="l00675"></a>00675 {
<a name="l00676"></a>00676     <span class="keywordflow">return</span> O &lt;&lt; v.rot.x &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.rot.y &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.rot.z &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.rot.w &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.trans.x &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.trans.y &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.trans.z &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00677"></a>00677 }
<a name="l00678"></a>00678 
<a name="l00679"></a>00679 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00680"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a0f7c3ef1ef9d18db3c693dc1cf483dcc">00680</a> std::istream&amp; <a class="code" href="namespaceOpenRAVE_1_1geometry.html#aa2e16d81c858602abbc4a828510d6ab4">operator&gt;&gt;</a>(std::istream&amp; I, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;U&gt;</a>&amp;v)
<a name="l00681"></a>00681 {
<a name="l00682"></a>00682     <span class="keywordflow">return</span> I &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.x &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.y &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.z &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>.w &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>.x &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>.y &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>.z;
<a name="l00683"></a>00683 }
<a name="l00684"></a>00684 
<a name="l00685"></a>00685 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00686"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a6ff518fbec39bea10fbe04d53590d7f0">00686</a> std::ostream&amp; operator&lt;&lt;(std::ostream&amp; O, const ray&lt;U&gt;&amp;r)
<a name="l00687"></a>00687 {
<a name="l00688"></a>00688     <span class="keywordflow">return</span> O &lt;&lt; r.pos.x &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; r.pos.y &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; r.pos.z &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; r.dir.x &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; r.dir.y &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; r.dir.z &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00689"></a>00689 }
<a name="l00690"></a>00690 
<a name="l00691"></a>00691 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00692"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#aaf84acd33cf41c2c199720aa2ecaf317">00692</a> std::istream&amp; <a class="code" href="namespaceOpenRAVE_1_1geometry.html#aa2e16d81c858602abbc4a828510d6ab4">operator&gt;&gt;</a>(std::istream&amp; I, <a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html" title="A ray defined by an origin and a direction.">ray&lt;U&gt;</a>&amp;r)
<a name="l00693"></a>00693 {
<a name="l00694"></a>00694     <span class="keywordflow">return</span> I &gt;&gt; r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>.x &gt;&gt; r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>.y &gt;&gt; r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>.z &gt;&gt; r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.x &gt;&gt; r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.y &gt;&gt; r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.z;
<a name="l00695"></a>00695 }
<a name="l00696"></a>00696 
<a name="l00697"></a>00697 
<a name="l00699"></a>00699 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00700"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad671f7a65724072dcc220442b480b0a2">00700</a> std::ostream&amp; operator&lt;&lt;(std::ostream&amp; O, const RaveTransformMatrix&lt;U&gt;&amp;v)
<a name="l00701"></a>00701 {
<a name="l00702"></a>00702     <span class="keywordflow">return</span> O &lt;&lt; v.m[0] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.m[4] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.m[8] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.m[1] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.m[5] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.m[9] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.m[2] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.m[6] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.m[10] &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.trans.x &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.trans.y &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; v.trans.z &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00703"></a>00703 }
<a name="l00704"></a>00704 
<a name="l00706"></a>00706 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> U&gt;
<a name="l00707"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#a0b70ec7b3559a0cacd66d2b3f98a11d6">00707</a> std::istream&amp; <a class="code" href="namespaceOpenRAVE_1_1geometry.html#aa2e16d81c858602abbc4a828510d6ab4">operator&gt;&gt;</a>(std::istream&amp; I, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;U&gt;</a>&amp;v)
<a name="l00708"></a>00708 {
<a name="l00709"></a>00709     <span class="keywordflow">return</span> I &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0] &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4] &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8] &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1] &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5] &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9] &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2] &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6] &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10] &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.x &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.y &gt;&gt; v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>.z;
<a name="l00710"></a>00710 }
<a name="l00711"></a>00711 
<a name="l00713"></a>00713 
<a name="l00719"></a><a class="code" href="group__affine__math.html#ga8a5d9ee6c215ae740e449a8310e4e9d4">00719</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#ga8a5d9ee6c215ae740e449a8310e4e9d4" title="Converts an axis-angle rotation into a quaternion.">quatFromAxisAngle</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; axis, T angle)
<a name="l00720"></a>00720 {
<a name="l00721"></a>00721     T axislen = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>());
<a name="l00722"></a>00722     <span class="keywordflow">if</span>( axislen == 0 ) {
<a name="l00723"></a>00723         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(T(1),T(0),T(0),T(0));
<a name="l00724"></a>00724     }
<a name="l00725"></a>00725     angle *= T(0.5);
<a name="l00726"></a>00726     T sang = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a385cfc9dc9cbf1ca104d1bbed973ed32">MATH_SIN</a>(angle)/axislen;
<a name="l00727"></a>00727     <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(<a class="code" href="namespaceOpenRAVE_1_1geometry.html#afba208e07cd534031df027a712be452d">MATH_COS</a>(angle),axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*sang,axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*sang,axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*sang);
<a name="l00728"></a>00728 }
<a name="l00729"></a>00729 
<a name="l00734"></a><a class="code" href="group__affine__math.html#gacf8a968523673f5e3e3c08ffafd75a84">00734</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#ga8a5d9ee6c215ae740e449a8310e4e9d4" title="Converts an axis-angle rotation into a quaternion.">quatFromAxisAngle</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; axisangle)
<a name="l00735"></a>00735 {
<a name="l00736"></a>00736     T axislen = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(axisangle.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>());
<a name="l00737"></a>00737     <span class="keywordflow">if</span>( axislen == 0 ) {
<a name="l00738"></a>00738         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(T(1),T(0),T(0),T(0));
<a name="l00739"></a>00739     }
<a name="l00740"></a>00740     T sang = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a385cfc9dc9cbf1ca104d1bbed973ed32">MATH_SIN</a>(axislen*T(0.5))/axislen;
<a name="l00741"></a>00741     <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(<a class="code" href="namespaceOpenRAVE_1_1geometry.html#afba208e07cd534031df027a712be452d">MATH_COS</a>(axislen*T(0.5)),axisangle.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*sang,axisangle.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*sang,axisangle.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*sang);
<a name="l00742"></a>00742 }
<a name="l00743"></a>00743 
<a name="l00748"></a><a class="code" href="group__affine__math.html#gad512ee3ebabb8c45bea16c84ca9ea9d4">00748</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#gad512ee3ebabb8c45bea16c84ca9ea9d4" title="Converts the rotation of a matrix into a quaternion.">quatFromMatrix</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp; rotation)
<a name="l00749"></a>00749 {
<a name="l00750"></a>00750     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> rot;
<a name="l00751"></a>00751     T tr = rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+0] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+1] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+2];
<a name="l00752"></a>00752     <span class="keywordflow">if</span> (tr &gt;= 0) {
<a name="l00753"></a>00753         rot[0] = tr + 1;
<a name="l00754"></a>00754         rot[1] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+1] - rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+2]);
<a name="l00755"></a>00755         rot[2] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+2] - rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+0]);
<a name="l00756"></a>00756         rot[3] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+0] - rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+1]);
<a name="l00757"></a>00757     }
<a name="l00758"></a>00758     <span class="keywordflow">else</span> {
<a name="l00759"></a>00759         <span class="comment">// find the largest diagonal element and jump to the appropriate case</span>
<a name="l00760"></a>00760         <span class="keywordflow">if</span> (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+1] &gt; rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+0]) {
<a name="l00761"></a>00761             <span class="keywordflow">if</span> (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+2] &gt; rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+1]) {
<a name="l00762"></a>00762                 rot[3] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+2] - (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+0] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+1])) + 1;
<a name="l00763"></a>00763                 rot[1] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+0] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+2]);
<a name="l00764"></a>00764                 rot[2] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+2] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+1]);
<a name="l00765"></a>00765                 rot[0] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+0] - rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+1]);
<a name="l00766"></a>00766             }
<a name="l00767"></a>00767             <span class="keywordflow">else</span> {
<a name="l00768"></a>00768                 rot[2] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+1] - (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+2] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+0])) + 1;
<a name="l00769"></a>00769                 rot[3] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+2] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+1]);
<a name="l00770"></a>00770                 rot[1] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+1] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+0]);
<a name="l00771"></a>00771                 rot[0] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+2] - rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+0]);
<a name="l00772"></a>00772             }
<a name="l00773"></a>00773         }
<a name="l00774"></a>00774         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+2] &gt; rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+0]) {
<a name="l00775"></a>00775             rot[3] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+2] - (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+0] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+1])) + 1;
<a name="l00776"></a>00776             rot[1] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+0] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+2]);
<a name="l00777"></a>00777             rot[2] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+2] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+1]);
<a name="l00778"></a>00778             rot[0] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+0] - rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+1]);
<a name="l00779"></a>00779         }
<a name="l00780"></a>00780         <span class="keywordflow">else</span> {
<a name="l00781"></a>00781             rot[1] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+0] - (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+1] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+2])) + 1;
<a name="l00782"></a>00782             rot[2] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+1] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+0]);
<a name="l00783"></a>00783             rot[3] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+0] + rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+2]);
<a name="l00784"></a>00784             rot[0] = (rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+1] - rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+2]);
<a name="l00785"></a>00785         }
<a name="l00786"></a>00786     }
<a name="l00787"></a>00787     rot.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a163ea5fde6ad74443036ce3f40056184">normalize4</a>();
<a name="l00788"></a>00788     <span class="keywordflow">return</span> rot;
<a name="l00789"></a>00789 }
<a name="l00790"></a>00790 
<a name="l00795"></a><a class="code" href="group__affine__math.html#gadee9ddfd3bb8c56e599cf252853ff144">00795</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> <a class="code" href="group__affine__math.html#gadee9ddfd3bb8c56e599cf252853ff144" title="Converts a quaternion to a 3x3 matrix.">matrixFromQuat</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; quat)
<a name="l00796"></a>00796 {
<a name="l00797"></a>00797     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> t;
<a name="l00798"></a>00798     T qq1 = 2*quat[1]*quat[1];
<a name="l00799"></a>00799     T qq2 = 2*quat[2]*quat[2];
<a name="l00800"></a>00800     T qq3 = 2*quat[3]*quat[3];
<a name="l00801"></a>00801     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+0] = 1 - qq2 - qq3;
<a name="l00802"></a>00802     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+1] = 2*(quat[1]*quat[2] - quat[0]*quat[3]);
<a name="l00803"></a>00803     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+2] = 2*(quat[1]*quat[3] + quat[0]*quat[2]);
<a name="l00804"></a>00804     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+3] = 0;
<a name="l00805"></a>00805     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+0] = 2*(quat[1]*quat[2] + quat[0]*quat[3]);
<a name="l00806"></a>00806     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+1] = 1 - qq1 - qq3;
<a name="l00807"></a>00807     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+2] = 2*(quat[2]*quat[3] - quat[0]*quat[1]);
<a name="l00808"></a>00808     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+3] = 0;
<a name="l00809"></a>00809     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+0] = 2*(quat[1]*quat[3] - quat[0]*quat[2]);
<a name="l00810"></a>00810     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+1] = 2*(quat[2]*quat[3] + quat[0]*quat[1]);
<a name="l00811"></a>00811     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+2] = 1 - qq1 - qq2;
<a name="l00812"></a>00812     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+3] = 0;
<a name="l00813"></a>00813     <span class="keywordflow">return</span> t;
<a name="l00814"></a>00814 }
<a name="l00815"></a>00815 
<a name="l00821"></a><a class="code" href="group__affine__math.html#gacf10676c714b228545f93be252163d76">00821</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="group__affine__math.html#gadee9ddfd3bb8c56e599cf252853ff144" title="Converts a quaternion to a 3x3 matrix.">matrixFromQuat</a>(<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp; rotation, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; quat)
<a name="l00822"></a>00822 {
<a name="l00823"></a>00823     T qq1 = 2*quat[1]*quat[1];
<a name="l00824"></a>00824     T qq2 = 2*quat[2]*quat[2];
<a name="l00825"></a>00825     T qq3 = 2*quat[3]*quat[3];
<a name="l00826"></a>00826     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+0] = 1 - qq2 - qq3;
<a name="l00827"></a>00827     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+1] = 2*(quat[1]*quat[2] - quat[0]*quat[3]);
<a name="l00828"></a>00828     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+2] = 2*(quat[1]*quat[3] + quat[0]*quat[2]);
<a name="l00829"></a>00829     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*0+3] = 0;
<a name="l00830"></a>00830     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+0] = 2*(quat[1]*quat[2] + quat[0]*quat[3]);
<a name="l00831"></a>00831     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+1] = 1 - qq1 - qq3;
<a name="l00832"></a>00832     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+2] = 2*(quat[2]*quat[3] - quat[0]*quat[1]);
<a name="l00833"></a>00833     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*1+3] = 0;
<a name="l00834"></a>00834     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+0] = 2*(quat[1]*quat[3] - quat[0]*quat[2]);
<a name="l00835"></a>00835     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+1] = 2*(quat[2]*quat[3] + quat[0]*quat[1]);
<a name="l00836"></a>00836     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+2] = 1 - qq1 - qq2;
<a name="l00837"></a>00837     rotation.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4*2+3] = 0;
<a name="l00838"></a>00838 }
<a name="l00839"></a>00839 
<a name="l00845"></a><a class="code" href="group__affine__math.html#gad596e9d743a4d08e54db0f01b1657002">00845</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> <a class="code" href="group__affine__math.html#gad596e9d743a4d08e54db0f01b1657002" title="Converts an axis-angle rotation to a 3x3 matrix.">matrixFromAxisAngle</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; axis, T angle)
<a name="l00846"></a>00846 {
<a name="l00847"></a>00847     <span class="keywordflow">return</span> <a class="code" href="group__affine__math.html#gadee9ddfd3bb8c56e599cf252853ff144" title="Converts a quaternion to a 3x3 matrix.">matrixFromQuat</a>(<a class="code" href="group__affine__math.html#ga8a5d9ee6c215ae740e449a8310e4e9d4" title="Converts an axis-angle rotation into a quaternion.">quatFromAxisAngle</a>(axis,angle));
<a name="l00848"></a>00848 }
<a name="l00849"></a>00849 
<a name="l00854"></a><a class="code" href="group__affine__math.html#ga25cf5562e674415477d2bcd80f95cc5b">00854</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> <a class="code" href="group__affine__math.html#gad596e9d743a4d08e54db0f01b1657002" title="Converts an axis-angle rotation to a 3x3 matrix.">matrixFromAxisAngle</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; axisangle)
<a name="l00855"></a>00855 {
<a name="l00856"></a>00856     <span class="keywordflow">return</span> <a class="code" href="group__affine__math.html#gadee9ddfd3bb8c56e599cf252853ff144" title="Converts a quaternion to a 3x3 matrix.">matrixFromQuat</a>(<a class="code" href="group__affine__math.html#ga8a5d9ee6c215ae740e449a8310e4e9d4" title="Converts an axis-angle rotation into a quaternion.">quatFromAxisAngle</a>(axisangle));
<a name="l00857"></a>00857 }
<a name="l00858"></a>00858 
<a name="l00864"></a>00864 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00865"></a><a class="code" href="group__affine__math.html#gac36d0b93e56274bdfb6e1e648b829536">00865</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#gac36d0b93e56274bdfb6e1e648b829536" title="Multiply two quaternions.">quatMultiply</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; quat0, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; quat1)
<a name="l00866"></a>00866 {
<a name="l00867"></a>00867     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> q(quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> - quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> - quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> - quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>,
<a name="l00868"></a>00868                     quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> - quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>,
<a name="l00869"></a>00869                     quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> + quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> - quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>,
<a name="l00870"></a>00870                     quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> + quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> - quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*quat1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>);
<a name="l00871"></a>00871     T fnorm = q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a7578aad46d3c7072b89d4ea396898ae1">lengthsqr4</a>(); <span class="comment">// normalize the quaternion</span>
<a name="l00872"></a>00872     <a class="code" href="geometry_8h.html#af24c16dd00620665fbbeddd0579003c2">MATH_ASSERT</a>( fnorm &gt; 0.99f &amp;&amp; fnorm &lt; 1.01f ); <span class="comment">// catches multi-threading errors</span>
<a name="l00873"></a>00873     q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a163ea5fde6ad74443036ce3f40056184">normalize4</a>();
<a name="l00874"></a>00874     <span class="keywordflow">return</span> q;
<a name="l00875"></a>00875 }
<a name="l00876"></a>00876 
<a name="l00881"></a>00881 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00882"></a><a class="code" href="group__affine__math.html#ga7aa03948b7cc76653b754376dcd55bae">00882</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#ga7aa03948b7cc76653b754376dcd55bae" title="Inverted a quaternion rotation.">quatInverse</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; quat)
<a name="l00883"></a>00883 {
<a name="l00884"></a>00884     <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>,-quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>,-quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>,-quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>);
<a name="l00885"></a>00885 }
<a name="l00886"></a>00886 
<a name="l00893"></a>00893 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00894"></a><a class="code" href="group__affine__math.html#gab1abf41daa0f130493c4a0591b03b4ec">00894</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#gab1abf41daa0f130493c4a0591b03b4ec" title="Sphereical linear interpolation between two quaternions.">quatSlerp</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; quat0, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; quat1, T t)
<a name="l00895"></a>00895 {
<a name="l00896"></a>00896     <span class="comment">// quaternion to return</span>
<a name="l00897"></a>00897     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> qb, qm;
<a name="l00898"></a>00898     <span class="keywordflow">if</span>( quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aebd0ceb2abd975ab86e93daa01ab7779">dot</a>(quat1) &lt; 0 ) {
<a name="l00899"></a>00899         qb = -quat1;
<a name="l00900"></a>00900     }
<a name="l00901"></a>00901     <span class="keywordflow">else</span> {
<a name="l00902"></a>00902         qb = quat1;
<a name="l00903"></a>00903     }
<a name="l00904"></a>00904     <span class="comment">// Calculate angle between them.</span>
<a name="l00905"></a>00905     T cosHalfTheta = quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> * qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> + quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00906"></a>00906     <span class="comment">// if quat0=qb or quat0=-qb then theta = 0 and we can return quat0</span>
<a name="l00907"></a>00907     <span class="keywordflow">if</span> (<a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(cosHalfTheta) &gt;= 1.0) {
<a name="l00908"></a>00908         qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>; qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00909"></a>00909         <span class="keywordflow">return</span> qm;
<a name="l00910"></a>00910     }
<a name="l00911"></a>00911     <span class="comment">// Calculate temporary values.</span>
<a name="l00912"></a>00912     T halfTheta = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#aedc3766011ea14e0c1e3acf6004ac446">MATH_ACOS</a>(cosHalfTheta);
<a name="l00913"></a>00913     T sinHalfTheta = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(1 - cosHalfTheta*cosHalfTheta);
<a name="l00914"></a>00914     <span class="comment">// if theta = 180 degrees then result is not fully defined</span>
<a name="l00915"></a>00915     <span class="comment">// we could rotate around any axis normal to quat0 or qb</span>
<a name="l00916"></a>00916     <span class="keywordflow">if</span> (<a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(sinHalfTheta) &lt; 1e-7f) { <span class="comment">// fabs is floating point absolute</span>
<a name="l00917"></a>00917         qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = (quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> * 0.5f + qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> * 0.5f);
<a name="l00918"></a>00918         qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = (quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * 0.5f + qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * 0.5f);
<a name="l00919"></a>00919         qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = (quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * 0.5f + qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * 0.5f);
<a name="l00920"></a>00920         qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = (quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * 0.5f + qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * 0.5f);
<a name="l00921"></a>00921         <span class="keywordflow">return</span> qm;
<a name="l00922"></a>00922     }
<a name="l00923"></a>00923     T ratioA = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a385cfc9dc9cbf1ca104d1bbed973ed32">MATH_SIN</a>((1 - t) * halfTheta) / sinHalfTheta;
<a name="l00924"></a>00924     T ratioB = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a385cfc9dc9cbf1ca104d1bbed973ed32">MATH_SIN</a>(t * halfTheta) / sinHalfTheta;
<a name="l00925"></a>00925     <span class="comment">//calculate Quaternion.</span>
<a name="l00926"></a>00926     qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = (quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> * ratioA + qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> * ratioB);
<a name="l00927"></a>00927     qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = (quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * ratioA + qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * ratioB);
<a name="l00928"></a>00928     qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = (quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * ratioA + qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * ratioB);
<a name="l00929"></a>00929     qm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = (quat0.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * ratioA + qb.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * ratioB);
<a name="l00930"></a>00930     <span class="keywordflow">return</span> qm;
<a name="l00931"></a>00931 }
<a name="l00932"></a>00932 
<a name="l00933"></a>00933 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00934"></a><a class="code" href="namespaceOpenRAVE_1_1geometry.html#abdec155ca769068a555c8ab7e65c3389">00934</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#abdec155ca769068a555c8ab7e65c3389">dQSlerp</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; qa, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; _qb, T t)
<a name="l00935"></a>00935 {
<a name="l00936"></a>00936     <span class="keywordflow">return</span> quatSlerp&lt;T&gt;(qa,_qb,t);
<a name="l00937"></a>00937 }
<a name="l00938"></a>00938 
<a name="l00943"></a>00943 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00944"></a><a class="code" href="group__affine__math.html#ga53ddf2e9014f577a6915e180a3cf01e1">00944</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#ga53ddf2e9014f577a6915e180a3cf01e1" title="transform a vector by a quaternion">quatRotate</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; q, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; t)
<a name="l00945"></a>00945 {
<a name="l00946"></a>00946     T xx = 2 * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l00947"></a>00947     T xy = 2 * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00948"></a>00948     T xz = 2 * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00949"></a>00949     T xw = 2 * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l00950"></a>00950     T yy = 2 * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00951"></a>00951     T yz = 2 * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00952"></a>00952     T yw = 2 * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l00953"></a>00953     T zz = 2 * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l00954"></a>00954     T zw = 2 * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> * q.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l00955"></a>00955     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v;
<a name="l00956"></a>00956     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = (1-yy-zz) * t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + (xy-zw) * t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + (xz+yw)*t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00957"></a>00957     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = (xy+zw) * t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + (1-xx-zz) * t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + (yz-xw)*t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00958"></a>00958     v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = (xz-yw) * t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> + (yz+xw) * t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> + (1-xx-yy)*t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l00959"></a>00959     <span class="keywordflow">return</span> v;
<a name="l00960"></a>00960 }
<a name="l00961"></a>00961 
<a name="l00962"></a>00962 
<a name="l00968"></a>00968 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00969"></a><a class="code" href="group__affine__math.html#gaa6b1411c303ea16ecb279ae4a08735c0">00969</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#gaa6b1411c303ea16ecb279ae4a08735c0" title="Return the minimal quaternion that orients sourcedir to targetdir.">quatRotateDirection</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; sourcedir, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; targetdir)
<a name="l00970"></a>00970 {
<a name="l00971"></a>00971     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> rottodirection = sourcedir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aaa077ecf3366c176cf3f108dfe56434b" title="3 dim cross product, w is not touched">cross</a>(targetdir);
<a name="l00972"></a>00972     T fsin = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(rottodirection.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>());
<a name="l00973"></a>00973     T fcos = sourcedir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(targetdir);
<a name="l00974"></a>00974     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a> torient;
<a name="l00975"></a>00975     <span class="keywordflow">if</span>( fsin &gt; 0 ) {
<a name="l00976"></a>00976         <span class="keywordflow">return</span> <a class="code" href="group__affine__math.html#ga8a5d9ee6c215ae740e449a8310e4e9d4" title="Converts an axis-angle rotation into a quaternion.">quatFromAxisAngle</a>(rottodirection*(1/fsin), <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a010a3cbfcb63b09b257881a8b854d9a7">MATH_ATAN2</a>(fsin, fcos));
<a name="l00977"></a>00977     }
<a name="l00978"></a>00978     <span class="keywordflow">if</span>( fcos &lt; 0 ) {
<a name="l00979"></a>00979         <span class="comment">// hand is flipped 180, rotate around x axis</span>
<a name="l00980"></a>00980         rottodirection = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(1,0,0);
<a name="l00981"></a>00981         rottodirection -= sourcedir * sourcedir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(rottodirection);
<a name="l00982"></a>00982         <span class="keywordflow">if</span>( rottodirection.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>()&lt;1e-8 ) {
<a name="l00983"></a>00983             rottodirection = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(0,0,1);
<a name="l00984"></a>00984             rottodirection -= sourcedir * sourcedir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(rottodirection);
<a name="l00985"></a>00985         }
<a name="l00986"></a>00986         rottodirection.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab106728f86e55650e15d636d903da9b8">normalize3</a>();
<a name="l00987"></a>00987         <span class="keywordflow">return</span> <a class="code" href="group__affine__math.html#ga8a5d9ee6c215ae740e449a8310e4e9d4" title="Converts an axis-angle rotation into a quaternion.">quatFromAxisAngle</a>(rottodirection, <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a010a3cbfcb63b09b257881a8b854d9a7">MATH_ATAN2</a>(fsin, fcos));
<a name="l00988"></a>00988     }
<a name="l00989"></a>00989     <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(T(1),T(0),T(0),T(0));
<a name="l00990"></a>00990 }
<a name="l00991"></a>00991 
<a name="l00998"></a>00998 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00999"></a><a class="code" href="group__affine__math.html#ga436efaa950bb38f3b3b8a891e5da5591">00999</a> std::pair&lt;T, RaveVector&lt;T&gt; &gt; <a class="code" href="group__affine__math.html#ga436efaa950bb38f3b3b8a891e5da5591" title="Find the rotation theta around axis such that rot(axis,theta) * q is closest to the...">normalizeAxisRotation</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; axis, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; quat)
<a name="l01000"></a>01000 {
<a name="l01001"></a>01001     T axislen = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>());
<a name="l01002"></a>01002     <a class="code" href="namespaceOpenRAVE.html#a973ec569e405922437be98473d2aa6f8">dReal</a> angle = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a010a3cbfcb63b09b257881a8b854d9a7">MATH_ATAN2</a>(-quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>-quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>-quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>,quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*axislen);
<a name="l01003"></a>01003     <a class="code" href="namespaceOpenRAVE.html#a973ec569e405922437be98473d2aa6f8">dReal</a> sinangle2 = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a385cfc9dc9cbf1ca104d1bbed973ed32">MATH_SIN</a>(angle)/axislen, cosangle2 = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#afba208e07cd534031df027a712be452d">MATH_COS</a>(angle);
<a name="l01004"></a>01004     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> normalizingquat = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(cosangle2,axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>*sinangle2,axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*sinangle2,axis.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*sinangle2);
<a name="l01005"></a>01005     <span class="keywordflow">return</span> std::make_pair(2*angle,<a class="code" href="group__affine__math.html#gac36d0b93e56274bdfb6e1e648b829536" title="Multiply two quaternions.">quatMultiply</a>(normalizingquat,quat));
<a name="l01006"></a>01006 }
<a name="l01007"></a>01007 
<a name="l01012"></a>01012 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01013"></a><a class="code" href="group__affine__math.html#ga95a2de86a8789000c0a12ce91bbefe0c">01013</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#ga95a2de86a8789000c0a12ce91bbefe0c" title="Converts a quaternion into the axis-angle representation.">axisAngleFromQuat</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; quat)
<a name="l01014"></a>01014 {
<a name="l01015"></a>01015     T sinang = quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>+quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>+quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l01016"></a>01016     <span class="keywordflow">if</span>( sinang == 0 ) {
<a name="l01017"></a>01017         <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(0,0,0);
<a name="l01018"></a>01018     }
<a name="l01019"></a>01019     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> _quat;
<a name="l01020"></a>01020     <span class="keywordflow">if</span>( quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> &lt; 0 ) {
<a name="l01021"></a>01021         _quat = -quat;
<a name="l01022"></a>01022     }
<a name="l01023"></a>01023     <span class="keywordflow">else</span> {
<a name="l01024"></a>01024         _quat = quat;
<a name="l01025"></a>01025     }
<a name="l01026"></a>01026     sinang = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(sinang);
<a name="l01027"></a>01027     T f = 2.0*<a class="code" href="namespaceOpenRAVE_1_1geometry.html#a010a3cbfcb63b09b257881a8b854d9a7">MATH_ATAN2</a>(sinang,_quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>)/sinang;
<a name="l01028"></a>01028     <span class="keywordflow">return</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(_quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>*f,_quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>*f,_quat.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>*f);
<a name="l01029"></a>01029 }
<a name="l01030"></a>01030 
<a name="l01035"></a>01035 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01036"></a><a class="code" href="group__affine__math.html#gabf46823a4c5b59c9ac3e72f0905bea24">01036</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> <a class="code" href="group__affine__math.html#gabf46823a4c5b59c9ac3e72f0905bea24" title="Converts the rotation of a matrix into axis-angle representation.">axisAngleFromMatrix</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp; rotation)
<a name="l01037"></a>01037 {
<a name="l01038"></a>01038     <span class="keywordflow">return</span> <a class="code" href="group__affine__math.html#ga95a2de86a8789000c0a12ce91bbefe0c" title="Converts a quaternion into the axis-angle representation.">axisAngleFromQuat</a>(<a class="code" href="group__affine__math.html#gad512ee3ebabb8c45bea16c84ca9ea9d4" title="Converts the rotation of a matrix into a quaternion.">quatFromMatrix</a>(rotation));
<a name="l01039"></a>01039 }
<a name="l01040"></a>01040 
<a name="l01041"></a>01041 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01042"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aee219ae07e81faf3809fa084700d9175">01042</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a838882cb801deca4fbc1bd69134b5936">RaveTransform&lt;T&gt;::RaveTransform</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp; t)
<a name="l01043"></a>01043 {
<a name="l01044"></a>01044     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a>;
<a name="l01045"></a>01045     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a> = <a class="code" href="group__affine__math.html#gad512ee3ebabb8c45bea16c84ca9ea9d4" title="Converts the rotation of a matrix into a quaternion.">quatFromMatrix</a>(t);
<a name="l01046"></a>01046 }
<a name="l01047"></a>01047 
<a name="l01048"></a>01048 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01049"></a><a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#afedc9aa5b77b683108f479eed27eb030">01049</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#a1376d9196d5c75f5d5ae29faaf430649">RaveTransformMatrix&lt;T&gt;::RaveTransformMatrix</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a>&amp; t)
<a name="l01050"></a>01050 {
<a name="l01051"></a>01051     <a class="code" href="group__affine__math.html#gadee9ddfd3bb8c56e599cf252853ff144" title="Converts a quaternion to a 3x3 matrix.">matrixFromQuat</a>(*<span class="keyword">this</span>, t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a4b7fdb477f2624655ec3fc8bdb7d285c">rot</a>);
<a name="l01052"></a>01052     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="rot is a quaternion=(cos(ang/2),axisx*sin(ang/2),axisy*sin(ang/2),axisz*sin(ang/2))...">trans</a>;
<a name="l01053"></a>01053 
<a name="l01054"></a>01054 }
<a name="l01055"></a>01055 
<a name="l01062"></a>01062 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l01063"></a><a class="code" href="group__affine__math.html#ga9db1071fa2f5264616dabb3b3d16eec9">01063</a> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> <a class="code" href="group__affine__math.html#ga9db1071fa2f5264616dabb3b3d16eec9" title="Returns a camera matrix that looks along a ray with a desired up vector.">transformLookat</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; vlookat, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; vcamerapos, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; vcameraup)
<a name="l01064"></a>01064 {
<a name="l01065"></a>01065     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> dir = vlookat - vcamerapos;
<a name="l01066"></a>01066     T len = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>());
<a name="l01067"></a>01067     <span class="keywordflow">if</span>( len &gt; 1e-6 ) {
<a name="l01068"></a>01068         dir *= 1/len;
<a name="l01069"></a>01069     }
<a name="l01070"></a>01070     <span class="keywordflow">else</span> {
<a name="l01071"></a>01071         dir = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(0,0,1);
<a name="l01072"></a>01072     }
<a name="l01073"></a>01073     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> up = vcameraup - dir * dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(vcameraup);
<a name="l01074"></a>01074     len = up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>();
<a name="l01075"></a>01075     <span class="keywordflow">if</span>( len &lt; 1e-8 ) {
<a name="l01076"></a>01076         up = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(0,1,0);
<a name="l01077"></a>01077         up -= dir * dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(up);
<a name="l01078"></a>01078         len = up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>();
<a name="l01079"></a>01079         <span class="keywordflow">if</span>( len &lt; 1e-8 ) {
<a name="l01080"></a>01080             up = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(1,0,0);
<a name="l01081"></a>01081             up -= dir * dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(up);
<a name="l01082"></a>01082             len = up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>();
<a name="l01083"></a>01083         }
<a name="l01084"></a>01084     }
<a name="l01085"></a>01085     up *= 1/<a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(len);
<a name="l01086"></a>01086     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> right = up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aaa077ecf3366c176cf3f108dfe56434b" title="3 dim cross product, w is not touched">cross</a>(dir);
<a name="l01087"></a>01087     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a> t;
<a name="l01088"></a>01088     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0] = right.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1] = up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>; t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2] = dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l01089"></a>01089     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4] = right.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5] = up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>; t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6] = dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l01090"></a>01090     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8] = right.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9] = up.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>; t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10] = dir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l01091"></a>01091     t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#aad5195f0043f898ac6fbf0a8bceca2c6" title="translation component">trans</a> = vcamerapos;
<a name="l01092"></a>01092     <span class="keywordflow">return</span> t;
<a name="l01093"></a>01093 }
<a name="l01094"></a>01094 
<a name="l01097"></a>01097 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01098"></a><a class="code" href="group__geometric__primitives.html#ga3264b6e233d1bacaa2176bf9e7a74399">01098</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__geometric__primitives.html#ga3264b6e233d1bacaa2176bf9e7a74399" title="Tests a point inside a 3D quadrilateral.">insideQuadrilateral</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; v, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; verts)
<a name="l01099"></a>01099 {
<a name="l01100"></a>01100     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v4,v5;
<a name="l01101"></a>01101     T m1,m2;
<a name="l01102"></a>01102     T anglesum=0,costheta;
<a name="l01103"></a>01103     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;4; i++) {
<a name="l01104"></a>01104         v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = verts[i].<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l01105"></a>01105         v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = verts[i].<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l01106"></a>01106         v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = verts[i].<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l01107"></a>01107         v5.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = verts[(i+1)%4].x - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l01108"></a>01108         v5.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = verts[(i+1)%4].<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l01109"></a>01109         v5.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = verts[(i+1)%4].z - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l01110"></a>01110         m1 = v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>();
<a name="l01111"></a>01111         m2 = v5.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>();
<a name="l01112"></a>01112         <span class="keywordflow">if</span> (m1*m2 &lt;= std::numeric_limits&lt;T&gt;::epsilon()*std::numeric_limits&lt;T&gt;::epsilon()) {
<a name="l01113"></a>01113             <span class="keywordflow">return</span>(1); <span class="comment">// on a vertex, consider this inside</span>
<a name="l01114"></a>01114         }
<a name="l01115"></a>01115         <span class="keywordflow">else</span> {
<a name="l01116"></a>01116             costheta = v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(v5)/<a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(m1*m2);
<a name="l01117"></a>01117         }
<a name="l01118"></a>01118         anglesum += <a class="code" href="namespaceOpenRAVE_1_1geometry.html#aedc3766011ea14e0c1e3acf6004ac446">MATH_ACOS</a>(costheta);
<a name="l01119"></a>01119     }
<a name="l01120"></a>01120     T diff = anglesum - (T)2.0 * M_PI;
<a name="l01121"></a>01121     <span class="keywordflow">return</span> <a class="code" href="group__affine__math.html#ga500226250a97dadb70d64615b4526388" title="absolute value">RaveFabs</a>(diff) &lt;= std::numeric_limits&lt;T&gt;::epsilon();
<a name="l01122"></a>01122 }
<a name="l01123"></a>01123 
<a name="l01126"></a>01126 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01127"></a><a class="code" href="group__geometric__primitives.html#gafa7d69f62abeb6dcb2784b10ad6ef8a5">01127</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group__geometric__primitives.html#gafa7d69f62abeb6dcb2784b10ad6ef8a5" title="Tests a point insdie a 3D triangle.">insideTriangle</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1triangle.html" title="A triangle defined by 3 points.">triangle&lt;T&gt;</a>&amp; tri)
<a name="l01128"></a>01128 {
<a name="l01129"></a>01129     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v4,v5;
<a name="l01130"></a>01130     T m1,m2;
<a name="l01131"></a>01131     T anglesum=0.0;
<a name="l01132"></a>01132     T costheta;
<a name="l01133"></a>01133     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;3; i++) {
<a name="l01134"></a>01134         v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = tri[i].x - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l01135"></a>01135         v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = tri[i].y - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l01136"></a>01136         v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = tri[i].z - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l01137"></a>01137         v5.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = tri[(i+1)%3].x - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l01138"></a>01138         v5.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = tri[(i+1)%3].y - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l01139"></a>01139         v5.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = tri[(i+1)%3].z - v-&gt;<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l01140"></a>01140         m1 = v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>();
<a name="l01141"></a>01141         m2 = v5.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1b1f2dda52bdd69e97dcc14f8c757fc5">lengthsqr3</a>();
<a name="l01142"></a>01142         <span class="keywordflow">if</span> (m1*m2 &lt;= std::numeric_limits&lt;T&gt;::epsilon()*std::numeric_limits&lt;T&gt;::epsilon()) {
<a name="l01143"></a>01143             <span class="keywordflow">return</span>(1); <span class="comment">// on a vertex, consider this inside</span>
<a name="l01144"></a>01144         }
<a name="l01145"></a>01145         <span class="keywordflow">else</span> {
<a name="l01146"></a>01146             costheta = v4.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(v5)/<a class="code" href="namespaceOpenRAVE_1_1geometry.html#a3bdbd2cc79f06ca2c08f59946cfb789e">MATH_SQRT</a>(m1*m2);
<a name="l01147"></a>01147         }
<a name="l01148"></a>01148         anglesum += acos(costheta);
<a name="l01149"></a>01149     }
<a name="l01150"></a>01150     T diff = anglesum - (T)2.0 * M_PI;
<a name="l01151"></a>01151     <span class="keywordflow">return</span> <a class="code" href="group__affine__math.html#ga500226250a97dadb70d64615b4526388" title="absolute value">RaveFabs</a>(diff) &lt;= std::numeric_limits&lt;T&gt;::epsilon();
<a name="l01152"></a>01152 }
<a name="l01153"></a>01153 
<a name="l01156"></a>01156 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01157"></a><a class="code" href="group__geometric__primitives.html#ga1c4f9c919f34e3f44e4dbe3fd4abfb8e">01157</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__geometric__primitives.html#ga1c4f9c919f34e3f44e4dbe3fd4abfb8e" title="Test collision of a ray with an axis aligned bounding box.">RayAABBTest</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html" title="A ray defined by an origin and a direction.">ray&lt;T&gt;</a>&amp; r, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html" title="An axis aligned bounding box.">aabb&lt;T&gt;</a>&amp; ab)
<a name="l01158"></a>01158 {
<a name="l01159"></a>01159     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> vd, vpos = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a> - ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>;
<a name="l01160"></a>01160     <span class="keywordflow">if</span>((<a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>) &gt; ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x)&amp;&amp;(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.x* vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> &gt; 0.0f))
<a name="l01161"></a>01161         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01162"></a>01162     <span class="keywordflow">if</span>((<a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>) &gt; ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y)&amp;&amp;(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.y * vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> &gt; 0.0f))
<a name="l01163"></a>01163         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01164"></a>01164     <span class="keywordflow">if</span>((<a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>) &gt; ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z)&amp;&amp;(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.z * vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> &gt; 0.0f))
<a name="l01165"></a>01165         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01166"></a>01166     vd = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.cross(vpos);
<a name="l01167"></a>01167     <span class="keywordflow">if</span>( <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vd.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>) &gt; ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.z) + ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.y) )
<a name="l01168"></a>01168         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01169"></a>01169     <span class="keywordflow">if</span>( <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vd.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>) &gt; ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.z) + ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.x) )
<a name="l01170"></a>01170         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01171"></a>01171     <span class="keywordflow">if</span>( <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vd.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>) &gt; ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.y) + ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.x) )
<a name="l01172"></a>01172         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01173"></a>01173     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01174"></a>01174 }
<a name="l01175"></a>01175 
<a name="l01178"></a>01178 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01179"></a><a class="code" href="group__geometric__primitives.html#gabd242edf62b381f793017cce0f2bec93">01179</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__geometric__primitives.html#gabd242edf62b381f793017cce0f2bec93" title="Test collision of a ray and an oriented bounding box.">RayOBBTest</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html" title="A ray defined by an origin and a direction.">ray&lt;T&gt;</a>&amp; r, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a>&amp; o)
<a name="l01180"></a>01180 {
<a name="l01181"></a>01181     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> vpos, vdir, vd;
<a name="l01182"></a>01182     vd = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a> - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>;
<a name="l01183"></a>01183     vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = vd.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>);
<a name="l01184"></a>01184     vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.dot3(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>);
<a name="l01185"></a>01185     <span class="keywordflow">if</span>((<a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>) &gt; o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x)&amp;&amp;(vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>* vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> &gt; 0.0f)) {
<a name="l01186"></a>01186         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01187"></a>01187     }
<a name="l01188"></a>01188     vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = vd.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>);
<a name="l01189"></a>01189     vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.dot3(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>);
<a name="l01190"></a>01190     <span class="keywordflow">if</span>((<a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>) &gt; o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y)&amp;&amp;(vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> &gt; 0.0f)) {
<a name="l01191"></a>01191         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01192"></a>01192     }
<a name="l01193"></a>01193     vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = vd.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>);
<a name="l01194"></a>01194     vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = r.<a class="code" href="classOpenRAVE_1_1geometry_1_1ray.html#a358d165f685f7746473d110c6cfe7198">dir</a>.dot3(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>);
<a name="l01195"></a>01195     <span class="keywordflow">if</span>((<a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>) &gt; o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z)&amp;&amp;(vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * vpos.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> &gt; 0.0f)) {
<a name="l01196"></a>01196         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01197"></a>01197     }
<a name="l01198"></a>01198     <a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a28281cdd752b067fcfa996b3ed329067">cross3</a>(vd, vdir, vpos);
<a name="l01199"></a>01199     <span class="keywordflow">if</span>((<a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vd.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>) &gt; o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>) + o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>))||
<a name="l01200"></a>01200        ( <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vd.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>) &gt; o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>) + o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>)) ||
<a name="l01201"></a>01201        ( <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vd.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>) &gt; o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>) + o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vdir.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>)) ) {
<a name="l01202"></a>01202         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01203"></a>01203     }
<a name="l01204"></a>01204     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01205"></a>01205 }
<a name="l01206"></a>01206 
<a name="l01207"></a>01207 <span class="comment">//bool RayFaceTest(const RAY&amp; r, const FACE&amp; f)</span>
<a name="l01208"></a>01208 <span class="comment">//{</span>
<a name="l01209"></a>01209 <span class="comment">//  float t = D3DXVec3Dot(&amp;f.plane.vNorm, &amp;(f.v1 - r.vPos) ) / D3DXVec3Dot(&amp;f.plane.vNorm, &amp;r.vDir);</span>
<a name="l01210"></a>01210 <span class="comment">//</span>
<a name="l01211"></a>01211 <span class="comment">//  if(t &lt;= 0.0f) return false;</span>
<a name="l01212"></a>01212 <span class="comment">//</span>
<a name="l01213"></a>01213 <span class="comment">//  // if e0 = (v2-v1) and e1 = (v3-v1) are the axes, then the point where</span>
<a name="l01214"></a>01214 <span class="comment">//  // the ray intersects that plane can be composed from the two</span>
<a name="l01215"></a>01215 <span class="comment">//  // if the coefficients are s0 and s1 then s0 &amp; s1 &gt;=0 and s0+s1&lt;=1.0f</span>
<a name="l01216"></a>01216 <span class="comment">//  DXVEC3 v = r.vPos + r.vDir * t - f.v1;</span>
<a name="l01217"></a>01217 <span class="comment">//</span>
<a name="l01218"></a>01218 <span class="comment">//  float e00, e01, e11, q0, q1, s0, s1;</span>
<a name="l01219"></a>01219 <span class="comment">//  e00 = D3DXVec3LengthSq(&amp;(f.v2 - f.v1));</span>
<a name="l01220"></a>01220 <span class="comment">//  e01 = D3DXVec3Dot(&amp;(f.v2 - f.v1), &amp;(f.v3 - f.v1));</span>
<a name="l01221"></a>01221 <span class="comment">//  e11 = D3DXVec3LengthSq(&amp;(f.v3 - f.v1));</span>
<a name="l01222"></a>01222 <span class="comment">//</span>
<a name="l01223"></a>01223 <span class="comment">//  q0 = D3DXVec3Dot(&amp;v, &amp;(f.v2 - f.v1));</span>
<a name="l01224"></a>01224 <span class="comment">//  q1 = D3DXVec3Dot(&amp;v, &amp;(f.v3 - f.v1));</span>
<a name="l01225"></a>01225 <span class="comment">//</span>
<a name="l01226"></a>01226 <span class="comment">//  s0 = e11 * q0 - e01 * q1;</span>
<a name="l01227"></a>01227 <span class="comment">//  s1 = e00 * q1 - e01 * q0;</span>
<a name="l01228"></a>01228 <span class="comment">//</span>
<a name="l01229"></a>01229 <span class="comment">//  t = e00 * e11 - e01 * e01;</span>
<a name="l01230"></a>01230 <span class="comment">//</span>
<a name="l01231"></a>01231 <span class="comment">//  if( t &lt; -1e-4 ) return s0 &lt; 0.0f &amp;&amp; s1 &lt; 0.0f &amp;&amp; s0+s1 &gt;= t;</span>
<a name="l01232"></a>01232 <span class="comment">//  if( t &lt; 1e-4 ) return false;</span>
<a name="l01233"></a>01233 <span class="comment">//</span>
<a name="l01234"></a>01234 <span class="comment">//  return s0 &gt; 0.0f &amp;&amp; s1 &gt; 0.0f &amp;&amp; s0+s1 &lt;= t;</span>
<a name="l01235"></a>01235 <span class="comment">//}</span>
<a name="l01236"></a>01236 
<a name="l01237"></a>01237 <span class="comment">//bool RaySphereTest(const RAY&amp; r, const SPHERE&amp; s)</span>
<a name="l01238"></a>01238 <span class="comment">//{</span>
<a name="l01239"></a>01239 <span class="comment">//  DXVEC3 v;</span>
<a name="l01240"></a>01240 <span class="comment">//  float fLength;</span>
<a name="l01241"></a>01241 <span class="comment">//</span>
<a name="l01242"></a>01242 <span class="comment">//  v = s.vPos - r.vPos;</span>
<a name="l01243"></a>01243 <span class="comment">//  fLength = D3DXVec3Dot(&amp;v, &amp;r.vDir);</span>
<a name="l01244"></a>01244 <span class="comment">//</span>
<a name="l01245"></a>01245 <span class="comment">//  if( D3DXVec3LengthSq(&amp;v) &gt; Sqr(s.fRadius) &amp;&amp; fLength &lt; 0.0f )</span>
<a name="l01246"></a>01246 <span class="comment">//      return false;</span>
<a name="l01247"></a>01247 <span class="comment">//</span>
<a name="l01248"></a>01248 <span class="comment">//  return D3DXVec3LengthSq(&amp;(v - r.vDir * fLength)) &lt; s.fRadius * s.fRadius;</span>
<a name="l01249"></a>01249 <span class="comment">//}</span>
<a name="l01250"></a>01250 
<a name="l01251"></a>01251 <span class="comment">//　光線と球との交点から球の中心までの距離が半径と等しい</span>
<a name="l01252"></a>01252 <span class="comment">//bool RaySphereTest(const RAY&amp; r, const SPHERE&amp; s, DXVEC3&amp; v)</span>
<a name="l01253"></a>01253 <span class="comment">//{</span>
<a name="l01254"></a>01254 <span class="comment">//  // (dir,dir)*t*t + 2(vp,dir)*t + (vp,vp) = r*r</span>
<a name="l01255"></a>01255 <span class="comment">//  float fd, f;</span>
<a name="l01256"></a>01256 <span class="comment">//</span>
<a name="l01257"></a>01257 <span class="comment">//  v = r.vPos - s.vPos;</span>
<a name="l01258"></a>01258 <span class="comment">//  f = D3DXVec3Dot(&amp;v, &amp;r.vDir);</span>
<a name="l01259"></a>01259 <span class="comment">//</span>
<a name="l01260"></a>01260 <span class="comment">//  fd = 4.0f * (f * f - D3DXVec3LengthSq(&amp;v) + s.fRadius * s.fRadius);</span>
<a name="l01261"></a>01261 <span class="comment">//</span>
<a name="l01262"></a>01262 <span class="comment">//  if( fd &lt; 0.0f ) return false;</span>
<a name="l01263"></a>01263 <span class="comment">//</span>
<a name="l01264"></a>01264 <span class="comment">//  fd = sqrtf(fd);</span>
<a name="l01265"></a>01265 <span class="comment">//</span>
<a name="l01266"></a>01266 <span class="comment">//  //　最小の数が0より小さいの場合、最大の数を選ぶことにする</span>
<a name="l01267"></a>01267 <span class="comment">//</span>
<a name="l01268"></a>01268 <span class="comment">//  if( -2.0f * f - fd &gt; 0.0f ) {</span>
<a name="l01269"></a>01269 <span class="comment">//      fd = 0.5f * (-2.0f * f - fd) / D3DXVec3LengthSq(&amp;r.vDir);</span>
<a name="l01270"></a>01270 <span class="comment">//      v = r.vPos + fd * r.vDir;</span>
<a name="l01271"></a>01271 <span class="comment">//      return true;</span>
<a name="l01272"></a>01272 <span class="comment">//  }</span>
<a name="l01273"></a>01273 <span class="comment">//</span>
<a name="l01274"></a>01274 <span class="comment">//  if( -2.0f * f + fd &gt; 0.0f ) {</span>
<a name="l01275"></a>01275 <span class="comment">//      fd = 0.5f * (-2.0f * f + fd) / D3DXVec3LengthSq(&amp;r.vDir);</span>
<a name="l01276"></a>01276 <span class="comment">//      v = r.vPos + fd * r.vDir;</span>
<a name="l01277"></a>01277 <span class="comment">//      return true;</span>
<a name="l01278"></a>01278 <span class="comment">//  }</span>
<a name="l01279"></a>01279 <span class="comment">//</span>
<a name="l01280"></a>01280 <span class="comment">//  return false;</span>
<a name="l01281"></a>01281 <span class="comment">//}</span>
<a name="l01282"></a>01282 
<a name="l01283"></a>01283 <span class="comment">//bool VertexAABBTest(const DXVEC3&amp; v, const AABB&amp; a)</span>
<a name="l01284"></a>01284 <span class="comment">//{</span>
<a name="l01285"></a>01285 <span class="comment">//  return (fabsf(v.x - a.vPos.x) &lt;= a.vExtents.x) &amp;&amp;</span>
<a name="l01286"></a>01286 <span class="comment">//      (fabsf(v.y - a.vPos.y) &lt;= a.vExtents.y) &amp;&amp;</span>
<a name="l01287"></a>01287 <span class="comment">//      (fabsf(v.z - a.vPos.z) &lt;= a.vExtents.z);</span>
<a name="l01288"></a>01288 <span class="comment">//}</span>
<a name="l01289"></a>01289 <span class="comment">//</span>
<a name="l01290"></a>01290 <span class="comment">//bool VertexOBBTest(const DXVEC3&amp; v, const OBB&amp; o)</span>
<a name="l01291"></a>01291 <span class="comment">//{</span>
<a name="l01292"></a>01292 <span class="comment">//  DXVEC3 nv;</span>
<a name="l01293"></a>01293 <span class="comment">//  nv = v - o.vPos;</span>
<a name="l01294"></a>01294 <span class="comment">//</span>
<a name="l01295"></a>01295 <span class="comment">//  return (fabsf(D3DXVec3Dot(&amp;nv, &amp;o.vRight)) &lt;= o.vExtents.x) &amp;&amp;</span>
<a name="l01296"></a>01296 <span class="comment">//      (fabsf(D3DXVec3Dot(&amp;nv, &amp;o.vUp)) &lt;= o.vExtents.y) &amp;&amp;</span>
<a name="l01297"></a>01297 <span class="comment">//      (fabsf(D3DXVec3Dot(&amp;nv, &amp;o.vDir)) &lt;= o.vExtents.z);</span>
<a name="l01298"></a>01298 <span class="comment">//}</span>
<a name="l01299"></a>01299 <span class="comment">//</span>
<a name="l01300"></a>01300 <span class="comment">//bool VertexSphereTest(const DXVEC3&amp; v, const SPHERE&amp; s)</span>
<a name="l01301"></a>01301 <span class="comment">//{</span>
<a name="l01302"></a>01302 <span class="comment">//  return D3DXVec3LengthSq(&amp;DXVEC3(v-s.vPos)) &lt;= s.fRadius * s.fRadius;</span>
<a name="l01303"></a>01303 <span class="comment">//}</span>
<a name="l01304"></a>01304 <span class="comment">//</span>
<a name="l01305"></a>01305 <span class="comment">//bool VertexConeTest(const DXVEC3&amp; v, CONE&amp; c)</span>
<a name="l01306"></a>01306 <span class="comment">//{</span>
<a name="l01307"></a>01307 <span class="comment">//  const DXVEC3&amp; vDir = v - c.vVertex;</span>
<a name="l01308"></a>01308 <span class="comment">//  float fDot = D3DXVec3Dot(&amp;vDir, &amp;c.vDir);</span>
<a name="l01309"></a>01309 <span class="comment">//</span>
<a name="l01310"></a>01310 <span class="comment">//  return (fDot &gt; 0.0f) &amp;&amp; (fDot &lt;= c.fLength) &amp;&amp;</span>
<a name="l01311"></a>01311 <span class="comment">//      (fDot * fDot &gt;= c.fCosAng * c.fCosAng * D3DXVec3LengthSq(&amp;vDir));</span>
<a name="l01312"></a>01312 <span class="comment">//}</span>
<a name="l01313"></a>01313 <span class="comment">//</span>
<a name="l01314"></a>01314 <span class="comment">//bool VertexFrustumTest(const DXVEC3&amp; v, const FRUSTUM&amp; fr)</span>
<a name="l01315"></a>01315 <span class="comment">//{</span>
<a name="l01316"></a>01316 <span class="comment">//  DXVEC3 vDist = v - fr.vPos;</span>
<a name="l01317"></a>01317 <span class="comment">//</span>
<a name="l01318"></a>01318 <span class="comment">//  if(D3DXVec3Dot(&amp;vDist, &amp;(fr.fCosFOVX * fr.vRight - fr.fSinFOVX * fr.vDir)) &gt; 0.0f) return false;</span>
<a name="l01319"></a>01319 <span class="comment">//  if(D3DXVec3Dot(&amp;vDist, &amp;(-fr.fCosFOVX * fr.vRight - fr.fSinFOVX * fr.vDir)) &gt; 0.0f) return false;</span>
<a name="l01320"></a>01320 <span class="comment">//</span>
<a name="l01321"></a>01321 <span class="comment">//  // top and bottom</span>
<a name="l01322"></a>01322 <span class="comment">//  if(D3DXVec3Dot(&amp;vDist, &amp;(fr.fCosFOVY * fr.vUp - fr.fSinFOVY * fr.vDir)) &gt; 0.0f) return false;</span>
<a name="l01323"></a>01323 <span class="comment">//  if(D3DXVec3Dot(&amp;vDist, &amp;(-fr.fCosFOVY * fr.vUp - fr.fSinFOVY * fr.vDir)) &gt; 0.0f) return false;</span>
<a name="l01324"></a>01324 <span class="comment">//</span>
<a name="l01325"></a>01325 <span class="comment">//  float fDot = vDist.x * fr.vDir.x + vDist.y * fr.vDir.y + vDist.z * fr.vDir.z;</span>
<a name="l01326"></a>01326 <span class="comment">//  if( (fDot &lt; fr.fNear) || (fDot &gt; fr.fFar) ) return false;</span>
<a name="l01327"></a>01327 <span class="comment">//</span>
<a name="l01328"></a>01328 <span class="comment">//  return true;</span>
<a name="l01329"></a>01329 <span class="comment">//}</span>
<a name="l01330"></a>01330 
<a name="l01331"></a>01331 <span class="comment">//bool OBBFrustumTest(const OBB&amp; o, const FRUSTUM&amp; fr)</span>
<a name="l01332"></a>01332 <span class="comment">//{</span>
<a name="l01333"></a>01333 <span class="comment">//  // check OBB against all 6 planes</span>
<a name="l01334"></a>01334 <span class="comment">//  DXVEC3 v = o.vPos - fr.vPos;</span>
<a name="l01335"></a>01335 <span class="comment">//</span>
<a name="l01336"></a>01336 <span class="comment">//  // if v lies on the left or bottom sides of the frustrum</span>
<a name="l01337"></a>01337 <span class="comment">//  // then freflect about the planes to get it on the right and</span>
<a name="l01338"></a>01338 <span class="comment">//  // top sides</span>
<a name="l01339"></a>01339 <span class="comment">//</span>
<a name="l01340"></a>01340 <span class="comment">//  // side planes</span>
<a name="l01341"></a>01341 <span class="comment">//  DXVEC3 vNorm = fr.fCosFOVX * fr.vRight - fr.fSinFOVX * fr.vDir;</span>
<a name="l01342"></a>01342 <span class="comment">//  if(D3DXVec3Dot(&amp;v, &amp;vNorm) &gt; o.vExtents.x * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vRight)) +</span>
<a name="l01343"></a>01343 <span class="comment">//              o.vExtents.y * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vUp)) +</span>
<a name="l01344"></a>01344 <span class="comment">//              o.vExtents.z * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vDir))) return false;</span>
<a name="l01345"></a>01345 <span class="comment">//</span>
<a name="l01346"></a>01346 <span class="comment">//  vNorm = -fr.fCosFOVX * fr.vRight - fr.fSinFOVX * fr.vDir;</span>
<a name="l01347"></a>01347 <span class="comment">//  if(D3DXVec3Dot(&amp;v, &amp;vNorm) &gt; o.vExtents.x * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vRight)) +</span>
<a name="l01348"></a>01348 <span class="comment">//              o.vExtents.y * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vUp)) +</span>
<a name="l01349"></a>01349 <span class="comment">//              o.vExtents.z * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vDir))) return false;</span>
<a name="l01350"></a>01350 <span class="comment">//</span>
<a name="l01351"></a>01351 <span class="comment">//  vNorm = fr.fCosFOVY * fr.vUp - fr.fSinFOVY * fr.vDir;</span>
<a name="l01352"></a>01352 <span class="comment">//  if(D3DXVec3Dot(&amp;v, &amp;vNorm) &gt; o.vExtents.x * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vRight)) +</span>
<a name="l01353"></a>01353 <span class="comment">//              o.vExtents.y * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vUp)) +</span>
<a name="l01354"></a>01354 <span class="comment">//              o.vExtents.z * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vDir))) return false;</span>
<a name="l01355"></a>01355 <span class="comment">//</span>
<a name="l01356"></a>01356 <span class="comment">//  vNorm = -fr.fCosFOVY * fr.vUp - fr.fSinFOVY * fr.vDir;</span>
<a name="l01357"></a>01357 <span class="comment">//  if(D3DXVec3Dot(&amp;v, &amp;vNorm) &gt; o.vExtents.x * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vRight)) +</span>
<a name="l01358"></a>01358 <span class="comment">//              o.vExtents.y * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vUp)) +</span>
<a name="l01359"></a>01359 <span class="comment">//              o.vExtents.z * fabsf(D3DXVec3Dot(&amp;vNorm, &amp;o.vDir))) return false;</span>
<a name="l01360"></a>01360 <span class="comment">//</span>
<a name="l01361"></a>01361 <span class="comment">//  vNorm.x = D3DXVec3Dot(&amp;v, &amp;fr.vDir);</span>
<a name="l01362"></a>01362 <span class="comment">//  vNorm.y = o.vExtents.x * fabsf(D3DXVec3Dot(&amp;fr.vDir, &amp;o.vRight)) +</span>
<a name="l01363"></a>01363 <span class="comment">//                  o.vExtents.y * fabsf(D3DXVec3Dot(&amp;fr.vDir, &amp;o.vUp)) +</span>
<a name="l01364"></a>01364 <span class="comment">//                  o.vExtents.z * fabsf(D3DXVec3Dot(&amp;fr.vDir, &amp;o.vDir));</span>
<a name="l01365"></a>01365 <span class="comment">//</span>
<a name="l01366"></a>01366 <span class="comment">//  if( (vNorm.x &lt; fr.fNear - vNorm.y) || (vNorm.x &gt; fr.fFar + vNorm.y) ) return false;</span>
<a name="l01367"></a>01367 <span class="comment">//</span>
<a name="l01368"></a>01368 <span class="comment">//  return true;</span>
<a name="l01369"></a>01369 <span class="comment">//}</span>
<a name="l01370"></a>01370 
<a name="l01373"></a>01373 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01374"></a><a class="code" href="group__geometric__primitives.html#gadda8d6c416e9ccfdbaf22e6755929e7e">01374</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__geometric__primitives.html#gadda8d6c416e9ccfdbaf22e6755929e7e" title="Test collision of an oriented bounding box and a frustum.">IsOBBinFrustum</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a>&amp; o, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html" title="A pyramid with its vertex clipped.">frustum&lt;T&gt;</a>&amp; fr)
<a name="l01375"></a>01375 {
<a name="l01376"></a>01376     <span class="comment">// check OBB against all 6 planes</span>
<a name="l01377"></a>01377     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v = o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a> - fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>;
<a name="l01378"></a>01378     <span class="comment">// if v lies on the left or bottom sides of the frustrum</span>
<a name="l01379"></a>01379     <span class="comment">// then freflect about the planes to get it on the right and</span>
<a name="l01380"></a>01380     <span class="comment">// top sides</span>
<a name="l01381"></a>01381     <span class="comment">// side planes</span>
<a name="l01382"></a>01382     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> vNorm = fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a383150aa997b64c06bd8a483342af2d2">fcosfovx</a> * fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a03eaac86e9a1081f590fefde96d049d8">right</a> - fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a8fe3f22ca5538dc41a0bfbb853f1140d">fsinfovx</a> * fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a358d165f685f7746473d110c6cfe7198">dir</a>;
<a name="l01383"></a>01383     <span class="keywordflow">if</span>( v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(vNorm) &gt; -o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>)) -  o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>)) -  o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>))) {
<a name="l01384"></a>01384         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01385"></a>01385     }
<a name="l01386"></a>01386     vNorm = -fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a383150aa997b64c06bd8a483342af2d2">fcosfovx</a> * fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a03eaac86e9a1081f590fefde96d049d8">right</a> - fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a8fe3f22ca5538dc41a0bfbb853f1140d">fsinfovx</a> * fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a358d165f685f7746473d110c6cfe7198">dir</a>;
<a name="l01387"></a>01387     <span class="keywordflow">if</span>(<a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a527c9a64311f7f2c2428d79acae6cbff">dot3</a>(v, vNorm) &gt; -o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>)) - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>)) - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>))) {
<a name="l01388"></a>01388         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01389"></a>01389     }
<a name="l01390"></a>01390     vNorm = fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a1c5077019a5b3c29e95c1ee3a8f1b4e4">fcosfovy</a> * fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a> - fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a0fedb83d9a1f775ab738dc8c5c938540">fsinfovy</a> * fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a358d165f685f7746473d110c6cfe7198">dir</a>;
<a name="l01391"></a>01391     <span class="keywordflow">if</span>(<a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a527c9a64311f7f2c2428d79acae6cbff">dot3</a>(v, vNorm) &gt; -o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>)) - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>)) - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>))) {
<a name="l01392"></a>01392         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01393"></a>01393     }
<a name="l01394"></a>01394     vNorm = -fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a1c5077019a5b3c29e95c1ee3a8f1b4e4">fcosfovy</a> * fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a> - fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a0fedb83d9a1f775ab738dc8c5c938540">fsinfovy</a> * fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a358d165f685f7746473d110c6cfe7198">dir</a>;
<a name="l01395"></a>01395     <span class="keywordflow">if</span>(<a class="code" href="namespaceOpenRAVE_1_1mathextra.html#a527c9a64311f7f2c2428d79acae6cbff">dot3</a>(v, vNorm) &gt; -o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>)) - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>)) - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>))) {
<a name="l01396"></a>01396         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01397"></a>01397     }
<a name="l01398"></a>01398     vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a358d165f685f7746473d110c6cfe7198">dir</a>);
<a name="l01399"></a>01399     vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a358d165f685f7746473d110c6cfe7198">dir</a>.dot3(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>)) +  o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a358d165f685f7746473d110c6cfe7198">dir</a>.dot3(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>)) +  o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a358d165f685f7746473d110c6cfe7198">dir</a>.dot3(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>));
<a name="l01400"></a>01400     <span class="keywordflow">if</span>( (vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> &lt; fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#ad511bbc6825e34fd66f43e620fd5de59">fnear</a> + vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>) || (vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> &gt; fr.<a class="code" href="classOpenRAVE_1_1geometry_1_1frustum.html#a6907422b3462622d8e76bdad88e2535b">ffar</a> - vNorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>) ) {
<a name="l01401"></a>01401         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01402"></a>01402     }
<a name="l01403"></a>01403     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01404"></a>01404 }
<a name="l01405"></a>01405 
<a name="l01406"></a>01406 <span class="comment">//bool AABBFrustumTest(const AABB&amp; a, const FRUSTUM&amp; fr)</span>
<a name="l01407"></a>01407 <span class="comment">//{</span>
<a name="l01408"></a>01408 <span class="comment">//  // check AABB against all 6 planes</span>
<a name="l01409"></a>01409 <span class="comment">//  DXVEC3 v = a.vPos - fr.vPos;</span>
<a name="l01410"></a>01410 <span class="comment">//</span>
<a name="l01411"></a>01411 <span class="comment">//  // if v lies on the left or bottom sides of the frustrum</span>
<a name="l01412"></a>01412 <span class="comment">//  // then freflect about the planes to get it on the right and</span>
<a name="l01413"></a>01413 <span class="comment">//  // top sides</span>
<a name="l01414"></a>01414 <span class="comment">//</span>
<a name="l01415"></a>01415 <span class="comment">//  // side planes</span>
<a name="l01416"></a>01416 <span class="comment">//  DXVEC3 vNorm = fr.fCosFOVX * fr.vRight - fr.fSinFOVX * fr.vDir;</span>
<a name="l01417"></a>01417 <span class="comment">//  if(D3DXVec3Dot(&amp;v, &amp;vNorm) &gt; a.vExtents.x * fabsf(vNorm.x) +</span>
<a name="l01418"></a>01418 <span class="comment">//      a.vExtents.y * fabsf(vNorm.y) + a.vExtents.z * fabsf(vNorm.z)) return false;</span>
<a name="l01419"></a>01419 <span class="comment">//</span>
<a name="l01420"></a>01420 <span class="comment">//  vNorm = -fr.fCosFOVX * fr.vRight - fr.fSinFOVX * fr.vDir;</span>
<a name="l01421"></a>01421 <span class="comment">//  if(D3DXVec3Dot(&amp;v, &amp;vNorm) &gt; a.vExtents.x * fabsf(vNorm.x) +</span>
<a name="l01422"></a>01422 <span class="comment">//      a.vExtents.y * fabsf(vNorm.y) + a.vExtents.z * fabsf(vNorm.z)) return false;</span>
<a name="l01423"></a>01423 <span class="comment">//</span>
<a name="l01424"></a>01424 <span class="comment">//  vNorm = fr.fCosFOVY * fr.vUp - fr.fSinFOVY * fr.vDir;</span>
<a name="l01425"></a>01425 <span class="comment">//  if(D3DXVec3Dot(&amp;v, &amp;vNorm) &gt; a.vExtents.x * fabsf(vNorm.x) +</span>
<a name="l01426"></a>01426 <span class="comment">//      a.vExtents.y * fabsf(vNorm.y) + a.vExtents.z * fabsf(vNorm.z)) return false;</span>
<a name="l01427"></a>01427 <span class="comment">//</span>
<a name="l01428"></a>01428 <span class="comment">//  vNorm = -fr.fCosFOVY * fr.vUp - fr.fSinFOVY * fr.vDir;</span>
<a name="l01429"></a>01429 <span class="comment">//  if(D3DXVec3Dot(&amp;v, &amp;vNorm) &gt; a.vExtents.x * fabsf(vNorm.x) +</span>
<a name="l01430"></a>01430 <span class="comment">//      a.vExtents.y * fabsf(vNorm.y) + a.vExtents.z * fabsf(vNorm.z)) return false;</span>
<a name="l01431"></a>01431 <span class="comment">//</span>
<a name="l01432"></a>01432 <span class="comment">//  vNorm.x = D3DXVec3Dot(&amp;v, &amp;fr.vDir);</span>
<a name="l01433"></a>01433 <span class="comment">//  vNorm.y = a.vExtents.x * fabsf(fr.vDir.x) + a.vExtents.y * fabsf(fr.vDir.y) +</span>
<a name="l01434"></a>01434 <span class="comment">//              a.vExtents.z * fabsf(fr.vDir.z);</span>
<a name="l01435"></a>01435 <span class="comment">//</span>
<a name="l01436"></a>01436 <span class="comment">//  if( (vNorm.x &lt; fr.fNear - vNorm.y) || (vNorm.x &gt; fr.fFar + vNorm.y) ) return false;</span>
<a name="l01437"></a>01437 <span class="comment">//</span>
<a name="l01438"></a>01438 <span class="comment">//  return true;</span>
<a name="l01439"></a>01439 <span class="comment">//}</span>
<a name="l01440"></a>01440 
<a name="l01445"></a>01445 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;
<a name="l01446"></a><a class="code" href="group__geometric__primitives.html#ga0d29be0998203e5a7b521ccb728533f6">01446</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__geometric__primitives.html#ga0d29be0998203e5a7b521ccb728533f6" title="Tests if an oriented bounding box is inside a 3D convex hull.">IsOBBinConvexHull</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a>&amp; o, <span class="keyword">const</span> U&amp; vplanes)
<a name="l01447"></a>01447 {
<a name="l01448"></a>01448     <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; vplanes.size(); ++i) {
<a name="l01449"></a>01449         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> vplane = vplanes[i];
<a name="l01450"></a>01450         <span class="keywordflow">if</span>( o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>.dot3(vplane)+vplane.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> &lt; o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vplane.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>)) + o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vplane.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>)) + o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z * <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vplane.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>))) {
<a name="l01451"></a>01451             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01452"></a>01452         }
<a name="l01453"></a>01453     }
<a name="l01454"></a>01454     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01455"></a>01455 }
<a name="l01456"></a>01456 
<a name="l01457"></a>01457 <span class="comment">//bool SphereSphereTest(const SPHERE&amp; s1, const SPHERE&amp; s2)</span>
<a name="l01458"></a>01458 <span class="comment">//{</span>
<a name="l01459"></a>01459 <span class="comment">//  return ( (s1.fRadius + s2.fRadius) * (s1.fRadius + s2.fRadius) &gt;</span>
<a name="l01460"></a>01460 <span class="comment">//      D3DXVec3LengthSq(&amp;DXVEC3(s1.vPos - s2.vPos)) );</span>
<a name="l01461"></a>01461 <span class="comment">//}</span>
<a name="l01462"></a>01462 <span class="comment">//</span>
<a name="l01463"></a>01463 <span class="comment">//bool SphereConeTest(const SPHERE&amp; s, const CONE&amp; c)</span>
<a name="l01464"></a>01464 <span class="comment">//{</span>
<a name="l01465"></a>01465 <span class="comment">//  // first check if SPHERE is anywhere near the vertes</span>
<a name="l01466"></a>01466 <span class="comment">//  DXVEC3 v = s.vPos - c.vVertex;</span>
<a name="l01467"></a>01467 <span class="comment">//  float fLengthSq = D3DXVec3LengthSq(&amp;v);</span>
<a name="l01468"></a>01468 <span class="comment">//</span>
<a name="l01469"></a>01469 <span class="comment">//  if( fLengthSq &lt; s.fRadius * s.fRadius ) return true;</span>
<a name="l01470"></a>01470 <span class="comment">//</span>
<a name="l01471"></a>01471 <span class="comment">//  // check if SPHERE center inside CONE</span>
<a name="l01472"></a>01472 <span class="comment">//  float fDot = D3DXVec3Dot(&amp;v, &amp;c.vDir);</span>
<a name="l01473"></a>01473 <span class="comment">//  if(fDot &lt; 0.0f || fDot &gt; c.fLength + s.fRadius) return false;</span>
<a name="l01474"></a>01474 <span class="comment">//</span>
<a name="l01475"></a>01475 <span class="comment">//  float fDotSq = fDot * fDot;</span>
<a name="l01476"></a>01476 <span class="comment">//  if(fDotSq &gt; c.fCosAng * c.fCosAng * fLengthSq) return true;</span>
<a name="l01477"></a>01477 <span class="comment">//</span>
<a name="l01478"></a>01478 <span class="comment">//  // SPHERE can touch edge of CONE</span>
<a name="l01479"></a>01479 <span class="comment">//  // take the PLANE with the SPHERE center and vDir. From there</span>
<a name="l01480"></a>01480 <span class="comment">//  // a right triangle can form, with fLength as the hypotenuse,</span>
<a name="l01481"></a>01481 <span class="comment">//  // the CONE&#39;s edge as one of the sides, and a perpendicular line</span>
<a name="l01482"></a>01482 <span class="comment">//  // from the CONE&#39;s edge to the SPHERE&#39;s center. If we can figure out</span>
<a name="l01483"></a>01483 <span class="comment">//  // the distance along the CONE&#39;s edge, then we can measure if a valid</span>
<a name="l01484"></a>01484 <span class="comment">//  // triangle forms</span>
<a name="l01485"></a>01485 <span class="comment">//</span>
<a name="l01486"></a>01486 <span class="comment">//  float fTest = c.fSinAng * sqrtf(fLengthSq - fDotSq) + c.fCosAng * fDot;</span>
<a name="l01487"></a>01487 <span class="comment">//</span>
<a name="l01488"></a>01488 <span class="comment">//  float fSide = c.fLength / c.fCosAng;</span>
<a name="l01489"></a>01489 <span class="comment">//  if( fTest &gt; fSide ) {</span>
<a name="l01490"></a>01490 <span class="comment">//      // beyond the base of the cone, so check edge</span>
<a name="l01491"></a>01491 <span class="comment">//      fLengthSq -= fTest * fTest;</span>
<a name="l01492"></a>01492 <span class="comment">//      fTest -= fSide;</span>
<a name="l01493"></a>01493 <span class="comment">//      return fLengthSq + fTest*fTest &lt; s.fRadius * s.fRadius;</span>
<a name="l01494"></a>01494 <span class="comment">//  }</span>
<a name="l01495"></a>01495 <span class="comment">//</span>
<a name="l01496"></a>01496 <span class="comment">//  return (fTest * fTest + s.fRadius * s.fRadius - fLengthSq) &gt;= 0.0f;</span>
<a name="l01497"></a>01497 <span class="comment">//}</span>
<a name="l01498"></a>01498 <span class="comment">//</span>
<a name="l01499"></a>01499 <span class="comment">//bool SphereFrustumTest(const SPHERE&amp; s, const FRUSTUM&amp; fr)</span>
<a name="l01500"></a>01500 <span class="comment">//{</span>
<a name="l01501"></a>01501 <span class="comment">//  DXVEC3 v = s.vPos - fr.vPos;</span>
<a name="l01502"></a>01502 <span class="comment">//  DXVEC3 vproj;</span>
<a name="l01503"></a>01503 <span class="comment">//  vproj.x = D3DXVec3Dot(&amp;v, &amp;fr.vRight);</span>
<a name="l01504"></a>01504 <span class="comment">//  vproj.y = D3DXVec3Dot(&amp;v, &amp;fr.vUp);</span>
<a name="l01505"></a>01505 <span class="comment">//  vproj.z = D3DXVec3Dot(&amp;v, &amp;fr.vDir);</span>
<a name="l01506"></a>01506 <span class="comment">//</span>
<a name="l01507"></a>01507 <span class="comment">//  if( vproj.x * fr.fCosFOVX - vproj.z * fr.fSinFOVX &gt; s.fRadius ||</span>
<a name="l01508"></a>01508 <span class="comment">//      -vproj.x * fr.fCosFOVX - vproj.z * fr.fSinFOVX &gt; s.fRadius ||</span>
<a name="l01509"></a>01509 <span class="comment">//      vproj.y * fr.fCosFOVY - vproj.z * fr.fSinFOVY &gt; s.fRadius ||</span>
<a name="l01510"></a>01510 <span class="comment">//      vproj.y * fr.fCosFOVY - vproj.z * fr.fSinFOVY &gt; s.fRadius ||</span>
<a name="l01511"></a>01511 <span class="comment">//      vproj.z &lt; fr.fNear - s.fRadius || vproj.z &gt; fr.fFar + s.fRadius ) return false;</span>
<a name="l01512"></a>01512 <span class="comment">//</span>
<a name="l01513"></a>01513 <span class="comment">//  return true;</span>
<a name="l01514"></a>01514 <span class="comment">//}</span>
<a name="l01515"></a>01515 
<a name="l01522"></a>01522 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01523"></a><a class="code" href="group__geometric__primitives.html#ga07425830ea25e001f8682da7f2504875">01523</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__geometric__primitives.html#ga07425830ea25e001f8682da7f2504875" title="Test collision if two 3D triangles.Assuming triangle vertices are declared counter-clockwise!!...">TriTriCollision</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; u1, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; u2, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; u3, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; v1, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; v2, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; v3, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; contactpos, <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; contactnorm)
<a name="l01524"></a>01524 {
<a name="l01525"></a>01525     <span class="comment">// triangle triangle collision test - by Rosen Diankov</span>
<a name="l01526"></a>01526 
<a name="l01527"></a>01527     <span class="comment">// first see if the faces intersect the planes</span>
<a name="l01528"></a>01528     <span class="comment">// for the face to be intersecting the plane, one of its</span>
<a name="l01529"></a>01529     <span class="comment">// vertices must be on the opposite side of the plane</span>
<a name="l01530"></a>01530     <span class="keywordtype">char</span> b = 0;
<a name="l01531"></a>01531     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> u12 = u2 - u1,                u31 = u1 - u3;
<a name="l01532"></a>01532     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v12 = v2 - v1, v23 = v3 - v2, v31 = v1 - v3;
<a name="l01533"></a>01533     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> vedges[3] = { v12, v23, v31};
<a name="l01534"></a>01534     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> unorm, vnorm;
<a name="l01535"></a>01535     unorm = u31.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aaa077ecf3366c176cf3f108dfe56434b" title="3 dim cross product, w is not touched">cross</a>(u12);
<a name="l01536"></a>01536     unorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = -unorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(u1);
<a name="l01537"></a>01537     vnorm = v31.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aaa077ecf3366c176cf3f108dfe56434b" title="3 dim cross product, w is not touched">cross</a>(v12);
<a name="l01538"></a>01538     vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> = -vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(v1);
<a name="l01539"></a>01539     <span class="keywordflow">if</span>( vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(u1) + vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> &gt; 0 ) {
<a name="l01540"></a>01540         b |= 1;
<a name="l01541"></a>01541     }
<a name="l01542"></a>01542     <span class="keywordflow">if</span>( vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(u2) + vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> &gt; 0 ) {
<a name="l01543"></a>01543         b |= 2;
<a name="l01544"></a>01544     }
<a name="l01545"></a>01545     <span class="keywordflow">if</span>( vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(u3) + vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a> &gt; 0 ) {
<a name="l01546"></a>01546         b |= 4;
<a name="l01547"></a>01547     }
<a name="l01548"></a>01548     <span class="keywordflow">if</span>((b == 7)||(b == 0)) {
<a name="l01549"></a>01549         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01550"></a>01550     }
<a name="l01551"></a>01551     <span class="comment">// now get segment from f1 when it crosses f2&#39;s plane</span>
<a name="l01552"></a>01552     <span class="comment">// note that b gives us information on which edges actually intersected</span>
<a name="l01553"></a>01553     <span class="comment">// so figure out the point that is alone on one side of the plane</span>
<a name="l01554"></a>01554     <span class="comment">// then get the segment</span>
<a name="l01555"></a>01555     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> p1, p2;
<a name="l01556"></a>01556     <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>* pu=NULL;
<a name="l01557"></a>01557     <span class="keywordflow">switch</span>(b) {
<a name="l01558"></a>01558     <span class="keywordflow">case</span> 1:
<a name="l01559"></a>01559     <span class="keywordflow">case</span> 6:
<a name="l01560"></a>01560         pu = &amp;u1;
<a name="l01561"></a>01561         p1 = u2 - u1;
<a name="l01562"></a>01562         p2 = u3 - u1;
<a name="l01563"></a>01563         <span class="keywordflow">break</span>;
<a name="l01564"></a>01564     <span class="keywordflow">case</span> 2:
<a name="l01565"></a>01565     <span class="keywordflow">case</span> 5:
<a name="l01566"></a>01566         pu = &amp;u2;
<a name="l01567"></a>01567         p1 = u1 - u2;
<a name="l01568"></a>01568         p2 = u3 - u2;
<a name="l01569"></a>01569         <span class="keywordflow">break</span>;
<a name="l01570"></a>01570     <span class="keywordflow">case</span> 4:
<a name="l01571"></a>01571     <span class="keywordflow">case</span> 3:
<a name="l01572"></a>01572         pu = &amp;u3;
<a name="l01573"></a>01573         p1 = u1 - u3;
<a name="l01574"></a>01574         p2 = u2 - u3;
<a name="l01575"></a>01575         <span class="keywordflow">break</span>;
<a name="l01576"></a>01576     }
<a name="l01577"></a>01577 
<a name="l01578"></a>01578     T t = vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(*pu)+vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1f674fe143a2d9ef4de90e3ccb8a0373">w</a>;
<a name="l01579"></a>01579     p1 = *pu - p1 * (t / vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(p1));
<a name="l01580"></a>01580     p2 = *pu - p2 * (t / vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(p2));
<a name="l01581"></a>01581 
<a name="l01582"></a>01582     <span class="comment">// go through each of the segments in v2 and clip</span>
<a name="l01583"></a>01583     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> vcross;
<a name="l01584"></a>01584     <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>* pv[] = { &amp;v1, &amp;v2, &amp;v3, &amp;v1};
<a name="l01585"></a>01585 
<a name="l01586"></a>01586     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; ++i) {
<a name="l01587"></a>01587         <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>* pprev = pv[i];
<a name="l01588"></a>01588         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> q1 = p1 - *pprev;
<a name="l01589"></a>01589         <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> q2 = p2 - *pprev;
<a name="l01590"></a>01590         vcross = vedges[i].<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aaa077ecf3366c176cf3f108dfe56434b" title="3 dim cross product, w is not touched">cross</a>(vnorm);
<a name="l01591"></a>01591         T t1 = q1.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(vcross);
<a name="l01592"></a>01592         T t2 = q2.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(vcross);
<a name="l01593"></a>01593 
<a name="l01594"></a>01594         <span class="comment">// line segment is out of face</span>
<a name="l01595"></a>01595         <span class="keywordflow">if</span>((t1 &gt;= 0)&amp;&amp;(t2 &gt;= 0)) {
<a name="l01596"></a>01596             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01597"></a>01597         }
<a name="l01598"></a>01598         <span class="keywordflow">if</span>((t1 &gt; 0)&amp;&amp;(t2 &lt; 0)) {
<a name="l01599"></a>01599             <span class="comment">// keep second point, clip first</span>
<a name="l01600"></a>01600             <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> dq = q2-q1;
<a name="l01601"></a>01601             p1 -= dq*(t1/dq.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(vcross));
<a name="l01602"></a>01602         }
<a name="l01603"></a>01603         <span class="keywordflow">else</span> <span class="keywordflow">if</span>((t1 &lt; 0)&amp;&amp;(t2 &gt; 0)) {
<a name="l01604"></a>01604             <span class="comment">// keep first point, clip second</span>
<a name="l01605"></a>01605             <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> dq = q1-q2;
<a name="l01606"></a>01606             p2 -= dq*(t2/dq.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(vcross));
<a name="l01607"></a>01607         }
<a name="l01608"></a>01608     }
<a name="l01609"></a>01609 
<a name="l01610"></a>01610     contactpos = 0.5f * (p1 + p2);
<a name="l01611"></a>01611     contactnorm = vnorm.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab106728f86e55650e15d636d903da9b8">normalize3</a>();
<a name="l01612"></a>01612     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01613"></a>01613 }
<a name="l01614"></a>01614 
<a name="l01619"></a>01619 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01620"></a><a class="code" href="group__geometric__primitives.html#ga1aaf2360c518e6a9106315a87aaec95d">01620</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a> <a class="code" href="group__geometric__primitives.html#ga1aaf2360c518e6a9106315a87aaec95d" title="Transform an axis aligned bounding box to an oriented bounding box.">OBBFromAABB</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html" title="An axis aligned bounding box.">aabb&lt;T&gt;</a>&amp; ab, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp; t)
<a name="l01621"></a>01621 {
<a name="l01622"></a>01622     <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a> o;
<a name="l01623"></a>01623     o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[0],t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[4],t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[8]);
<a name="l01624"></a>01624     o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[1],t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[5],t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[9]);
<a name="l01625"></a>01625     o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a> = <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>(t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[2],t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[6],t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acb4433f3f4564fe3bda155f5ca6d241b">m</a>[10]);
<a name="l01626"></a>01626     o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a> = t*ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>;
<a name="l01627"></a>01627     o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a> = ab.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>;
<a name="l01628"></a>01628     <span class="keywordflow">return</span> o;
<a name="l01629"></a>01629 }
<a name="l01630"></a>01630 
<a name="l01635"></a>01635 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01636"></a><a class="code" href="group__geometric__primitives.html#ga645564c4c561b14b14b90d6d02c0e766">01636</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a> <a class="code" href="group__geometric__primitives.html#ga1aaf2360c518e6a9106315a87aaec95d" title="Transform an axis aligned bounding box to an oriented bounding box.">OBBFromAABB</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html" title="An axis aligned bounding box.">aabb&lt;T&gt;</a>&amp; ab, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a>&amp; t)
<a name="l01637"></a>01637 {
<a name="l01638"></a>01638     <span class="keywordflow">return</span> <a class="code" href="group__geometric__primitives.html#ga1aaf2360c518e6a9106315a87aaec95d" title="Transform an axis aligned bounding box to an oriented bounding box.">OBBFromAABB</a>(ab,<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>(t));
<a name="l01639"></a>01639 }
<a name="l01640"></a>01640 
<a name="l01645"></a>01645 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01646"></a><a class="code" href="group__geometric__primitives.html#ga94bf61739c3a0110d5230da07bde8b37">01646</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a> <a class="code" href="group__geometric__primitives.html#ga94bf61739c3a0110d5230da07bde8b37" title="Transforms an oriented bounding box.">TransformOBB</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html" title="Affine transformation parameterized with quaterions.">RaveTransform&lt;T&gt;</a>&amp; t, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a>&amp; o)
<a name="l01647"></a>01647 {
<a name="l01648"></a>01648     <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a> newobb;
<a name="l01649"></a>01649     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a> = o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>;
<a name="l01650"></a>01650     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a> = t*o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>;
<a name="l01651"></a>01651     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a1a50fdbaa13ce6896da2e56679edf765" title="transform a vector by the rotation component only">rotate</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>);
<a name="l01652"></a>01652     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a1a50fdbaa13ce6896da2e56679edf765" title="transform a vector by the rotation component only">rotate</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>);
<a name="l01653"></a>01653     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransform.html#a1a50fdbaa13ce6896da2e56679edf765" title="transform a vector by the rotation component only">rotate</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>);
<a name="l01654"></a>01654     <span class="keywordflow">return</span> newobb;
<a name="l01655"></a>01655 }
<a name="l01656"></a>01656 
<a name="l01661"></a>01661 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01662"></a><a class="code" href="group__geometric__primitives.html#ga588d811884a84cddef8910f749dc5aee">01662</a> <span class="keyword">inline</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a> <a class="code" href="group__geometric__primitives.html#ga94bf61739c3a0110d5230da07bde8b37" title="Transforms an oriented bounding box.">TransformOBB</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html" title="Affine transformation parameterized with rotation matrices. Scales and shears are...">RaveTransformMatrix&lt;T&gt;</a>&amp; t, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a>&amp; o)
<a name="l01663"></a>01663 {
<a name="l01664"></a>01664     <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a> newobb;
<a name="l01665"></a>01665     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a> = o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>;
<a name="l01666"></a>01666     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a> = t*o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>;
<a name="l01667"></a>01667     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acdc1c724a7b4327a4dda60aebbf1081d">rotate</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>);
<a name="l01668"></a>01668     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acdc1c724a7b4327a4dda60aebbf1081d">rotate</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>);
<a name="l01669"></a>01669     newobb.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a> = t.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveTransformMatrix.html#acdc1c724a7b4327a4dda60aebbf1081d">rotate</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>);
<a name="l01670"></a>01670     <span class="keywordflow">return</span> newobb;
<a name="l01671"></a>01671 }
<a name="l01672"></a>01672 
<a name="l01674"></a>01674 <span class="comment">//void AABBFromOBB(const OBB&amp; obb, DXVEC3&amp; vMin, DXVEC3&amp; vMax)</span>
<a name="l01675"></a>01675 <span class="comment">//{</span>
<a name="l01676"></a>01676 <span class="comment">//  vMax.x = fabsf(obb.vRight.x) * obb.vExtents.x + fabsf(obb.vUp.x) * obb.vExtents.y + fabsf(obb.vDir.x) * obb.vExtents.z;</span>
<a name="l01677"></a>01677 <span class="comment">//  vMax.y = fabsf(obb.vRight.y) * obb.vExtents.x + fabsf(obb.vUp.y) * obb.vExtents.y + fabsf(obb.vDir.y) * obb.vExtents.z;</span>
<a name="l01678"></a>01678 <span class="comment">//  vMax.z = fabsf(obb.vRight.z) * obb.vExtents.x + fabsf(obb.vUp.z) * obb.vExtents.y + fabsf(obb.vDir.z) * obb.vExtents.z;</span>
<a name="l01679"></a>01679 <span class="comment">//</span>
<a name="l01680"></a>01680 <span class="comment">//  vMin = obb.vPos - vMax;</span>
<a name="l01681"></a>01681 <span class="comment">//  vMax += obb.vPos;</span>
<a name="l01682"></a>01682 <span class="comment">//}</span>
<a name="l01683"></a>01683 
<a name="l01687"></a>01687 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l01688"></a><a class="code" href="group__geometric__primitives.html#gaa3201f1b56aca79d1fd12499f5c66e50">01688</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group__geometric__primitives.html#gaa3201f1b56aca79d1fd12499f5c66e50" title="projects an obb along the world axes">AABBCollision</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html" title="An axis aligned bounding box.">aabb&lt;T&gt;</a>&amp; ab1, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html" title="An axis aligned bounding box.">aabb&lt;T&gt;</a>&amp; ab2)
<a name="l01689"></a>01689 {
<a name="l01690"></a>01690     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> v = ab1.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>-ab2.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>;
<a name="l01691"></a>01691     <span class="keywordflow">return</span> <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>) &lt;= ab1.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x+ab2.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x &amp;&amp; <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>) &lt;= ab1.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y+ab2.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y &amp;&amp; <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(v.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>) &lt;= ab1.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z+ab2.<a class="code" href="classOpenRAVE_1_1geometry_1_1aabb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z;
<a name="l01692"></a>01692 }
<a name="l01693"></a>01693 
<a name="l01694"></a>01694 <span class="comment">//bool AABBOBBTest(const AABB&amp; a, const OBB&amp; o)</span>
<a name="l01695"></a>01695 <span class="comment">//{</span>
<a name="l01696"></a>01696 <span class="comment">//  DXVEC3 vd = o.vPos - a.vPos;</span>
<a name="l01697"></a>01697 <span class="comment">//  float r01, r;</span>
<a name="l01698"></a>01698 <span class="comment">//</span>
<a name="l01699"></a>01699 <span class="comment">//  // test the 3 axes of the AABB</span>
<a name="l01700"></a>01700 <span class="comment">//</span>
<a name="l01701"></a>01701 <span class="comment">//  // A0</span>
<a name="l01702"></a>01702 <span class="comment">//  if(a.vExtents.x + o.vExtents.x * fabsf(o.vRight.x) + o.vExtents.y * fabsf(o.vUp.x) +</span>
<a name="l01703"></a>01703 <span class="comment">//      o.vExtents.z * fabsf(o.vDir.x) &lt; fabsf(vd.x)) return false;</span>
<a name="l01704"></a>01704 <span class="comment">//  // A1</span>
<a name="l01705"></a>01705 <span class="comment">//  if(a.vExtents.y + o.vExtents.x * fabsf(o.vRight.y) + o.vExtents.y * fabsf(o.vUp.y) +</span>
<a name="l01706"></a>01706 <span class="comment">//      o.vExtents.z * fabsf(o.vDir.y) &lt; fabsf(vd.y)) return false;</span>
<a name="l01707"></a>01707 <span class="comment">//  // A2</span>
<a name="l01708"></a>01708 <span class="comment">//  if(a.vExtents.z + o.vExtents.x * fabsf(o.vRight.z) + o.vExtents.y * fabsf(o.vUp.z) +</span>
<a name="l01709"></a>01709 <span class="comment">//      o.vExtents.z * fabsf(o.vDir.z) &lt; fabsf(vd.z)) return false;</span>
<a name="l01710"></a>01710 <span class="comment">//</span>
<a name="l01711"></a>01711 <span class="comment">//  // test the 3 axes of the OBB</span>
<a name="l01712"></a>01712 <span class="comment">//</span>
<a name="l01713"></a>01713 <span class="comment">//  // B0</span>
<a name="l01714"></a>01714 <span class="comment">//  if(a.vExtents.x * fabsf(o.vRight.x) + a.vExtents.y * fabsf(o.vRight.y) +</span>
<a name="l01715"></a>01715 <span class="comment">//      a.vExtents.z * fabsf(o.vRight.z) + o.vExtents.x &lt;</span>
<a name="l01716"></a>01716 <span class="comment">//      fabsf(D3DXVec3Dot(&amp;o.vRight, &amp;vd)) ) return false;</span>
<a name="l01717"></a>01717 <span class="comment">//  // B1</span>
<a name="l01718"></a>01718 <span class="comment">//  if(a.vExtents.x * fabsf(o.vUp.x) + a.vExtents.y * fabsf(o.vUp.y) +</span>
<a name="l01719"></a>01719 <span class="comment">//      a.vExtents.z * fabsf(o.vUp.z) + o.vExtents.y &lt;</span>
<a name="l01720"></a>01720 <span class="comment">//      fabsf(D3DXVec3Dot(&amp;o.vUp, &amp;vd)) ) return false;</span>
<a name="l01721"></a>01721 <span class="comment">//  // B2</span>
<a name="l01722"></a>01722 <span class="comment">//  if(a.vExtents.x * fabsf(o.vDir.x) + a.vExtents.y * fabsf(o.vDir.y) +</span>
<a name="l01723"></a>01723 <span class="comment">//      a.vExtents.z * fabsf(o.vDir.z) + o.vExtents.z &lt;</span>
<a name="l01724"></a>01724 <span class="comment">//      fabsf(D3DXVec3Dot(&amp;o.vDir, &amp;vd)) ) return false;</span>
<a name="l01725"></a>01725 <span class="comment">//</span>
<a name="l01726"></a>01726 <span class="comment">//  // test the 9 different cross products (from different combinations of the axes)</span>
<a name="l01727"></a>01727 <span class="comment">//  // A0 x B0   (0, -b0.z, b0.y)</span>
<a name="l01728"></a>01728 <span class="comment">//  r01 = a.vExtents.y * fabsf(o.vRight.z) + a.vExtents.z * fabsf(o.vRight.y) +</span>
<a name="l01729"></a>01729 <span class="comment">//      o.vExtents.y * fabsf(o.vDir.x) + o.vExtents.z * fabsf(o.vUp.x);</span>
<a name="l01730"></a>01730 <span class="comment">//  r = fabsf( o.vRight.y * vd.z - o.vRight.z * vd.y);</span>
<a name="l01731"></a>01731 <span class="comment">//  if(r01 &lt; r) return false;</span>
<a name="l01732"></a>01732 <span class="comment">//</span>
<a name="l01733"></a>01733 <span class="comment">//  // A0 x B1 (0, -b1.z, b1.y)</span>
<a name="l01734"></a>01734 <span class="comment">//  r01 = a.vExtents.y * fabsf(o.vUp.z) + a.vExtents.z * fabsf(o.vUp.y) +</span>
<a name="l01735"></a>01735 <span class="comment">//      o.vExtents.x * fabsf(o.vDir.x) + o.vExtents.z * fabsf(o.vRight.x);</span>
<a name="l01736"></a>01736 <span class="comment">//  r = fabsf( o.vUp.y * vd.z - o.vUp.z * vd.y);</span>
<a name="l01737"></a>01737 <span class="comment">//  if(r01 &lt; r) return false;</span>
<a name="l01738"></a>01738 <span class="comment">//</span>
<a name="l01739"></a>01739 <span class="comment">//  // A0 x B2 (0, -b2.z, b2.y)</span>
<a name="l01740"></a>01740 <span class="comment">//  r01 = a.vExtents.y * fabsf(o.vDir.z) + a.vExtents.z * fabsf(o.vDir.y) +</span>
<a name="l01741"></a>01741 <span class="comment">//      o.vExtents.x * fabsf(o.vUp.x) + o.vExtents.y * fabsf(o.vRight.x);</span>
<a name="l01742"></a>01742 <span class="comment">//  r = fabsf( o.vDir.y * vd.z - o.vDir.z * vd.y);</span>
<a name="l01743"></a>01743 <span class="comment">//  if(r01 &lt; r) return false;</span>
<a name="l01744"></a>01744 <span class="comment">//</span>
<a name="l01745"></a>01745 <span class="comment">//  // A1 x B0 (b0.z, 0, -b0.x)</span>
<a name="l01746"></a>01746 <span class="comment">//  r01 = a.vExtents.x * fabsf(o.vRight.z) + a.vExtents.z * fabsf(o.vRight.x) +</span>
<a name="l01747"></a>01747 <span class="comment">//      o.vExtents.y * fabsf(o.vDir.y) + o.vExtents.z * fabsf(o.vUp.y);</span>
<a name="l01748"></a>01748 <span class="comment">//  r = fabsf( o.vRight.z * vd.x - o.vRight.x * vd.z);</span>
<a name="l01749"></a>01749 <span class="comment">//  if(r01 &lt; r) return false;</span>
<a name="l01750"></a>01750 <span class="comment">//</span>
<a name="l01751"></a>01751 <span class="comment">//  // A1 x B1 (b1.z, 0, -b1.x)</span>
<a name="l01752"></a>01752 <span class="comment">//  r01 = a.vExtents.x * fabsf(o.vUp.z) + a.vExtents.z * fabsf(o.vUp.x) +</span>
<a name="l01753"></a>01753 <span class="comment">//      o.vExtents.x * fabsf(o.vDir.y) + o.vExtents.z * fabsf(o.vRight.y);</span>
<a name="l01754"></a>01754 <span class="comment">//  r = fabsf( o.vUp.z * vd.x - o.vUp.x * vd.z);</span>
<a name="l01755"></a>01755 <span class="comment">//  if(r01 &lt; r) return false;</span>
<a name="l01756"></a>01756 <span class="comment">//</span>
<a name="l01757"></a>01757 <span class="comment">//  // A1 x B2 (b2.z, 0, -b2.x)</span>
<a name="l01758"></a>01758 <span class="comment">//  r01 = a.vExtents.x * fabsf(o.vDir.z) + a.vExtents.z * fabsf(o.vDir.x) +</span>
<a name="l01759"></a>01759 <span class="comment">//      o.vExtents.x * fabsf(o.vUp.y) + o.vExtents.y * fabsf(o.vRight.y);</span>
<a name="l01760"></a>01760 <span class="comment">//  r = fabsf( o.vDir.z * vd.x - o.vDir.x * vd.z);</span>
<a name="l01761"></a>01761 <span class="comment">//  if(r01 &lt; r) return false;</span>
<a name="l01762"></a>01762 <span class="comment">//</span>
<a name="l01763"></a>01763 <span class="comment">//  // A2 x B0 (-b0.y, b0.x, 0)</span>
<a name="l01764"></a>01764 <span class="comment">//  r01 = a.vExtents.x * fabsf(o.vRight.y) + a.vExtents.y * fabsf(o.vRight.x) +</span>
<a name="l01765"></a>01765 <span class="comment">//      o.vExtents.y * fabsf(o.vDir.z) + o.vExtents.z * fabsf(o.vUp.z);</span>
<a name="l01766"></a>01766 <span class="comment">//  r = fabsf( o.vRight.x * vd.y - o.vRight.y * vd.x);</span>
<a name="l01767"></a>01767 <span class="comment">//  if(r01 &lt; r) return false;</span>
<a name="l01768"></a>01768 <span class="comment">//</span>
<a name="l01769"></a>01769 <span class="comment">//  // A2 x B1 (-b1.y, b1.x, 0)</span>
<a name="l01770"></a>01770 <span class="comment">//  r01 = a.vExtents.x * fabsf(o.vUp.y) + a.vExtents.y * fabsf(o.vUp.x) +</span>
<a name="l01771"></a>01771 <span class="comment">//      o.vExtents.x * fabsf(o.vDir.z) + o.vExtents.z * fabsf(o.vRight.z);</span>
<a name="l01772"></a>01772 <span class="comment">//  r = fabsf( o.vUp.x * vd.y - o.vUp.y * vd.x);</span>
<a name="l01773"></a>01773 <span class="comment">//  if(r01 &lt; r) return false;</span>
<a name="l01774"></a>01774 <span class="comment">//</span>
<a name="l01775"></a>01775 <span class="comment">//  // A2 x B2 (-b2.y, b2.x, 0)</span>
<a name="l01776"></a>01776 <span class="comment">//  r01 = a.vExtents.x * fabsf(o.vDir.y) + a.vExtents.y * fabsf(o.vDir.x) +</span>
<a name="l01777"></a>01777 <span class="comment">//      o.vExtents.x * fabsf(o.vUp.z) + o.vExtents.y * fabsf(o.vRight.z);</span>
<a name="l01778"></a>01778 <span class="comment">//  r = fabsf( o.vDir.x * vd.y - o.vDir.y * vd.x);</span>
<a name="l01779"></a>01779 <span class="comment">//  if(r01 &lt; r) return false;</span>
<a name="l01780"></a>01780 <span class="comment">//</span>
<a name="l01781"></a>01781 <span class="comment">//  return true;</span>
<a name="l01782"></a>01782 <span class="comment">//}</span>
<a name="l01783"></a>01783 <span class="comment">//</span>
<a name="l01784"></a>01784 <span class="comment">//bool OBBOBBTest(const OBB&amp; o1, const OBB&amp; o2)</span>
<a name="l01785"></a>01785 <span class="comment">//{</span>
<a name="l01786"></a>01786 <span class="comment">//  // convert to AABB and OBB</span>
<a name="l01787"></a>01787 <span class="comment">//  AABB ab(DXVEC3(0.0f, 0.0f, 0.0f), o1.vExtents);</span>
<a name="l01788"></a>01788 <span class="comment">//  OBB obb;</span>
<a name="l01789"></a>01789 <span class="comment">//</span>
<a name="l01790"></a>01790 <span class="comment">//  // position</span>
<a name="l01791"></a>01791 <span class="comment">//  ab.vPos = o2.vPos - o1.vPos;</span>
<a name="l01792"></a>01792 <span class="comment">//  obb.vPos.x = D3DXVec3Dot(&amp;o1.vRight, &amp;ab.vPos);</span>
<a name="l01793"></a>01793 <span class="comment">//  obb.vPos.y = D3DXVec3Dot(&amp;o1.vUp, &amp;ab.vPos);</span>
<a name="l01794"></a>01794 <span class="comment">//  obb.vPos.z = D3DXVec3Dot(&amp;o1.vDir, &amp;ab.vPos);</span>
<a name="l01795"></a>01795 <span class="comment">//  ab.vPos.x = ab.vPos.y = ab.vPos.z = 0.0f;</span>
<a name="l01796"></a>01796 <span class="comment">//</span>
<a name="l01797"></a>01797 <span class="comment">//  obb.vRight.x = D3DXVec3Dot(&amp;o1.vRight, &amp;o2.vRight);</span>
<a name="l01798"></a>01798 <span class="comment">//  obb.vRight.y = D3DXVec3Dot(&amp;o1.vUp, &amp;o2.vRight);</span>
<a name="l01799"></a>01799 <span class="comment">//  obb.vRight.z = D3DXVec3Dot(&amp;o1.vDir, &amp;o2.vRight);</span>
<a name="l01800"></a>01800 <span class="comment">//</span>
<a name="l01801"></a>01801 <span class="comment">//  obb.vUp.x = D3DXVec3Dot(&amp;o1.vRight, &amp;o2.vUp);</span>
<a name="l01802"></a>01802 <span class="comment">//  obb.vUp.y = D3DXVec3Dot(&amp;o1.vUp, &amp;o2.vUp);</span>
<a name="l01803"></a>01803 <span class="comment">//  obb.vUp.z = D3DXVec3Dot(&amp;o1.vDir, &amp;o2.vUp);</span>
<a name="l01804"></a>01804 <span class="comment">//</span>
<a name="l01805"></a>01805 <span class="comment">//  obb.vDir.x = D3DXVec3Dot(&amp;o1.vRight, &amp;o2.vDir);</span>
<a name="l01806"></a>01806 <span class="comment">//  obb.vDir.y = D3DXVec3Dot(&amp;o1.vUp, &amp;o2.vDir);</span>
<a name="l01807"></a>01807 <span class="comment">//  obb.vDir.z = D3DXVec3Dot(&amp;o1.vDir, &amp;o2.vDir);</span>
<a name="l01808"></a>01808 <span class="comment">//</span>
<a name="l01809"></a>01809 <span class="comment">//  obb.vExtents = o2.vExtents;</span>
<a name="l01810"></a>01810 <span class="comment">//</span>
<a name="l01811"></a>01811 <span class="comment">//  return AABBOBBTest(ab, obb);</span>
<a name="l01812"></a>01812 <span class="comment">//}</span>
<a name="l01813"></a>01813 
<a name="l01814"></a>01814 <span class="comment">//AABB AABBUnion(const AABB&amp; ab1, AABB&amp; ab2)</span>
<a name="l01815"></a>01815 <span class="comment">//{</span>
<a name="l01816"></a>01816 <span class="comment">//  return AABB( 0.5f * (ab1.vPos + ab2.vPos), 0.5f * (ab1.vExtents + ab2.vExtents +</span>
<a name="l01817"></a>01817 <span class="comment">//      DXVEC3(fabsf(ab2.vPos.x-ab1.vPos.x), fabsf(ab2.vPos.y-ab1.vPos.y), fabsf(ab2.vPos.z-ab1.vPos.z))) );</span>
<a name="l01818"></a>01818 <span class="comment">//}</span>
<a name="l01819"></a>01819 
<a name="l01820"></a>01820 <span class="comment">//bool PlaneFaceTest(const PLANE&amp; p, const FACE&amp; f)</span>
<a name="l01821"></a>01821 <span class="comment">//{</span>
<a name="l01822"></a>01822 <span class="comment">//  // for the face to be intersecting the plane, one of its</span>
<a name="l01823"></a>01823 <span class="comment">//  // vertices must be on the opposite side of the plane</span>
<a name="l01824"></a>01824 <span class="comment">//  BYTE b = 0;</span>
<a name="l01825"></a>01825 <span class="comment">//</span>
<a name="l01826"></a>01826 <span class="comment">//  if(D3DXVec3Dot(&amp;p.vNorm, &amp;f.v1) + p.fD &gt; 0.0f) b |= 1;</span>
<a name="l01827"></a>01827 <span class="comment">//  if(D3DXVec3Dot(&amp;p.vNorm, &amp;f.v2) + p.fD &gt; 0.0f) b |= 2;</span>
<a name="l01828"></a>01828 <span class="comment">//  if(D3DXVec3Dot(&amp;p.vNorm, &amp;f.v3) + p.fD &gt; 0.0f) b |= 4;</span>
<a name="l01829"></a>01829 <span class="comment">//</span>
<a name="l01830"></a>01830 <span class="comment">//  if(b == 7 || b == 0) return false;</span>
<a name="l01831"></a>01831 <span class="comment">//</span>
<a name="l01832"></a>01832 <span class="comment">//  return true;</span>
<a name="l01833"></a>01833 <span class="comment">//}</span>
<a name="l01834"></a>01834 <span class="comment">//</span>
<a name="l01835"></a>01835 <span class="comment">//bool PlaneAABBTest(const PLANE&amp; p, const AABB&amp; a)</span>
<a name="l01836"></a>01836 <span class="comment">//{</span>
<a name="l01837"></a>01837 <span class="comment">//  return fabsf(D3DXVec3Dot(&amp;p.vNorm, &amp;a.vPos) + p.fD) &lt;</span>
<a name="l01838"></a>01838 <span class="comment">//      fabsf(D3DXVec3Dot(&amp;p.vNorm, &amp;a.vExtents));</span>
<a name="l01839"></a>01839 <span class="comment">//}</span>
<a name="l01840"></a>01840 <span class="comment">//</span>
<a name="l01841"></a>01841 <span class="comment">//bool PlaneOBBTest(const PLANE&amp; p, const OBB&amp; o)</span>
<a name="l01842"></a>01842 <span class="comment">//{</span>
<a name="l01843"></a>01843 <span class="comment">//  return fabsf(D3DXVec3Dot(&amp;p.vNorm, &amp;o.vPos) + p.fD) &lt;</span>
<a name="l01844"></a>01844 <span class="comment">//      fabsf(o.vExtents.x * D3DXVec3Dot(&amp;p.vNorm, &amp;o.vRight)) +</span>
<a name="l01845"></a>01845 <span class="comment">//      fabsf(o.vExtents.y * D3DXVec3Dot(&amp;p.vNorm, &amp;o.vUp)) +</span>
<a name="l01846"></a>01846 <span class="comment">//      fabsf(o.vExtents.z * D3DXVec3Dot(&amp;p.vNorm, &amp;o.vDir));</span>
<a name="l01847"></a>01847 <span class="comment">//}</span>
<a name="l01848"></a>01848 <span class="comment">//</span>
<a name="l01849"></a>01849 <span class="comment">//bool PlaneSphereTest(const PLANE&amp; p, const SPHERE&amp; s)</span>
<a name="l01850"></a>01850 <span class="comment">//{</span>
<a name="l01851"></a>01851 <span class="comment">//  return fabsf(D3DXVec3Dot(&amp;p.vNorm, &amp;s.vPos) + p.fD) &lt; s.fRadius;</span>
<a name="l01852"></a>01852 <span class="comment">//}</span>
<a name="l01853"></a>01853 <span class="comment">//</span>
<a name="l01854"></a>01854 <span class="comment">//bool FaceFaceTest(const FACE&amp; f1, const FACE&amp; f2)</span>
<a name="l01855"></a>01855 <span class="comment">//{</span>
<a name="l01856"></a>01856 <span class="comment">//  // first see if the faces intersect the planes</span>
<a name="l01857"></a>01857 <span class="comment">//  // for the face to be intersecting the plane, one of its</span>
<a name="l01858"></a>01858 <span class="comment">//  // vertices must be on the opposite side of the plane</span>
<a name="l01859"></a>01859 <span class="comment">//  BYTE b = 0;</span>
<a name="l01860"></a>01860 <span class="comment">//</span>
<a name="l01861"></a>01861 <span class="comment">//  if(D3DXVec3Dot(&amp;f2.plane.vNorm, &amp;f1.v1) + f2.plane.fD &gt; 0.0f) b |= 1;</span>
<a name="l01862"></a>01862 <span class="comment">//  if(D3DXVec3Dot(&amp;f2.plane.vNorm, &amp;f1.v2) + f2.plane.fD &gt; 0.0f) b |= 2;</span>
<a name="l01863"></a>01863 <span class="comment">//  if(D3DXVec3Dot(&amp;f2.plane.vNorm, &amp;f1.v3) + f2.plane.fD &gt; 0.0f) b |= 4;</span>
<a name="l01864"></a>01864 <span class="comment">//</span>
<a name="l01865"></a>01865 <span class="comment">//  if(b == 7 || b == 0) return false;</span>
<a name="l01866"></a>01866 <span class="comment">//</span>
<a name="l01867"></a>01867 <span class="comment">//  // now get segment from f1 when it crosses f2&#39;s plane</span>
<a name="l01868"></a>01868 <span class="comment">//  // note that b gives us information on which edges actually intersected</span>
<a name="l01869"></a>01869 <span class="comment">//  // so figure out the point that is alone on one side of the plane</span>
<a name="l01870"></a>01870 <span class="comment">//  // then get the segment</span>
<a name="l01871"></a>01871 <span class="comment">//  DXVEC3 p1, p2;</span>
<a name="l01872"></a>01872 <span class="comment">//  const DXVEC3* v;</span>
<a name="l01873"></a>01873 <span class="comment">//</span>
<a name="l01874"></a>01874 <span class="comment">//  switch(b) {</span>
<a name="l01875"></a>01875 <span class="comment">//      case 1:</span>
<a name="l01876"></a>01876 <span class="comment">//      case 6:</span>
<a name="l01877"></a>01877 <span class="comment">//          v = &amp;f1.v1;</span>
<a name="l01878"></a>01878 <span class="comment">//          p1 = f1.v2 - f1.v1;</span>
<a name="l01879"></a>01879 <span class="comment">//          p2 = f1.v3 - f1.v1;</span>
<a name="l01880"></a>01880 <span class="comment">//          break;</span>
<a name="l01881"></a>01881 <span class="comment">//      case 2:</span>
<a name="l01882"></a>01882 <span class="comment">//      case 5:</span>
<a name="l01883"></a>01883 <span class="comment">//          v = &amp;f1.v2;</span>
<a name="l01884"></a>01884 <span class="comment">//          p1 = f1.v1 - f1.v2;</span>
<a name="l01885"></a>01885 <span class="comment">//          p2 = f1.v3 - f1.v2;</span>
<a name="l01886"></a>01886 <span class="comment">//          break;</span>
<a name="l01887"></a>01887 <span class="comment">//      case 4:</span>
<a name="l01888"></a>01888 <span class="comment">//      case 3:</span>
<a name="l01889"></a>01889 <span class="comment">//          v = &amp;f1.v3;</span>
<a name="l01890"></a>01890 <span class="comment">//          p1 = f1.v1 - f1.v3;</span>
<a name="l01891"></a>01891 <span class="comment">//          p2 = f1.v2 - f1.v3;</span>
<a name="l01892"></a>01892 <span class="comment">//          break;</span>
<a name="l01893"></a>01893 <span class="comment">//  }</span>
<a name="l01894"></a>01894 <span class="comment">//</span>
<a name="l01895"></a>01895 <span class="comment">//  float t = D3DXVec3Dot(&amp;f2.plane.vNorm, &amp;(f2.v1 - *v) );</span>
<a name="l01896"></a>01896 <span class="comment">//  p1 = *v + p1 * t / D3DXVec3Dot(&amp;f2.plane.vNorm, &amp;p1);</span>
<a name="l01897"></a>01897 <span class="comment">//  p2 = *v + p2 * t / D3DXVec3Dot(&amp;f2.plane.vNorm, &amp;p2);</span>
<a name="l01898"></a>01898 <span class="comment">//</span>
<a name="l01899"></a>01899 <span class="comment">//  // now p1 and p2 are on the plane</span>
<a name="l01900"></a>01900 <span class="comment">//  // let p1 be the midpoint and p2 be the extents</span>
<a name="l01901"></a>01901 <span class="comment">//  // then test the line segment with the triangle against</span>
<a name="l01902"></a>01902 <span class="comment">//  // the 4 separating axes</span>
<a name="l01903"></a>01903 <span class="comment">//  p1 = (p2 + p1) * 0.5f;</span>
<a name="l01904"></a>01904 <span class="comment">//  p2 -= p1;</span>
<a name="l01905"></a>01905 <span class="comment">//</span>
<a name="l01906"></a>01906 <span class="comment">//  DXVEC3 vCross;</span>
<a name="l01907"></a>01907 <span class="comment">//</span>
<a name="l01908"></a>01908 <span class="comment">//  // N x U</span>
<a name="l01909"></a>01909 <span class="comment">//  D3DXVec3Cross(&amp;vCross, &amp;f2.plane.vNorm, &amp;p2);</span>
<a name="l01910"></a>01910 <span class="comment">//  t = D3DXVec3Dot(&amp;vCross, &amp;p1);</span>
<a name="l01911"></a>01911 <span class="comment">//</span>
<a name="l01912"></a>01912 <span class="comment">//  b = D3DXVec3Dot(&amp;vCross, &amp;f2.v2) &lt; t;</span>
<a name="l01913"></a>01913 <span class="comment">//</span>
<a name="l01914"></a>01914 <span class="comment">//  // check if all 3 verts are on one side and don&#39;t intersect the edge</span>
<a name="l01915"></a>01915 <span class="comment">//  if( ( (D3DXVec3Dot(&amp;vCross, &amp;f2.v1) &gt; t) ^ b ) &amp;&amp;</span>
<a name="l01916"></a>01916 <span class="comment">//      ( (D3DXVec3Dot(&amp;vCross, &amp;f2.v3) &gt; t) ^ b ) ) return false;</span>
<a name="l01917"></a>01917 <span class="comment">//</span>
<a name="l01918"></a>01918 <span class="comment">//  // N x V2-V1</span>
<a name="l01919"></a>01919 <span class="comment">//</span>
<a name="l01920"></a>01920 <span class="comment">//  // test: check if projection of segment onto vector</span>
<a name="l01921"></a>01921 <span class="comment">//  // is not in the interval of the projection of f2</span>
<a name="l01922"></a>01922 <span class="comment">//  float fd1, fd2, ftemp;</span>
<a name="l01923"></a>01923 <span class="comment">//</span>
<a name="l01924"></a>01924 <span class="comment">//  D3DXVec3Cross(&amp;vCross, &amp;f2.plane.vNorm, &amp;(f2.v2 - f2.v1));</span>
<a name="l01925"></a>01925 <span class="comment">//  t = D3DXVec3Dot(&amp;vCross, &amp;f2.v3);</span>
<a name="l01926"></a>01926 <span class="comment">//</span>
<a name="l01927"></a>01927 <span class="comment">//  ftemp = D3DXVec3Dot(&amp;vCross, &amp;p2);</span>
<a name="l01928"></a>01928 <span class="comment">//  fd1 = D3DXVec3Dot(&amp;vCross, &amp;p1) - ftemp;</span>
<a name="l01929"></a>01929 <span class="comment">//  fd2 = fd1 + 2.0f * ftemp;</span>
<a name="l01930"></a>01930 <span class="comment">//</span>
<a name="l01931"></a>01931 <span class="comment">//  ftemp = D3DXVec3Dot(&amp;vCross, &amp;f2.v1);</span>
<a name="l01932"></a>01932 <span class="comment">//</span>
<a name="l01933"></a>01933 <span class="comment">//  if( (fd1 &lt; ftemp &amp;&amp; fd2 &lt; ftemp) || (fd1 &gt; t &amp;&amp; fd2 &gt; t) ) return false;</span>
<a name="l01934"></a>01934 <span class="comment">//</span>
<a name="l01935"></a>01935 <span class="comment">//  // N x V3-V1</span>
<a name="l01936"></a>01936 <span class="comment">//  D3DXVec3Cross(&amp;vCross, &amp;f2.plane.vNorm, &amp;(f2.v1 - f2.v3));</span>
<a name="l01937"></a>01937 <span class="comment">//  t = fabsf(D3DXVec3Dot(&amp;vCross, &amp;f2.v2));</span>
<a name="l01938"></a>01938 <span class="comment">//</span>
<a name="l01939"></a>01939 <span class="comment">//  ftemp = D3DXVec3Dot(&amp;vCross, &amp;p2);</span>
<a name="l01940"></a>01940 <span class="comment">//  fd1 = D3DXVec3Dot(&amp;vCross, &amp;p1) - ftemp;</span>
<a name="l01941"></a>01941 <span class="comment">//  fd2 = fd1 + 2.0f * ftemp;</span>
<a name="l01942"></a>01942 <span class="comment">//</span>
<a name="l01943"></a>01943 <span class="comment">//  ftemp = D3DXVec3Dot(&amp;vCross, &amp;f2.v3);</span>
<a name="l01944"></a>01944 <span class="comment">//</span>
<a name="l01945"></a>01945 <span class="comment">//  if( (fd1 &lt; ftemp &amp;&amp; fd2 &lt; ftemp) || (fd1 &gt; t &amp;&amp; fd2 &gt; t) ) return false;</span>
<a name="l01946"></a>01946 <span class="comment">//</span>
<a name="l01947"></a>01947 <span class="comment">//  // N x V3-V2</span>
<a name="l01948"></a>01948 <span class="comment">//  D3DXVec3Cross(&amp;vCross, &amp;f2.plane.vNorm, &amp;(f2.v3 - f2.v2));</span>
<a name="l01949"></a>01949 <span class="comment">//  t = fabsf(D3DXVec3Dot(&amp;vCross, &amp;f2.v1));</span>
<a name="l01950"></a>01950 <span class="comment">//</span>
<a name="l01951"></a>01951 <span class="comment">//  ftemp = D3DXVec3Dot(&amp;vCross, &amp;p2);</span>
<a name="l01952"></a>01952 <span class="comment">//  fd1 = D3DXVec3Dot(&amp;vCross, &amp;p1) - ftemp;</span>
<a name="l01953"></a>01953 <span class="comment">//  fd2 = fd1 + 2.0f * ftemp;</span>
<a name="l01954"></a>01954 <span class="comment">//</span>
<a name="l01955"></a>01955 <span class="comment">//  ftemp = D3DXVec3Dot(&amp;vCross, &amp;f2.v2);</span>
<a name="l01956"></a>01956 <span class="comment">//</span>
<a name="l01957"></a>01957 <span class="comment">//  if( (fd1 &lt; ftemp &amp;&amp; fd2 &lt; ftemp) || (fd1 &gt; t &amp;&amp; fd2 &gt; t) ) return false;</span>
<a name="l01958"></a>01958 <span class="comment">//</span>
<a name="l01959"></a>01959 <span class="comment">//  return true;</span>
<a name="l01960"></a>01960 <span class="comment">//}</span>
<a name="l01961"></a>01961 
<a name="l01962"></a>01962 <span class="comment">//bool FaceAABBTest(const FACE&amp; f, const AABB&amp; a)</span>
<a name="l01963"></a>01963 <span class="comment">//{</span>
<a name="l01964"></a>01964 <span class="comment">//  // use 13 separating axes to determine collision</span>
<a name="l01965"></a>01965 <span class="comment">//  DXVEC3 vD;</span>
<a name="l01966"></a>01966 <span class="comment">//  DXVEC3 ve0, ve1, ve2;</span>
<a name="l01967"></a>01967 <span class="comment">//  DXVEC3 vNorm;           // the cross product between ve0 and ve1, but preserve length!</span>
<a name="l01968"></a>01968 <span class="comment">//</span>
<a name="l01969"></a>01969 <span class="comment">//  float p0, p1, p2, r;</span>
<a name="l01970"></a>01970 <span class="comment">//</span>
<a name="l01971"></a>01971 <span class="comment">//  // N</span>
<a name="l01972"></a>01972 <span class="comment">//  vD = f.v1 - a.vPos;</span>
<a name="l01973"></a>01973 <span class="comment">//  if( fabsf(D3DXVec3Dot(&amp;vD, &amp;f.plane.vNorm)) &gt;</span>
<a name="l01974"></a>01974 <span class="comment">//      a.vExtents.x * fabsf(f.plane.vNorm.x) + a.vExtents.y * fabsf(f.plane.vNorm.y) +</span>
<a name="l01975"></a>01975 <span class="comment">//      a.vExtents.z * fabsf(f.plane.vNorm.z) ) return false;</span>
<a name="l01976"></a>01976 <span class="comment">//</span>
<a name="l01977"></a>01977 <span class="comment">//  ve0 = f.v2 - f.v1;</span>
<a name="l01978"></a>01978 <span class="comment">//  ve1 = f.v3 - f.v1;</span>
<a name="l01979"></a>01979 <span class="comment">//  ve2 = f.v3 - f.v2;</span>
<a name="l01980"></a>01980 <span class="comment">//</span>
<a name="l01981"></a>01981 <span class="comment">//  // box&#39;s axes</span>
<a name="l01982"></a>01982 <span class="comment">//  p0 = vD.x;</span>
<a name="l01983"></a>01983 <span class="comment">//  p1 = vD.x + ve0.x;</span>
<a name="l01984"></a>01984 <span class="comment">//  p2 = vD.x + ve1.x;</span>
<a name="l01985"></a>01985 <span class="comment">//  if( p0 &gt; a.vExtents.x) {</span>
<a name="l01986"></a>01986 <span class="comment">//      if(p1 &gt; a.vExtents.x &amp;&amp; p2 &gt; a.vExtents.x) return false;</span>
<a name="l01987"></a>01987 <span class="comment">//  }</span>
<a name="l01988"></a>01988 <span class="comment">//  else if (p0 &lt; -a.vExtents.x) {</span>
<a name="l01989"></a>01989 <span class="comment">//      if(p1 &lt; -a.vExtents.x &amp;&amp; p2 &lt; -a.vExtents.x) return false;</span>
<a name="l01990"></a>01990 <span class="comment">//  }</span>
<a name="l01991"></a>01991 <span class="comment">//</span>
<a name="l01992"></a>01992 <span class="comment">//  p0 = vD.y;</span>
<a name="l01993"></a>01993 <span class="comment">//  p1 = vD.y + ve0.y;</span>
<a name="l01994"></a>01994 <span class="comment">//  p2 = vD.y + ve1.y;</span>
<a name="l01995"></a>01995 <span class="comment">//  if( p0 &gt; a.vExtents.y) {</span>
<a name="l01996"></a>01996 <span class="comment">//      if(p1 &gt; a.vExtents.y &amp;&amp; p2 &gt; a.vExtents.y) return false;</span>
<a name="l01997"></a>01997 <span class="comment">//  }</span>
<a name="l01998"></a>01998 <span class="comment">//  else if (p0 &lt; -a.vExtents.y) {</span>
<a name="l01999"></a>01999 <span class="comment">//      if(p1 &lt; -a.vExtents.y &amp;&amp; p2 &lt; -a.vExtents.y) return false;</span>
<a name="l02000"></a>02000 <span class="comment">//  }</span>
<a name="l02001"></a>02001 <span class="comment">//</span>
<a name="l02002"></a>02002 <span class="comment">//  p0 = vD.z;</span>
<a name="l02003"></a>02003 <span class="comment">//  p1 = vD.z + ve0.z;</span>
<a name="l02004"></a>02004 <span class="comment">//  p2 = vD.z + ve1.z;</span>
<a name="l02005"></a>02005 <span class="comment">//  if( p0 &gt; a.vExtents.z) {</span>
<a name="l02006"></a>02006 <span class="comment">//      if(p1 &gt; a.vExtents.z &amp;&amp; p2 &gt; a.vExtents.z) return false;</span>
<a name="l02007"></a>02007 <span class="comment">//  }</span>
<a name="l02008"></a>02008 <span class="comment">//  else if (p0 &lt; -a.vExtents.z) {</span>
<a name="l02009"></a>02009 <span class="comment">//      if(p1 &lt; -a.vExtents.z &amp;&amp; p2 &lt; -a.vExtents.z) return false;</span>
<a name="l02010"></a>02010 <span class="comment">//  }</span>
<a name="l02011"></a>02011 <span class="comment">//</span>
<a name="l02012"></a>02012 <span class="comment">//  D3DXVec3Cross(&amp;vNorm, &amp;ve0, &amp;ve1);</span>
<a name="l02013"></a>02013 <span class="comment">//</span>
<a name="l02014"></a>02014 <span class="comment">//  // all the cross products between</span>
<a name="l02015"></a>02015 <span class="comment">//  // ve0, ve1, ve2 and A0(1,0,0), A1(0, 1, 0), A2(0, 0, 1)</span>
<a name="l02016"></a>02016 <span class="comment">//</span>
<a name="l02017"></a>02017 <span class="comment">//  // for all axes L = Ai x vei, compute vD dot L and</span>
<a name="l02018"></a>02018 <span class="comment">//  // the projections of the triangle vertices</span>
<a name="l02019"></a>02019 <span class="comment">//</span>
<a name="l02020"></a>02020 <span class="comment">//  // A0 x ve0</span>
<a name="l02021"></a>02021 <span class="comment">//  // (0, -ve.z, ve.y)</span>
<a name="l02022"></a>02022 <span class="comment">//</span>
<a name="l02023"></a>02023 <span class="comment">//  r = a.vExtents.y * fabsf(ve0.z) + a.vExtents.z * fabsf(ve0.y);</span>
<a name="l02024"></a>02024 <span class="comment">//  p0 = -ve0.z * vD.y + ve0.y * vD.z;</span>
<a name="l02025"></a>02025 <span class="comment">//  p1 = p0 + vNorm.x;</span>
<a name="l02026"></a>02026 <span class="comment">//  if( (p0 &gt; r &amp;&amp; p1 &gt; r) || (p0 &lt; -r &amp;&amp; p1 &lt; -r) ) return false;</span>
<a name="l02027"></a>02027 <span class="comment">//</span>
<a name="l02028"></a>02028 <span class="comment">//  // A0 x ve1</span>
<a name="l02029"></a>02029 <span class="comment">//</span>
<a name="l02030"></a>02030 <span class="comment">//  r = a.vExtents.y * fabsf(ve1.z) + a.vExtents.z * fabsf(ve1.y);</span>
<a name="l02031"></a>02031 <span class="comment">//  p0 = -ve1.z * vD.y + ve1.y * vD.z;</span>
<a name="l02032"></a>02032 <span class="comment">//  p1 = p0 - vNorm.x;</span>
<a name="l02033"></a>02033 <span class="comment">//  if( (p0 &gt; r &amp;&amp; p1 &gt; r) || (p0 &lt; -r &amp;&amp; p1 &lt; -r) ) return false;</span>
<a name="l02034"></a>02034 <span class="comment">//</span>
<a name="l02035"></a>02035 <span class="comment">//  // A0 x ve2</span>
<a name="l02036"></a>02036 <span class="comment">//</span>
<a name="l02037"></a>02037 <span class="comment">//  r = a.vExtents.y * fabsf(ve2.z) + a.vExtents.z * fabsf(ve2.y);</span>
<a name="l02038"></a>02038 <span class="comment">//  p0 = -ve2.z * vD.y + ve2.y * vD.z;</span>
<a name="l02039"></a>02039 <span class="comment">//  p1 = p0 - vNorm.x;</span>
<a name="l02040"></a>02040 <span class="comment">//  if( (p0 &gt; r &amp;&amp; p1 &gt; r) || (p0 &lt; -r &amp;&amp; p1 &lt; -r) ) return false;</span>
<a name="l02041"></a>02041 <span class="comment">//</span>
<a name="l02042"></a>02042 <span class="comment">//  // A1 x ve0</span>
<a name="l02043"></a>02043 <span class="comment">//  // (ve.z, 0, -ve.x)</span>
<a name="l02044"></a>02044 <span class="comment">//</span>
<a name="l02045"></a>02045 <span class="comment">//  r = a.vExtents.x * fabsf(ve0.z) + a.vExtents.z * fabsf(ve0.x);</span>
<a name="l02046"></a>02046 <span class="comment">//  p0 = ve0.z * vD.x - ve0.x * vD.z;</span>
<a name="l02047"></a>02047 <span class="comment">//  p1 = p0 + vNorm.y;</span>
<a name="l02048"></a>02048 <span class="comment">//  if( (p0 &gt; r &amp;&amp; p1 &gt; r) || (p0 &lt; -r &amp;&amp; p1 &lt; -r) ) return false;</span>
<a name="l02049"></a>02049 <span class="comment">//</span>
<a name="l02050"></a>02050 <span class="comment">//  // A1 x ve1</span>
<a name="l02051"></a>02051 <span class="comment">//  r = a.vExtents.x * fabsf(ve1.z) + a.vExtents.z * fabsf(ve1.x);</span>
<a name="l02052"></a>02052 <span class="comment">//  p0 = ve1.z * vD.x - ve1.x * vD.z;</span>
<a name="l02053"></a>02053 <span class="comment">//  p1 = p0 - vNorm.y;</span>
<a name="l02054"></a>02054 <span class="comment">//  if( (p0 &gt; r &amp;&amp; p1 &gt; r) || (p0 &lt; -r &amp;&amp; p1 &lt; -r) ) return false;</span>
<a name="l02055"></a>02055 <span class="comment">//</span>
<a name="l02056"></a>02056 <span class="comment">//  // A1 x ve2</span>
<a name="l02057"></a>02057 <span class="comment">//</span>
<a name="l02058"></a>02058 <span class="comment">//  r = a.vExtents.x * fabsf(ve2.z) + a.vExtents.z * fabsf(ve2.x);</span>
<a name="l02059"></a>02059 <span class="comment">//  p0 = ve2.z * vD.x - ve2.x * vD.z;</span>
<a name="l02060"></a>02060 <span class="comment">//  p1 = p0 - vNorm.y;</span>
<a name="l02061"></a>02061 <span class="comment">//  if( (p0 &gt; r &amp;&amp; p1 &gt; r) || (p0 &lt; -r &amp;&amp; p1 &lt; -r) ) return false;</span>
<a name="l02062"></a>02062 <span class="comment">//</span>
<a name="l02063"></a>02063 <span class="comment">//  // A2 x ve0</span>
<a name="l02064"></a>02064 <span class="comment">//  // (-ve.y, ve.x, 0)</span>
<a name="l02065"></a>02065 <span class="comment">//</span>
<a name="l02066"></a>02066 <span class="comment">//  r = a.vExtents.x * fabsf(ve0.y) + a.vExtents.y * fabsf(ve0.x);</span>
<a name="l02067"></a>02067 <span class="comment">//  p0 = - ve0.y * vD.x + ve0.x * vD.y;</span>
<a name="l02068"></a>02068 <span class="comment">//  p1 = p0 + vNorm.z;</span>
<a name="l02069"></a>02069 <span class="comment">//  if( (p0 &gt; r &amp;&amp; p1 &gt; r) || (p0 &lt; -r &amp;&amp; p1 &lt; -r) ) return false;</span>
<a name="l02070"></a>02070 <span class="comment">//</span>
<a name="l02071"></a>02071 <span class="comment">//  // A2 x ve1</span>
<a name="l02072"></a>02072 <span class="comment">//  r = a.vExtents.x * fabsf(ve1.y) + a.vExtents.y * fabsf(ve1.x);</span>
<a name="l02073"></a>02073 <span class="comment">//  p0 = - ve1.y * vD.x + ve1.x * vD.y;</span>
<a name="l02074"></a>02074 <span class="comment">//  p1 = p0 - vNorm.z;</span>
<a name="l02075"></a>02075 <span class="comment">//  if( (p0 &gt; r &amp;&amp; p1 &gt; r) || (p0 &lt; -r &amp;&amp; p1 &lt; -r) ) return false;</span>
<a name="l02076"></a>02076 <span class="comment">//</span>
<a name="l02077"></a>02077 <span class="comment">//  // A2 x ve2</span>
<a name="l02078"></a>02078 <span class="comment">//  r = a.vExtents.x * fabsf(ve2.y) + a.vExtents.y * fabsf(ve2.x);</span>
<a name="l02079"></a>02079 <span class="comment">//  p0 = - ve2.y * vD.x + ve2.x * vD.y;</span>
<a name="l02080"></a>02080 <span class="comment">//  p1 = p0 - vNorm.z;</span>
<a name="l02081"></a>02081 <span class="comment">//  if( (p0 &gt; r &amp;&amp; p1 &gt; r) || (p0 &lt; -r &amp;&amp; p1 &lt; -r) ) return false;</span>
<a name="l02082"></a>02082 <span class="comment">//</span>
<a name="l02083"></a>02083 <span class="comment">//  return true;</span>
<a name="l02084"></a>02084 <span class="comment">//}</span>
<a name="l02085"></a>02085 <span class="comment">//</span>
<a name="l02086"></a>02086 <span class="comment">//bool FaceOBBTest(const FACE&amp; f, const OBB&amp; o)</span>
<a name="l02087"></a>02087 <span class="comment">//{</span>
<a name="l02088"></a>02088 <span class="comment">//  // convert face into OBB&#39;s coordinate system and use</span>
<a name="l02089"></a>02089 <span class="comment">//  // FaceAABBTest</span>
<a name="l02090"></a>02090 <span class="comment">//</span>
<a name="l02091"></a>02091 <span class="comment">//  AABB ab(DXVEC3(0.0f, 0.0f, 0.0f), o.vExtents);</span>
<a name="l02092"></a>02092 <span class="comment">//  FACE newface;</span>
<a name="l02093"></a>02093 <span class="comment">//</span>
<a name="l02094"></a>02094 <span class="comment">//  // use ab.vPos as temporary param</span>
<a name="l02095"></a>02095 <span class="comment">//  ab.vPos = f.v1 - o.vPos;</span>
<a name="l02096"></a>02096 <span class="comment">//  newface.v1.x = D3DXVec3Dot(&amp;ab.vPos, &amp;o.vRight);</span>
<a name="l02097"></a>02097 <span class="comment">//  newface.v1.y = D3DXVec3Dot(&amp;ab.vPos, &amp;o.vUp);</span>
<a name="l02098"></a>02098 <span class="comment">//  newface.v1.z = D3DXVec3Dot(&amp;ab.vPos, &amp;o.vDir);</span>
<a name="l02099"></a>02099 <span class="comment">//  ab.vPos = f.v2 - o.vPos;</span>
<a name="l02100"></a>02100 <span class="comment">//  newface.v2.x = D3DXVec3Dot(&amp;ab.vPos, &amp;o.vRight);</span>
<a name="l02101"></a>02101 <span class="comment">//  newface.v2.y = D3DXVec3Dot(&amp;ab.vPos, &amp;o.vUp);</span>
<a name="l02102"></a>02102 <span class="comment">//  newface.v2.z = D3DXVec3Dot(&amp;ab.vPos, &amp;o.vDir);</span>
<a name="l02103"></a>02103 <span class="comment">//  ab.vPos = f.v3 - o.vPos;</span>
<a name="l02104"></a>02104 <span class="comment">//  newface.v3.x = D3DXVec3Dot(&amp;ab.vPos, &amp;o.vRight);</span>
<a name="l02105"></a>02105 <span class="comment">//  newface.v3.y = D3DXVec3Dot(&amp;ab.vPos, &amp;o.vUp);</span>
<a name="l02106"></a>02106 <span class="comment">//  newface.v3.z = D3DXVec3Dot(&amp;ab.vPos, &amp;o.vDir);</span>
<a name="l02107"></a>02107 <span class="comment">//</span>
<a name="l02108"></a>02108 <span class="comment">//  ab.vPos.x = ab.vPos.y = ab.vPos.z = 0.0f;</span>
<a name="l02109"></a>02109 <span class="comment">//</span>
<a name="l02110"></a>02110 <span class="comment">//  newface.plane.vNorm.x = D3DXVec3Dot(&amp;f.plane.vNorm, &amp;o.vRight);</span>
<a name="l02111"></a>02111 <span class="comment">//  newface.plane.vNorm.y = D3DXVec3Dot(&amp;f.plane.vNorm, &amp;o.vUp);</span>
<a name="l02112"></a>02112 <span class="comment">//  newface.plane.vNorm.z = D3DXVec3Dot(&amp;f.plane.vNorm, &amp;o.vDir);</span>
<a name="l02113"></a>02113 <span class="comment">//  // we don&#39;t need the fD param since its not used by the function</span>
<a name="l02114"></a>02114 <span class="comment">//</span>
<a name="l02115"></a>02115 <span class="comment">//  return FaceAABBTest(newface, ab);</span>
<a name="l02116"></a>02116 <span class="comment">//}</span>
<a name="l02117"></a>02117 <span class="comment">//</span>
<a name="l02118"></a>02118 <span class="comment">//bool FaceSphereTest(const FACE&amp; f, const SPHERE&amp; s)</span>
<a name="l02119"></a>02119 <span class="comment">//{</span>
<a name="l02120"></a>02120 <span class="comment">//  DXVEC3 ve;</span>
<a name="l02121"></a>02121 <span class="comment">//  float fLengthSq, fDot;</span>
<a name="l02122"></a>02122 <span class="comment">//</span>
<a name="l02123"></a>02123 <span class="comment">//  // check if the sphere actually intersects the face&#39;s plane</span>
<a name="l02124"></a>02124 <span class="comment">//  fDot = D3DXVec3Dot(&amp;f.plane.vNorm, &amp;s.vPos) + f.plane.fD;</span>
<a name="l02125"></a>02125 <span class="comment">//  if(fDot * fDot &gt; s.fRadius * s.fRadius) return false;</span>
<a name="l02126"></a>02126 <span class="comment">//</span>
<a name="l02127"></a>02127 <span class="comment">//  // test the sphere against each of the edges by computing the</span>
<a name="l02128"></a>02128 <span class="comment">//  // distance from each edge to the center of the circle</span>
<a name="l02129"></a>02129 <span class="comment">//</span>
<a name="l02130"></a>02130 <span class="comment">//  // check every point for faster intersection</span>
<a name="l02131"></a>02131 <span class="comment">//  if(VertexSphereTest(f.v1, s)) return true;</span>
<a name="l02132"></a>02132 <span class="comment">//  if(VertexSphereTest(f.v2, s)) return true;</span>
<a name="l02133"></a>02133 <span class="comment">//  if(VertexSphereTest(f.v3, s)) return true;</span>
<a name="l02134"></a>02134 <span class="comment">//</span>
<a name="l02135"></a>02135 <span class="comment">//  // edge intersect sphere if the distance from the center of the sphere to the</span>
<a name="l02136"></a>02136 <span class="comment">//  // edge is less than the radius and if that&#39;s true then check if the</span>
<a name="l02137"></a>02137 <span class="comment">//  // sphere actually intersects the edge</span>
<a name="l02138"></a>02138 <span class="comment">//</span>
<a name="l02139"></a>02139 <span class="comment">//  ve = f.v2 - f.v1;</span>
<a name="l02140"></a>02140 <span class="comment">//  fLengthSq = D3DXVec3LengthSq(&amp;ve);</span>
<a name="l02141"></a>02141 <span class="comment">//  fDot = D3DXVec3Dot(&amp;(s.vPos - f.v1), &amp;ve);</span>
<a name="l02142"></a>02142 <span class="comment">//</span>
<a name="l02143"></a>02143 <span class="comment">//  if(fDot &gt; 0.0f &amp;&amp; fDot &lt; fLengthSq &amp;&amp;</span>
<a name="l02144"></a>02144 <span class="comment">//      D3DXVec3LengthSq(&amp;(s.vPos - f.v1)) * fLengthSq - fDot * fDot &lt; fLengthSq * s.fRadius * s.fRadius ) return true;</span>
<a name="l02145"></a>02145 <span class="comment">//</span>
<a name="l02146"></a>02146 <span class="comment">//</span>
<a name="l02147"></a>02147 <span class="comment">//  ve = f.v3 - f.v1;</span>
<a name="l02148"></a>02148 <span class="comment">//  fLengthSq = D3DXVec3LengthSq(&amp;ve);</span>
<a name="l02149"></a>02149 <span class="comment">//  fDot = D3DXVec3Dot(&amp;(s.vPos - f.v1), &amp;ve);</span>
<a name="l02150"></a>02150 <span class="comment">//</span>
<a name="l02151"></a>02151 <span class="comment">//  if(fDot &gt; 0.0f &amp;&amp; fDot &lt; fLengthSq &amp;&amp;</span>
<a name="l02152"></a>02152 <span class="comment">//      D3DXVec3LengthSq(&amp;(s.vPos - f.v1)) * fLengthSq - fDot * fDot &lt; fLengthSq * s.fRadius * s.fRadius ) return true;</span>
<a name="l02153"></a>02153 <span class="comment">//</span>
<a name="l02154"></a>02154 <span class="comment">//</span>
<a name="l02155"></a>02155 <span class="comment">//  ve = f.v3 - f.v2;</span>
<a name="l02156"></a>02156 <span class="comment">//  fLengthSq = D3DXVec3LengthSq(&amp;ve);</span>
<a name="l02157"></a>02157 <span class="comment">//  fDot = D3DXVec3Dot(&amp;(s.vPos - f.v2), &amp;ve);</span>
<a name="l02158"></a>02158 <span class="comment">//</span>
<a name="l02159"></a>02159 <span class="comment">//  if(fDot &gt; 0.0f &amp;&amp; fDot &lt; fLengthSq &amp;&amp;</span>
<a name="l02160"></a>02160 <span class="comment">//      D3DXVec3LengthSq(&amp;(s.vPos - f.v2)) * fLengthSq - fDot * fDot &lt; fLengthSq * s.fRadius * s.fRadius ) return true;</span>
<a name="l02161"></a>02161 <span class="comment">//</span>
<a name="l02162"></a>02162 <span class="comment">//</span>
<a name="l02163"></a>02163 <span class="comment">//  // sphere might still be inside the face but not touching any of the edges</span>
<a name="l02164"></a>02164 <span class="comment">//  ve = s.vPos - f.plane.vNorm * (D3DXVec3Dot(&amp;f.plane.vNorm, &amp;s.vPos) + f.plane.fD) - f.v1;</span>
<a name="l02165"></a>02165 <span class="comment">//</span>
<a name="l02166"></a>02166 <span class="comment">//  float e00, e01, e11, q0, q1, s0, s1, t;</span>
<a name="l02167"></a>02167 <span class="comment">//  e00 = D3DXVec3LengthSq(&amp;(f.v2 - f.v1));</span>
<a name="l02168"></a>02168 <span class="comment">//  e01 = D3DXVec3Dot(&amp;(f.v2 - f.v1), &amp;(f.v3 - f.v1));</span>
<a name="l02169"></a>02169 <span class="comment">//  e11 = D3DXVec3LengthSq(&amp;(f.v3 - f.v1));</span>
<a name="l02170"></a>02170 <span class="comment">//</span>
<a name="l02171"></a>02171 <span class="comment">//  q0 = D3DXVec3Dot(&amp;ve, &amp;(f.v2 - f.v1));</span>
<a name="l02172"></a>02172 <span class="comment">//  q1 = D3DXVec3Dot(&amp;ve, &amp;(f.v3 - f.v1));</span>
<a name="l02173"></a>02173 <span class="comment">//</span>
<a name="l02174"></a>02174 <span class="comment">//  s0 = e11 * q0 - e01 * q1;</span>
<a name="l02175"></a>02175 <span class="comment">//  s1 = e00 * q1 - e01 * q0;</span>
<a name="l02176"></a>02176 <span class="comment">//</span>
<a name="l02177"></a>02177 <span class="comment">//  t = e00 * e11 - e01 * e01;</span>
<a name="l02178"></a>02178 <span class="comment">//</span>
<a name="l02179"></a>02179 <span class="comment">//  if(s0 &gt;= 0.0f &amp;&amp; s1 &gt;= 0.0f &amp;&amp; s0+s1 &lt;= t) return true;</span>
<a name="l02180"></a>02180 <span class="comment">//</span>
<a name="l02181"></a>02181 <span class="comment">//  return false;</span>
<a name="l02182"></a>02182 <span class="comment">//}</span>
<a name="l02183"></a>02183 <span class="comment">//</span>
<a name="l02184"></a>02184 <span class="comment">//bool AABBSphereTest(const AABB&amp; a, const SPHERE&amp; s)</span>
<a name="l02185"></a>02185 <span class="comment">//{</span>
<a name="l02186"></a>02186 <span class="comment">//  // algorithm can be found in A Simple Method for Box-Sphere Intersection Testing,</span>
<a name="l02187"></a>02187 <span class="comment">//  // Graphics Gems, pp. 247-250 by Jim Arvo</span>
<a name="l02188"></a>02188 <span class="comment">//  float side, d = 0.0f;</span>
<a name="l02189"></a>02189 <span class="comment">//</span>
<a name="l02190"></a>02190 <span class="comment">//  side = fabsf(s.vPos.x - a.vPos.x);</span>
<a name="l02191"></a>02191 <span class="comment">//  if(side &gt; a.vExtents.x) {</span>
<a name="l02192"></a>02192 <span class="comment">//      side -= a.vExtents.x;</span>
<a name="l02193"></a>02193 <span class="comment">//      d += side * side;</span>
<a name="l02194"></a>02194 <span class="comment">//  }</span>
<a name="l02195"></a>02195 <span class="comment">//  side = fabsf(s.vPos.y - a.vPos.y);</span>
<a name="l02196"></a>02196 <span class="comment">//  if(side &gt; a.vExtents.y) {</span>
<a name="l02197"></a>02197 <span class="comment">//      side -= a.vExtents.y;</span>
<a name="l02198"></a>02198 <span class="comment">//      d += side * side;</span>
<a name="l02199"></a>02199 <span class="comment">//  }</span>
<a name="l02200"></a>02200 <span class="comment">//  side = fabsf(s.vPos.z - a.vPos.z);</span>
<a name="l02201"></a>02201 <span class="comment">//  if(side &gt; a.vExtents.z) {</span>
<a name="l02202"></a>02202 <span class="comment">//      side -= a.vExtents.z;</span>
<a name="l02203"></a>02203 <span class="comment">//      d += side * side;</span>
<a name="l02204"></a>02204 <span class="comment">//  }</span>
<a name="l02205"></a>02205 <span class="comment">//</span>
<a name="l02206"></a>02206 <span class="comment">//  return d &lt; s.fRadius * s.fRadius;</span>
<a name="l02207"></a>02207 <span class="comment">//}</span>
<a name="l02208"></a>02208 
<a name="l02209"></a>02209 <span class="comment">//bool OBBSphereTest(const OBB&amp; o, const SPHERE&amp; s)</span>
<a name="l02210"></a>02210 <span class="comment">//{</span>
<a name="l02211"></a>02211 <span class="comment">//  // algorithm can be found in A Simple Method for Box-Sphere Intersection Testing,</span>
<a name="l02212"></a>02212 <span class="comment">//  // Graphics Gems, pp. 247-250 by Jim Arvo</span>
<a name="l02213"></a>02213 <span class="comment">//  float side, d = 0.0f;</span>
<a name="l02214"></a>02214 <span class="comment">//  DXVEC3 v = s.vPos - o.vPos;</span>
<a name="l02215"></a>02215 <span class="comment">//</span>
<a name="l02216"></a>02216 <span class="comment">//  side = fabsf(D3DXVec3Dot(&amp;v, &amp;o.vRight));</span>
<a name="l02217"></a>02217 <span class="comment">//  if(side &gt; o.vExtents.x) {</span>
<a name="l02218"></a>02218 <span class="comment">//      side -= o.vExtents.x;</span>
<a name="l02219"></a>02219 <span class="comment">//      d += side * side;</span>
<a name="l02220"></a>02220 <span class="comment">//  }</span>
<a name="l02221"></a>02221 <span class="comment">//  side = fabsf(D3DXVec3Dot(&amp;v, &amp;o.vUp));</span>
<a name="l02222"></a>02222 <span class="comment">//  if(side &gt; o.vExtents.y) {</span>
<a name="l02223"></a>02223 <span class="comment">//      side -= o.vExtents.y;</span>
<a name="l02224"></a>02224 <span class="comment">//      d += side * side;</span>
<a name="l02225"></a>02225 <span class="comment">//  }</span>
<a name="l02226"></a>02226 <span class="comment">//  side = fabsf(D3DXVec3Dot(&amp;v, &amp;o.vDir));</span>
<a name="l02227"></a>02227 <span class="comment">//  if(side &gt; o.vExtents.z) {</span>
<a name="l02228"></a>02228 <span class="comment">//      side -= o.vExtents.z;</span>
<a name="l02229"></a>02229 <span class="comment">//      d += side * side;</span>
<a name="l02230"></a>02230 <span class="comment">//  }</span>
<a name="l02231"></a>02231 <span class="comment">//</span>
<a name="l02232"></a>02232 <span class="comment">//  return d &lt; s.fRadius * s.fRadius;</span>
<a name="l02233"></a>02233 <span class="comment">//}</span>
<a name="l02234"></a>02234 
<a name="l02236"></a>02236 
<a name="l02237"></a>02237 
<a name="l02238"></a>02238 <span class="comment">//float DistVertexAABBSq(const DXVEC3&amp; v, const AABB&amp; ab)</span>
<a name="l02239"></a>02239 <span class="comment">//{</span>
<a name="l02240"></a>02240 <span class="comment">//  float fDist = 0.0f;</span>
<a name="l02241"></a>02241 <span class="comment">//  DXVEC3 vn;</span>
<a name="l02242"></a>02242 <span class="comment">//  vn.x = fabsf(v.x - ab.vPos.x) - ab.vExtents.x;</span>
<a name="l02243"></a>02243 <span class="comment">//  vn.y = fabsf(v.y - ab.vPos.y) - ab.vExtents.y;</span>
<a name="l02244"></a>02244 <span class="comment">//  vn.z = fabsf(v.z - ab.vPos.z) - ab.vExtents.z;</span>
<a name="l02245"></a>02245 <span class="comment">//</span>
<a name="l02246"></a>02246 <span class="comment">//  if( vn.x &gt; 0.0f ) fDist += vn.x * vn.x;</span>
<a name="l02247"></a>02247 <span class="comment">//  if( vn.y &gt; 0.0f ) fDist += vn.x * vn.y;</span>
<a name="l02248"></a>02248 <span class="comment">//  if( vn.z &gt; 0.0f ) fDist += vn.x * vn.z;</span>
<a name="l02249"></a>02249 <span class="comment">//</span>
<a name="l02250"></a>02250 <span class="comment">//  return fDist;</span>
<a name="l02251"></a>02251 <span class="comment">//}</span>
<a name="l02252"></a>02252 
<a name="l02255"></a>02255 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l02256"></a><a class="code" href="group__geometric__primitives.html#ga9b1575cfd9a4571c57d72449b303ba6e">02256</a> T <a class="code" href="group__geometric__primitives.html#ga9b1575cfd9a4571c57d72449b303ba6e" title="The minimum distance form the vertex to the oriented bounding box.">DistVertexOBBSq</a>(<span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a>&amp; v, <span class="keyword">const</span> <a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html" title="An oriented bounding box.">obb&lt;T&gt;</a>&amp; o)
<a name="l02257"></a>02257 {
<a name="l02258"></a>02258     <a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html" title="Vector class containing 4 dimensions.">RaveVector&lt;T&gt;</a> vn = v - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#ab7f63b564ef04ccd22dfa2899cdd2b10">pos</a>;
<a name="l02259"></a>02259     vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a03eaac86e9a1081f590fefde96d049d8">right</a>)) - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.x;
<a name="l02260"></a>02260     vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a0a2211068fc366a7a037b35f81d6ebcf">up</a>)) - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.y;
<a name="l02261"></a>02261     vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> = <a class="code" href="namespaceOpenRAVE_1_1geometry.html#ad48f4fda0c292c947d6161e8484218ba">MATH_FABS</a>(vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#ab98c3b577384bb6150758e03dae47bc1">dot3</a>(o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a358d165f685f7746473d110c6cfe7198">dir</a>)) - o.<a class="code" href="classOpenRAVE_1_1geometry_1_1obb.html#a8bc80a93cf1da1acaefbf0cbdf5881c0">extents</a>.z;
<a name="l02262"></a>02262     <span class="comment">// now we have the vertex in OBB&#39;s frame</span>
<a name="l02263"></a>02263     T fDist = 0;
<a name="l02264"></a>02264     <span class="keywordflow">if</span>( vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> &gt; 0.0f ) {
<a name="l02265"></a>02265         fDist += vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a> * vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a9a4f74af87a76a4c3dcb729cb0e68f8d">x</a>;
<a name="l02266"></a>02266     }
<a name="l02267"></a>02267     <span class="keywordflow">if</span>( vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> &gt; 0.0f ) {
<a name="l02268"></a>02268         fDist += vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a> * vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#a1cb2b5ea04251d543e49356ef54eb853">y</a>;
<a name="l02269"></a>02269     }
<a name="l02270"></a>02270     <span class="keywordflow">if</span>( vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> &gt; 0.0f ) {
<a name="l02271"></a>02271         fDist += vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a> * vn.<a class="code" href="classOpenRAVE_1_1geometry_1_1RaveVector.html#aa37b7ae12b900daed71297a80053aacf">z</a>;
<a name="l02272"></a>02272     }
<a name="l02273"></a>02273     <span class="keywordflow">return</span> fDist;
<a name="l02274"></a>02274 }
<a name="l02275"></a>02275 
<a name="l02276"></a>02276 <span class="comment">//float DistVertexFaceSq(const DXVEC3&amp; v, const FACE&amp; f)</span>
<a name="l02277"></a>02277 <span class="comment">//{</span>
<a name="l02278"></a>02278 <span class="comment">//  DXVEC3 ve, vd;</span>
<a name="l02279"></a>02279 <span class="comment">//  float fLengthSq, fDot;</span>
<a name="l02280"></a>02280 <span class="comment">//</span>
<a name="l02281"></a>02281 <span class="comment">//  // get the 3 distances from the sphere to the line segments of the face</span>
<a name="l02282"></a>02282 <span class="comment">//  // also take the closest distance to the face&#39;s plane, and make sure</span>
<a name="l02283"></a>02283 <span class="comment">//  // that the point in the plane that is closest is in the face</span>
<a name="l02284"></a>02284 <span class="comment">//</span>
<a name="l02285"></a>02285 <span class="comment">//  fDot = D3DXVec3Dot(&amp;f.plane.vNorm, &amp;v) + f.plane.fD;</span>
<a name="l02286"></a>02286 <span class="comment">//</span>
<a name="l02287"></a>02287 <span class="comment">//  ve = v - f.plane.vNorm * fDot - f.v1;</span>
<a name="l02288"></a>02288 <span class="comment">//</span>
<a name="l02289"></a>02289 <span class="comment">//  // figure out the barycentric coordinates</span>
<a name="l02290"></a>02290 <span class="comment">//  float e00, e01, e11, q0, q1, s0, s1, t;</span>
<a name="l02291"></a>02291 <span class="comment">//  vd = f.v2 - f.v1;</span>
<a name="l02292"></a>02292 <span class="comment">//  e00 = D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02293"></a>02293 <span class="comment">//  q0 = D3DXVec3Dot(&amp;ve, &amp;vd);</span>
<a name="l02294"></a>02294 <span class="comment">//</span>
<a name="l02295"></a>02295 <span class="comment">//  vd = f.v3 - f.v1;</span>
<a name="l02296"></a>02296 <span class="comment">//  e11 = D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02297"></a>02297 <span class="comment">//  q1 = D3DXVec3Dot(&amp;ve, &amp;vd);</span>
<a name="l02298"></a>02298 <span class="comment">//</span>
<a name="l02299"></a>02299 <span class="comment">//  e01 = D3DXVec3Dot(&amp;(f.v2 - f.v1), &amp;vd);</span>
<a name="l02300"></a>02300 <span class="comment">//</span>
<a name="l02301"></a>02301 <span class="comment">//  s0 = e11 * q0 - e01 * q1;</span>
<a name="l02302"></a>02302 <span class="comment">//  s1 = e00 * q1 - e01 * q0;</span>
<a name="l02303"></a>02303 <span class="comment">//</span>
<a name="l02304"></a>02304 <span class="comment">//  t = e00 * e11 - e01 * e01;</span>
<a name="l02305"></a>02305 <span class="comment">//</span>
<a name="l02306"></a>02306 <span class="comment">//  if(s0 &gt;= 0.0f &amp;&amp; s1 &gt;= 0.0f &amp;&amp; s0+s1 &lt;= t) return fDot * fDot;</span>
<a name="l02307"></a>02307 <span class="comment">//</span>
<a name="l02308"></a>02308 <span class="comment">//  // check which edge the vertex is closest to</span>
<a name="l02309"></a>02309 <span class="comment">//</span>
<a name="l02310"></a>02310 <span class="comment">//  ve = v - f.v1;</span>
<a name="l02311"></a>02311 <span class="comment">//  D3DXVec3Cross(&amp;vd, &amp;(f.v2-f.v1), &amp;f.plane.vNorm);</span>
<a name="l02312"></a>02312 <span class="comment">//</span>
<a name="l02313"></a>02313 <span class="comment">//  if( D3DXVec3Dot(&amp;vd, &amp;ve) &gt; 0.0f ) {</span>
<a name="l02314"></a>02314 <span class="comment">//      vd = f.v2-f.v1;</span>
<a name="l02315"></a>02315 <span class="comment">//      fDot = D3DXVec3Dot(&amp;ve, &amp;vd);</span>
<a name="l02316"></a>02316 <span class="comment">//</span>
<a name="l02317"></a>02317 <span class="comment">//      fLengthSq = D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02318"></a>02318 <span class="comment">//</span>
<a name="l02319"></a>02319 <span class="comment">//      if( fDot &lt; 0.0f ) return D3DXVec3LengthSq(&amp;ve);</span>
<a name="l02320"></a>02320 <span class="comment">//      if( fDot &gt; fLengthSq ) return D3DXVec3LengthSq(&amp;(v-f.v2));</span>
<a name="l02321"></a>02321 <span class="comment">//</span>
<a name="l02322"></a>02322 <span class="comment">//      return D3DXVec3LengthSq(&amp;ve) - fDot * fDot / fLengthSq;</span>
<a name="l02323"></a>02323 <span class="comment">//  }</span>
<a name="l02324"></a>02324 <span class="comment">//</span>
<a name="l02325"></a>02325 <span class="comment">//  D3DXVec3Cross(&amp;vd, &amp;(f.v1-f.v3), &amp;f.plane.vNorm);</span>
<a name="l02326"></a>02326 <span class="comment">//</span>
<a name="l02327"></a>02327 <span class="comment">//  if( D3DXVec3Dot(&amp;vd, &amp;ve) &gt; 0.0f ) {</span>
<a name="l02328"></a>02328 <span class="comment">//      vd = f.v3-f.v1;</span>
<a name="l02329"></a>02329 <span class="comment">//      fDot = D3DXVec3Dot(&amp;ve, &amp;vd);</span>
<a name="l02330"></a>02330 <span class="comment">//</span>
<a name="l02331"></a>02331 <span class="comment">//      fLengthSq = D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02332"></a>02332 <span class="comment">//</span>
<a name="l02333"></a>02333 <span class="comment">//      if( fDot &lt; 0.0f ) return D3DXVec3LengthSq(&amp;ve);</span>
<a name="l02334"></a>02334 <span class="comment">//      if( fDot &gt; fLengthSq ) return D3DXVec3LengthSq(&amp;(v-f.v3));</span>
<a name="l02335"></a>02335 <span class="comment">//</span>
<a name="l02336"></a>02336 <span class="comment">//      return D3DXVec3LengthSq(&amp;ve) - fDot * fDot / fLengthSq;</span>
<a name="l02337"></a>02337 <span class="comment">//  }</span>
<a name="l02338"></a>02338 <span class="comment">//</span>
<a name="l02339"></a>02339 <span class="comment">//  ve = v - f.v2;</span>
<a name="l02340"></a>02340 <span class="comment">//  vd = f.v3 - f.v2;</span>
<a name="l02341"></a>02341 <span class="comment">//</span>
<a name="l02342"></a>02342 <span class="comment">//  // we know that fDot cannot be &lt; 0 or &gt; lengthsq(vd)</span>
<a name="l02343"></a>02343 <span class="comment">//  return D3DXVec3LengthSq(&amp;ve) - Sqr(D3DXVec3Dot(&amp;ve, &amp;vd)) / D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02344"></a>02344 <span class="comment">//}</span>
<a name="l02345"></a>02345 
<a name="l02346"></a>02346 <span class="comment">//float DistVertexCone(const DXVEC3&amp; vObj, CONE&amp; c)</span>
<a name="l02347"></a>02347 <span class="comment">//{</span>
<a name="l02348"></a>02348 <span class="comment">//  DXVEC3 v = vObj-c.vVertex;</span>
<a name="l02349"></a>02349 <span class="comment">//  float fDot = D3DXVec3Dot(&amp;c.vDir, &amp;v);</span>
<a name="l02350"></a>02350 <span class="comment">//  float fLengthSq = D3DXVec3LengthSq(&amp;v);</span>
<a name="l02351"></a>02351 <span class="comment">//</span>
<a name="l02352"></a>02352 <span class="comment">//  // the closest point might be the vertex</span>
<a name="l02353"></a>02353 <span class="comment">//  float fDotSq = fDot * fDot;</span>
<a name="l02354"></a>02354 <span class="comment">//  if( fDot &lt;= 0.0f &amp;&amp; fDotSq &gt; c.fSinAng * c.fSinAng * fLengthSq )</span>
<a name="l02355"></a>02355 <span class="comment">//      return -D3DXVec3Length(&amp;v);</span>
<a name="l02356"></a>02356 <span class="comment">//</span>
<a name="l02357"></a>02357 <span class="comment">//  // if beyond cone base, then shortest distance can either</span>
<a name="l02358"></a>02358 <span class="comment">//  // be the base or the edge of the circle</span>
<a name="l02359"></a>02359 <span class="comment">//  if( fDot &gt; c.fLength ) {</span>
<a name="l02360"></a>02360 <span class="comment">//      fLengthSq -= fDotSq;</span>
<a name="l02361"></a>02361 <span class="comment">//      float fBaseRadius = c.fLength * c.fSinAng / c.fCosAng;</span>
<a name="l02362"></a>02362 <span class="comment">//</span>
<a name="l02363"></a>02363 <span class="comment">//      if( fLengthSq &lt; fBaseRadius ) return c.fLength - fDot;</span>
<a name="l02364"></a>02364 <span class="comment">//</span>
<a name="l02365"></a>02365 <span class="comment">//      // its the edge</span>
<a name="l02366"></a>02366 <span class="comment">//      fDot -= c.fLength;</span>
<a name="l02367"></a>02367 <span class="comment">//      return -sqrtf( Sqr(sqrtf(fLengthSq)-fBaseRadius) + fDot*fDot );</span>
<a name="l02368"></a>02368 <span class="comment">//  }</span>
<a name="l02369"></a>02369 <span class="comment">//</span>
<a name="l02370"></a>02370 <span class="comment">//  // orthogonal project to cone&#39;s surface</span>
<a name="l02371"></a>02371 <span class="comment">//  float fTest = c.fSinAng * sqrtf(fLengthSq - fDotSq) + c.fCosAng * fDot;</span>
<a name="l02372"></a>02372 <span class="comment">//  float fSide = c.fLength / c.fCosAng;</span>
<a name="l02373"></a>02373 <span class="comment">//</span>
<a name="l02374"></a>02374 <span class="comment">//  if( fTest &gt; fSide ) {</span>
<a name="l02375"></a>02375 <span class="comment">//      // outside and along edge</span>
<a name="l02376"></a>02376 <span class="comment">//      fLengthSq -= fTest*fTest;</span>
<a name="l02377"></a>02377 <span class="comment">//      fTest -= fSide;</span>
<a name="l02378"></a>02378 <span class="comment">//      return -sqrtf(fLengthSq + fTest*fTest);</span>
<a name="l02379"></a>02379 <span class="comment">//  }</span>
<a name="l02380"></a>02380 <span class="comment">//</span>
<a name="l02381"></a>02381 <span class="comment">//  if( fLengthSq &gt; c.fCosAng * c.fCosAng * fDotSq ) return -sqrtf(fLengthSq-fTest*fTest);</span>
<a name="l02382"></a>02382 <span class="comment">//</span>
<a name="l02383"></a>02383 <span class="comment">//  // the vertex is inside the cone, but shortest distance can either be</span>
<a name="l02384"></a>02384 <span class="comment">//  // from base of cone or surface of cone, so compute both and compare</span>
<a name="l02385"></a>02385 <span class="comment">//  fLengthSq -= fTest*fTest;</span>
<a name="l02386"></a>02386 <span class="comment">//</span>
<a name="l02387"></a>02387 <span class="comment">//  fTest = c.fLength - fDot;</span>
<a name="l02388"></a>02388 <span class="comment">//</span>
<a name="l02389"></a>02389 <span class="comment">//  if( fTest*fTest &lt; fLengthSq ) return fTest;</span>
<a name="l02390"></a>02390 <span class="comment">//</span>
<a name="l02391"></a>02391 <span class="comment">//  return sqrtf(fLengthSq);</span>
<a name="l02392"></a>02392 <span class="comment">//}</span>
<a name="l02393"></a>02393 <span class="comment">//</span>
<a name="l02394"></a>02394 <span class="comment">//float DistVertexFrustum(const DXVEC3&amp; vObjPos, const FRUSTUM&amp; fr)</span>
<a name="l02395"></a>02395 <span class="comment">//{</span>
<a name="l02396"></a>02396 <span class="comment">//  DXVEC3 v = vObjPos - fr.vPos, vproj;</span>
<a name="l02397"></a>02397 <span class="comment">//  float f, fx, fy, fplane;</span>
<a name="l02398"></a>02398 <span class="comment">//  vproj.x = fabsf(D3DXVec3Dot(&amp;v, &amp;fr.vRight));</span>
<a name="l02399"></a>02399 <span class="comment">//  vproj.y = fabsf(D3DXVec3Dot(&amp;v, &amp;fr.vUp));</span>
<a name="l02400"></a>02400 <span class="comment">//  vproj.z = fabsf(D3DXVec3Dot(&amp;v, &amp;fr.vDir));</span>
<a name="l02401"></a>02401 <span class="comment">//</span>
<a name="l02402"></a>02402 <span class="comment">//  // v.x - dot product along the right face</span>
<a name="l02403"></a>02403 <span class="comment">//  // v.y - dot product along the up face</span>
<a name="l02404"></a>02404 <span class="comment">//</span>
<a name="l02405"></a>02405 <span class="comment">//  fx = vproj.x * fr.fCosFOVX - vproj.z * fr.fSinFOVX;</span>
<a name="l02406"></a>02406 <span class="comment">//  fy = vproj.y * fr.fCosFOVY - vproj.z * fr.fSinFOVY;</span>
<a name="l02407"></a>02407 <span class="comment">//</span>
<a name="l02408"></a>02408 <span class="comment">//  if( fx &gt; 0.0f ) {</span>
<a name="l02409"></a>02409 <span class="comment">//      if( fy &gt; 0.0f ) {</span>
<a name="l02410"></a>02410 <span class="comment">//          // vector along upper right edge is: sinx, siny, cosx*cosy</span>
<a name="l02411"></a>02411 <span class="comment">//</span>
<a name="l02412"></a>02412 <span class="comment">//          // projected length along this vector</span>
<a name="l02413"></a>02413 <span class="comment">//          float fdot = fr.fSinFOVX * vproj.x + fr.fSinFOVY * vproj.y + fr.fCosFOVX * fr.fCosFOVY * vproj.z;</span>
<a name="l02414"></a>02414 <span class="comment">//          f = 1.0f + Sqr(fr.fSinFOVX * fr.fSinFOVY);</span>
<a name="l02415"></a>02415 <span class="comment">//          fplane = fr.fSinFOVX * fr.fSinFOVX / fr.fCosFOVX + fr.fSinFOVY * fr.fSinFOVY / fr.fCosFOVY +</span>
<a name="l02416"></a>02416 <span class="comment">//              fr.fCosFOVX * fr.fCosFOVY;</span>
<a name="l02417"></a>02417 <span class="comment">//</span>
<a name="l02418"></a>02418 <span class="comment">//          if( fdot &lt; f * fplane * fr.fNear ) {</span>
<a name="l02419"></a>02419 <span class="comment">//              return -sqrtf( Sqr(vproj.x - fr.fNear*fr.fSinFOVX/fr.fCosFOVX) +</span>
<a name="l02420"></a>02420 <span class="comment">//                              Sqr(vproj.y - fr.fNear*fr.fSinFOVY/fr.fCosFOVY) +</span>
<a name="l02421"></a>02421 <span class="comment">//                              Sqr(vproj.z - fr.fNear) );</span>
<a name="l02422"></a>02422 <span class="comment">//          }</span>
<a name="l02423"></a>02423 <span class="comment">//          else if( fdot &lt; f * fplane * fr.fFar )</span>
<a name="l02424"></a>02424 <span class="comment">//              return -sqrtf(D3DXVec3LengthSq(&amp;v) - Sqr(fdot / f));</span>
<a name="l02425"></a>02425 <span class="comment">//          else</span>
<a name="l02426"></a>02426 <span class="comment">//              return -sqrtf( Sqr(vproj.x - fr.fFar*fr.fSinFOVX/fr.fCosFOVX) +</span>
<a name="l02427"></a>02427 <span class="comment">//                              Sqr(vproj.y - fr.fFar*fr.fSinFOVY/fr.fCosFOVY) +</span>
<a name="l02428"></a>02428 <span class="comment">//                              Sqr(vproj.z - fr.fFar) );</span>
<a name="l02429"></a>02429 <span class="comment">//      }</span>
<a name="l02430"></a>02430 <span class="comment">//      else {</span>
<a name="l02431"></a>02431 <span class="comment">//          v.x = vproj.x * fr.fSinFOVX + vproj.z * fr.fCosFOVX;</span>
<a name="l02432"></a>02432 <span class="comment">//</span>
<a name="l02433"></a>02433 <span class="comment">//          if( v.x &lt; 2.0f * fr.fNear * fr.fSinFOVX )</span>
<a name="l02434"></a>02434 <span class="comment">//              return -sqrtf( Sqr(vproj.x - fr.fNear*fr.fSinFOVX/fr.fCosFOVX) + Sqr(vproj.z-fr.fNear) );</span>
<a name="l02435"></a>02435 <span class="comment">//          else if( v.x &lt; 2.0f * fr.fFar * fr.fSinFOVX )</span>
<a name="l02436"></a>02436 <span class="comment">//              return -fx;</span>
<a name="l02437"></a>02437 <span class="comment">//          else</span>
<a name="l02438"></a>02438 <span class="comment">//              return -sqrtf( Sqr(vproj.x - fr.fFar*fr.fSinFOVX/fr.fCosFOVX) + Sqr(vproj.z-fr.fFar) );</span>
<a name="l02439"></a>02439 <span class="comment">//      }</span>
<a name="l02440"></a>02440 <span class="comment">//  }</span>
<a name="l02441"></a>02441 <span class="comment">//  else {</span>
<a name="l02442"></a>02442 <span class="comment">//      if( fy &gt; 0.0f ) {</span>
<a name="l02443"></a>02443 <span class="comment">//          v.y = vproj.y * fr.fSinFOVY + vproj.z * fr.fCosFOVY;</span>
<a name="l02444"></a>02444 <span class="comment">//</span>
<a name="l02445"></a>02445 <span class="comment">//          if( v.y &lt; 2.0f * fr.fNear * fr.fSinFOVY )</span>
<a name="l02446"></a>02446 <span class="comment">//              return -sqrtf( Sqr(vproj.y - fr.fNear*fr.fSinFOVY/fr.fCosFOVY) + Sqr(vproj.z-fr.fNear) );</span>
<a name="l02447"></a>02447 <span class="comment">//          else if( v.x &lt; 2.0f * fr.fFar * fr.fSinFOVY )</span>
<a name="l02448"></a>02448 <span class="comment">//              return -fy;</span>
<a name="l02449"></a>02449 <span class="comment">//          else</span>
<a name="l02450"></a>02450 <span class="comment">//              return -sqrtf( Sqr(vproj.y - fr.fFar*fr.fSinFOVY/fr.fCosFOVY) + Sqr(vproj.z-fr.fFar) );</span>
<a name="l02451"></a>02451 <span class="comment">//      }</span>
<a name="l02452"></a>02452 <span class="comment">//      else {</span>
<a name="l02453"></a>02453 <span class="comment">//          if( vproj.z &lt; fr.fNear ) return vproj.z - fr.fNear;</span>
<a name="l02454"></a>02454 <span class="comment">//          else if( vproj.z &lt; fr.fFar ) {</span>
<a name="l02455"></a>02455 <span class="comment">//              v.x = fx &lt; fy ? -fx : fy;</span>
<a name="l02456"></a>02456 <span class="comment">//              if( v.x &gt; vproj.z-fr.fNear ) v.x = vproj.z - fr.fNear;</span>
<a name="l02457"></a>02457 <span class="comment">//              if( v.x &gt; fr.fFar-vproj.z ) v.x = fr.fFar - vproj.z;</span>
<a name="l02458"></a>02458 <span class="comment">//</span>
<a name="l02459"></a>02459 <span class="comment">//              return v.x;</span>
<a name="l02460"></a>02460 <span class="comment">//          }</span>
<a name="l02461"></a>02461 <span class="comment">//          else return fr.fFar - vproj.z;</span>
<a name="l02462"></a>02462 <span class="comment">//      }</span>
<a name="l02463"></a>02463 <span class="comment">//  }</span>
<a name="l02464"></a>02464 <span class="comment">//</span>
<a name="l02465"></a>02465 <span class="comment">//  return 0.0f;</span>
<a name="l02466"></a>02466 <span class="comment">//}</span>
<a name="l02467"></a>02467 
<a name="l02469"></a>02469 
<a name="l02470"></a>02470 <span class="comment">//DXVEC3 ClosestPointToPlane(const SPHERE&amp; s, const PLANE&amp; p)</span>
<a name="l02471"></a>02471 <span class="comment">//{</span>
<a name="l02472"></a>02472 <span class="comment">//  return s.vPos - (D3DXVec3Dot(&amp;s.vPos, &amp;p.vNorm) + p.fD) * p.vNorm;</span>
<a name="l02473"></a>02473 <span class="comment">//}</span>
<a name="l02474"></a>02474 <span class="comment">//</span>
<a name="l02475"></a>02475 <span class="comment">//DXVEC3 ClosestPointToPlane(const OBB&amp; obb, const PLANE&amp; p)</span>
<a name="l02476"></a>02476 <span class="comment">//{</span>
<a name="l02477"></a>02477 <span class="comment">//  DXVEC3 vPt = obb.vPos;</span>
<a name="l02478"></a>02478 <span class="comment">//</span>
<a name="l02479"></a>02479 <span class="comment">//  if( D3DXVec3Dot(&amp;p.vNorm, &amp;obb.vRight) &lt; 0.0f)</span>
<a name="l02480"></a>02480 <span class="comment">//      vPt += obb.vRight * obb.vExtents.x;</span>
<a name="l02481"></a>02481 <span class="comment">//  else vPt -= obb.vRight * obb.vExtents.x;</span>
<a name="l02482"></a>02482 <span class="comment">//</span>
<a name="l02483"></a>02483 <span class="comment">//  if( D3DXVec3Dot(&amp;p.vNorm, &amp;obb.vUp) &lt; 0.0f)</span>
<a name="l02484"></a>02484 <span class="comment">//      vPt += obb.vUp * obb.vExtents.y;</span>
<a name="l02485"></a>02485 <span class="comment">//  else vPt -= obb.vUp * obb.vExtents.y;</span>
<a name="l02486"></a>02486 <span class="comment">//</span>
<a name="l02487"></a>02487 <span class="comment">//  if( D3DXVec3Dot(&amp;p.vNorm, &amp;obb.vDir) &lt; 0.0f)</span>
<a name="l02488"></a>02488 <span class="comment">//      vPt += obb.vDir * obb.vExtents.z;</span>
<a name="l02489"></a>02489 <span class="comment">//  else vPt -= obb.vDir * obb.vExtents.z;</span>
<a name="l02490"></a>02490 <span class="comment">//</span>
<a name="l02491"></a>02491 <span class="comment">//  return vPt;</span>
<a name="l02492"></a>02492 <span class="comment">//}</span>
<a name="l02493"></a>02493 <span class="comment">//</span>
<a name="l02494"></a>02494 <span class="comment">//DXVEC3 ClosestPointToPlane(const FACE&amp; f, const PLANE&amp; p)</span>
<a name="l02495"></a>02495 <span class="comment">//{</span>
<a name="l02496"></a>02496 <span class="comment">//  // it can be one of 3 points</span>
<a name="l02497"></a>02497 <span class="comment">//  float fDist1 = D3DXVec3Dot(&amp;f.v1, &amp;p.vNorm);</span>
<a name="l02498"></a>02498 <span class="comment">//  float fDist2 = D3DXVec3Dot(&amp;f.v2, &amp;p.vNorm);</span>
<a name="l02499"></a>02499 <span class="comment">//</span>
<a name="l02500"></a>02500 <span class="comment">//  float fDist3 = D3DXVec3Dot(&amp;f.v3, &amp;p.vNorm);</span>
<a name="l02501"></a>02501 <span class="comment">//</span>
<a name="l02502"></a>02502 <span class="comment">//  if( fDist1 &lt; fDist2 ) {</span>
<a name="l02503"></a>02503 <span class="comment">//      if(fDist1 &lt; fDist3) return f.v1;</span>
<a name="l02504"></a>02504 <span class="comment">//      else return f.v3;</span>
<a name="l02505"></a>02505 <span class="comment">//  }</span>
<a name="l02506"></a>02506 <span class="comment">//  else {</span>
<a name="l02507"></a>02507 <span class="comment">//      if(fDist2 &lt; fDist3) return f.v2;</span>
<a name="l02508"></a>02508 <span class="comment">//      else return f.v3;</span>
<a name="l02509"></a>02509 <span class="comment">//  }</span>
<a name="l02510"></a>02510 <span class="comment">//</span>
<a name="l02511"></a>02511 <span class="comment">//  return f.v1;</span>
<a name="l02512"></a>02512 <span class="comment">//}</span>
<a name="l02513"></a>02513 <span class="comment">//</span>
<a name="l02514"></a>02514 <span class="comment">//DXVEC3 ClosestPointToFace(const DXVEC3&amp; v, const FACE&amp; f)</span>
<a name="l02515"></a>02515 <span class="comment">//{</span>
<a name="l02516"></a>02516 <span class="comment">//  DXVEC3 ve, vd;</span>
<a name="l02517"></a>02517 <span class="comment">//  float fLengthSq, fDot;</span>
<a name="l02518"></a>02518 <span class="comment">//</span>
<a name="l02519"></a>02519 <span class="comment">//  // get the 3 distances from the sphere to the line segments of the face</span>
<a name="l02520"></a>02520 <span class="comment">//  // also take the closest distance to the face&#39;s plane, and make sure</span>
<a name="l02521"></a>02521 <span class="comment">//  // that the point in the plane that is closest is in the face</span>
<a name="l02522"></a>02522 <span class="comment">//</span>
<a name="l02523"></a>02523 <span class="comment">//  fDot = D3DXVec3Dot(&amp;f.plane.vNorm, &amp;v) + f.plane.fD;</span>
<a name="l02524"></a>02524 <span class="comment">//</span>
<a name="l02525"></a>02525 <span class="comment">//  ve = v - f.plane.vNorm * fDot - f.v1;</span>
<a name="l02526"></a>02526 <span class="comment">//</span>
<a name="l02527"></a>02527 <span class="comment">//  // figure out the barycentric coordinates</span>
<a name="l02528"></a>02528 <span class="comment">//  float e00, e01, e11, q0, q1, s0, s1, t;</span>
<a name="l02529"></a>02529 <span class="comment">//  vd = f.v2 - f.v1;</span>
<a name="l02530"></a>02530 <span class="comment">//  e00 = D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02531"></a>02531 <span class="comment">//  q0 = D3DXVec3Dot(&amp;ve, &amp;vd);</span>
<a name="l02532"></a>02532 <span class="comment">//</span>
<a name="l02533"></a>02533 <span class="comment">//  vd = f.v3 - f.v1;</span>
<a name="l02534"></a>02534 <span class="comment">//  e11 = D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02535"></a>02535 <span class="comment">//  q1 = D3DXVec3Dot(&amp;ve, &amp;vd);</span>
<a name="l02536"></a>02536 <span class="comment">//</span>
<a name="l02537"></a>02537 <span class="comment">//  e01 = D3DXVec3Dot(&amp;(f.v2 - f.v1), &amp;vd);</span>
<a name="l02538"></a>02538 <span class="comment">//</span>
<a name="l02539"></a>02539 <span class="comment">//  s0 = e11 * q0 - e01 * q1;</span>
<a name="l02540"></a>02540 <span class="comment">//  s1 = e00 * q1 - e01 * q0;</span>
<a name="l02541"></a>02541 <span class="comment">//</span>
<a name="l02542"></a>02542 <span class="comment">//  t = e00 * e11 - e01 * e01;</span>
<a name="l02543"></a>02543 <span class="comment">//</span>
<a name="l02544"></a>02544 <span class="comment">//  assert( t &gt;= -1e5);</span>
<a name="l02545"></a>02545 <span class="comment">//  if(s0 &gt;= 0.0f &amp;&amp; s1 &gt;= 0.0f &amp;&amp; s0+s1 &lt;= t) return ve + f.v1;</span>
<a name="l02546"></a>02546 <span class="comment">//</span>
<a name="l02547"></a>02547 <span class="comment">//  // check which edge the vertex is closest to</span>
<a name="l02548"></a>02548 <span class="comment">//</span>
<a name="l02549"></a>02549 <span class="comment">//  ve = v - f.v1;</span>
<a name="l02550"></a>02550 <span class="comment">//  D3DXVec3Cross(&amp;vd, &amp;(f.v2-f.v1), &amp;f.plane.vNorm);</span>
<a name="l02551"></a>02551 <span class="comment">//</span>
<a name="l02552"></a>02552 <span class="comment">//  if( D3DXVec3Dot(&amp;vd, &amp;ve) &gt; 0.0f ) {</span>
<a name="l02553"></a>02553 <span class="comment">//      vd = f.v2-f.v1;</span>
<a name="l02554"></a>02554 <span class="comment">//      fDot = D3DXVec3Dot(&amp;ve, &amp;vd);</span>
<a name="l02555"></a>02555 <span class="comment">//</span>
<a name="l02556"></a>02556 <span class="comment">//      fLengthSq = D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02557"></a>02557 <span class="comment">//</span>
<a name="l02558"></a>02558 <span class="comment">//      if( fDot &lt; 0.0f ) return f.v1;</span>
<a name="l02559"></a>02559 <span class="comment">//      if( fDot &gt; fLengthSq ) return f.v2;</span>
<a name="l02560"></a>02560 <span class="comment">//</span>
<a name="l02561"></a>02561 <span class="comment">//      return f.v1 + fDot * vd / fLengthSq;</span>
<a name="l02562"></a>02562 <span class="comment">//  }</span>
<a name="l02563"></a>02563 <span class="comment">//</span>
<a name="l02564"></a>02564 <span class="comment">//  D3DXVec3Cross(&amp;vd, &amp;(f.v1-f.v3), &amp;f.plane.vNorm);</span>
<a name="l02565"></a>02565 <span class="comment">//</span>
<a name="l02566"></a>02566 <span class="comment">//  if( D3DXVec3Dot(&amp;vd, &amp;ve) &gt; 0.0f ) {</span>
<a name="l02567"></a>02567 <span class="comment">//      vd = f.v3-f.v1;</span>
<a name="l02568"></a>02568 <span class="comment">//      fDot = D3DXVec3Dot(&amp;ve, &amp;vd);</span>
<a name="l02569"></a>02569 <span class="comment">//</span>
<a name="l02570"></a>02570 <span class="comment">//      fLengthSq = D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02571"></a>02571 <span class="comment">//</span>
<a name="l02572"></a>02572 <span class="comment">//      if( fDot &lt; 0.0f ) return f.v1;</span>
<a name="l02573"></a>02573 <span class="comment">//      if( fDot &gt; fLengthSq ) return f.v3;</span>
<a name="l02574"></a>02574 <span class="comment">//</span>
<a name="l02575"></a>02575 <span class="comment">//      return f.v1 + fDot * vd / fLengthSq;</span>
<a name="l02576"></a>02576 <span class="comment">//  }</span>
<a name="l02577"></a>02577 <span class="comment">//</span>
<a name="l02578"></a>02578 <span class="comment">//  vd = f.v3 - f.v2;</span>
<a name="l02579"></a>02579 <span class="comment">//</span>
<a name="l02580"></a>02580 <span class="comment">//  // we know that fDot cannot be &lt; 0 or &gt; lengthsq(vd)</span>
<a name="l02581"></a>02581 <span class="comment">//  return f.v2 + D3DXVec3Dot(&amp;(v - f.v2), &amp;vd) * vd / D3DXVec3LengthSq(&amp;vd);</span>
<a name="l02582"></a>02582 <span class="comment">//}</span>
<a name="l02583"></a>02583 <span class="comment">//</span>
<a name="l02584"></a>02584 <span class="comment">//</span>
<a name="l02588"></a>02588 <span class="comment"></span><span class="comment">//PLANE ClosestPlaneFromVertexOBB(const DXVEC3&amp; v, const OBB&amp; o)</span>
<a name="l02589"></a>02589 <span class="comment">//{</span>
<a name="l02590"></a>02590 <span class="comment">//  DXVEC3 vn = v - o.vPos;</span>
<a name="l02591"></a>02591 <span class="comment">//  DXVEC3 vsign = DXVEC3(1.0f, 1.0f, 1.0f);</span>
<a name="l02592"></a>02592 <span class="comment">//  vn = DXVEC3( D3DXVec3Dot(&amp;vn, &amp;o.vRight),</span>
<a name="l02593"></a>02593 <span class="comment">//                  D3DXVec3Dot(&amp;vn, &amp;o.vUp),</span>
<a name="l02594"></a>02594 <span class="comment">//                  D3DXVec3Dot(&amp;vn, &amp;o.vDir));</span>
<a name="l02595"></a>02595 <span class="comment">//</span>
<a name="l02596"></a>02596 <span class="comment">//  if(vn.x &lt; 0.0f) {</span>
<a name="l02597"></a>02597 <span class="comment">//      vsign.x = -1.0f;</span>
<a name="l02598"></a>02598 <span class="comment">//      vn.x = -vn.x;</span>
<a name="l02599"></a>02599 <span class="comment">//  }</span>
<a name="l02600"></a>02600 <span class="comment">//  if(vn.y &lt; 0.0f) {</span>
<a name="l02601"></a>02601 <span class="comment">//      vsign.y = -1.0f;</span>
<a name="l02602"></a>02602 <span class="comment">//      vn.y = -vn.y;</span>
<a name="l02603"></a>02603 <span class="comment">//  }</span>
<a name="l02604"></a>02604 <span class="comment">//  if(vn.z &lt; 0.0f) {</span>
<a name="l02605"></a>02605 <span class="comment">//      vsign.z = -1.0f;</span>
<a name="l02606"></a>02606 <span class="comment">//      vn.z = -vn.z;</span>
<a name="l02607"></a>02607 <span class="comment">//  }</span>
<a name="l02608"></a>02608 <span class="comment">//</span>
<a name="l02609"></a>02609 <span class="comment">//  vn -= o.vExtents;</span>
<a name="l02610"></a>02610 <span class="comment">//</span>
<a name="l02611"></a>02611 <span class="comment">//  if(vn.x &gt; 0.0f) {</span>
<a name="l02612"></a>02612 <span class="comment">//</span>
<a name="l02613"></a>02613 <span class="comment">//      if(vn.y &gt; 0.0f) {</span>
<a name="l02614"></a>02614 <span class="comment">//</span>
<a name="l02615"></a>02615 <span class="comment">//          if(vn.z &gt; 0.0f) {</span>
<a name="l02616"></a>02616 <span class="comment">//              // the closest point from the obb is one of the obb&#39;s 8 vertices</span>
<a name="l02617"></a>02617 <span class="comment">//</span>
<a name="l02618"></a>02618 <span class="comment">//              // the point</span>
<a name="l02619"></a>02619 <span class="comment">//              vsign = o.vPos + DXVEC3(vsign.x * o.vExtents.x, vsign.y * o.vExtents.y, vsign.z * o.vExtents.z);</span>
<a name="l02620"></a>02620 <span class="comment">//</span>
<a name="l02621"></a>02621 <span class="comment">//              D3DXVec3Normalize(&amp;vn, &amp;(v-vsign));</span>
<a name="l02622"></a>02622 <span class="comment">//          }</span>
<a name="l02623"></a>02623 <span class="comment">//          else {</span>
<a name="l02624"></a>02624 <span class="comment">//              // an edge; the plane has components in the x and y directions</span>
<a name="l02625"></a>02625 <span class="comment">//              vsign = o.vPos + DXVEC3(vsign.x * o.vExtents.x, vsign.y * o.vExtents.y, 0.0f);</span>
<a name="l02626"></a>02626 <span class="comment">//</span>
<a name="l02627"></a>02627 <span class="comment">//              // we want only the components along the obb&#39;s right and up vectors</span>
<a name="l02628"></a>02628 <span class="comment">//              D3DXVec3Normalize(&amp;vn, &amp;(v - o.vDir * D3DXVec3Dot(&amp;o.vDir, &amp;(v-o.vPos)) - vsign) );</span>
<a name="l02629"></a>02629 <span class="comment">//          }</span>
<a name="l02630"></a>02630 <span class="comment">//      }</span>
<a name="l02631"></a>02631 <span class="comment">//      else {</span>
<a name="l02632"></a>02632 <span class="comment">//          if(vn.z &gt; 0.0f) {</span>
<a name="l02633"></a>02633 <span class="comment">//              // an edge; the plane has components in the x and z directions</span>
<a name="l02634"></a>02634 <span class="comment">//              vsign = o.vPos + DXVEC3(vsign.x * o.vExtents.x, 0.0f, vsign.z * o.vExtents.z);</span>
<a name="l02635"></a>02635 <span class="comment">//</span>
<a name="l02636"></a>02636 <span class="comment">//              // we want only the components along the obb&#39;s right and dir vectors</span>
<a name="l02637"></a>02637 <span class="comment">//              D3DXVec3Normalize( &amp;vn, &amp;(v - o.vUp * D3DXVec3Dot(&amp;o.vUp, &amp;(v-o.vPos)) - vsign) );</span>
<a name="l02638"></a>02638 <span class="comment">//          }</span>
<a name="l02639"></a>02639 <span class="comment">//          else {</span>
<a name="l02640"></a>02640 <span class="comment">//              // the right planes</span>
<a name="l02641"></a>02641 <span class="comment">//</span>
<a name="l02642"></a>02642 <span class="comment">//              vn = vsign.x * o.vRight;        // since we need the sign, compute normal first</span>
<a name="l02643"></a>02643 <span class="comment">//</span>
<a name="l02644"></a>02644 <span class="comment">//              vsign = o.vPos + DXVEC3(vsign.x * o.vExtents.x, 0.0f, 0.0f);</span>
<a name="l02645"></a>02645 <span class="comment">//          }</span>
<a name="l02646"></a>02646 <span class="comment">//      }</span>
<a name="l02647"></a>02647 <span class="comment">//  }</span>
<a name="l02648"></a>02648 <span class="comment">//  else {</span>
<a name="l02649"></a>02649 <span class="comment">//      if(vn.y &gt; 0.0f) {</span>
<a name="l02650"></a>02650 <span class="comment">//</span>
<a name="l02651"></a>02651 <span class="comment">//          if(vn.z &gt; 0.0f) {</span>
<a name="l02652"></a>02652 <span class="comment">//              // an edge; the plane has components in the y and z directions</span>
<a name="l02653"></a>02653 <span class="comment">//              vsign = o.vPos + DXVEC3(0.0f, vsign.y * o.vExtents.y, vsign.z * o.vExtents.z);</span>
<a name="l02654"></a>02654 <span class="comment">//</span>
<a name="l02655"></a>02655 <span class="comment">//              // we want only the components along the obb&#39;s up and dir vectors</span>
<a name="l02656"></a>02656 <span class="comment">//              D3DXVec3Normalize(&amp;vn, &amp;(v - o.vRight * D3DXVec3Dot(&amp;o.vRight, &amp;(v-o.vPos)) - vsign) );</span>
<a name="l02657"></a>02657 <span class="comment">//          }</span>
<a name="l02658"></a>02658 <span class="comment">//          else {</span>
<a name="l02659"></a>02659 <span class="comment">//              // the up planes</span>
<a name="l02660"></a>02660 <span class="comment">//</span>
<a name="l02661"></a>02661 <span class="comment">//              vn = vsign.y * o.vUp;       // since we need the sign, compute normal first</span>
<a name="l02662"></a>02662 <span class="comment">//</span>
<a name="l02663"></a>02663 <span class="comment">//              vsign = o.vPos + DXVEC3(0.0f, vsign.y * o.vExtents.y, 0.0f);</span>
<a name="l02664"></a>02664 <span class="comment">//          }</span>
<a name="l02665"></a>02665 <span class="comment">//      }</span>
<a name="l02666"></a>02666 <span class="comment">//      else {</span>
<a name="l02667"></a>02667 <span class="comment">//          if(vn.z &gt; 0.0f) {</span>
<a name="l02668"></a>02668 <span class="comment">//              // the dir planes</span>
<a name="l02669"></a>02669 <span class="comment">//</span>
<a name="l02670"></a>02670 <span class="comment">//              vn = vsign.z * o.vDir;      // since we need the sign, compute normal first</span>
<a name="l02671"></a>02671 <span class="comment">//</span>
<a name="l02672"></a>02672 <span class="comment">//              vsign = o.vPos + DXVEC3(0.0f, 0.0f, vsign.z * o.vExtents.z);</span>
<a name="l02673"></a>02673 <span class="comment">//          }</span>
<a name="l02674"></a>02674 <span class="comment">//          else {</span>
<a name="l02675"></a>02675 <span class="comment">//              // if we are here then that means we are doing something wrong</span>
<a name="l02676"></a>02676 <span class="comment">//              // but anyway, find the plane that the point is closest to</span>
<a name="l02677"></a>02677 <span class="comment">//</span>
<a name="l02678"></a>02678 <span class="comment">//              if(vn.x &gt; vn.y) {</span>
<a name="l02679"></a>02679 <span class="comment">//                  if(vn.x &gt; vn.z) {</span>
<a name="l02680"></a>02680 <span class="comment">//                      vn = vsign.x * o.vRight;</span>
<a name="l02681"></a>02681 <span class="comment">//                      vsign = o.vPos + DXVEC3(vsign.x * o.vExtents.x, 0.0f, 0.0f);</span>
<a name="l02682"></a>02682 <span class="comment">//                  }</span>
<a name="l02683"></a>02683 <span class="comment">//                  else {</span>
<a name="l02684"></a>02684 <span class="comment">//                      vn = vsign.z * o.vDir;</span>
<a name="l02685"></a>02685 <span class="comment">//                      vsign = o.vPos + DXVEC3(0.0f, 0.0f, vsign.z * o.vExtents.z);</span>
<a name="l02686"></a>02686 <span class="comment">//                  }</span>
<a name="l02687"></a>02687 <span class="comment">//              }</span>
<a name="l02688"></a>02688 <span class="comment">//              else {</span>
<a name="l02689"></a>02689 <span class="comment">//                  if(vn.y &gt; vn.z) {</span>
<a name="l02690"></a>02690 <span class="comment">//                      vn = vsign.y * o.vUp;       // since we need the sign, compute normal first</span>
<a name="l02691"></a>02691 <span class="comment">//                      vsign = o.vPos + DXVEC3(0.0f, vsign.y * o.vExtents.y, 0.0f);</span>
<a name="l02692"></a>02692 <span class="comment">//                  }</span>
<a name="l02693"></a>02693 <span class="comment">//                  else {</span>
<a name="l02694"></a>02694 <span class="comment">//                      vn = vsign.z * o.vDir;</span>
<a name="l02695"></a>02695 <span class="comment">//                      vsign = o.vPos + DXVEC3(0.0f, 0.0f, vsign.z * o.vExtents.z);</span>
<a name="l02696"></a>02696 <span class="comment">//                  }</span>
<a name="l02697"></a>02697 <span class="comment">//              }</span>
<a name="l02698"></a>02698 <span class="comment">//          }</span>
<a name="l02699"></a>02699 <span class="comment">//      }</span>
<a name="l02700"></a>02700 <span class="comment">//  }</span>
<a name="l02701"></a>02701 <span class="comment">//</span>
<a name="l02702"></a>02702 <span class="comment">//  return PLANE( vn, vsign );</span>
<a name="l02703"></a>02703 <span class="comment">//}</span>
<a name="l02704"></a>02704 
<a name="l02705"></a>02705 } <span class="comment">// end namespace geometry</span>
<a name="l02706"></a>02706 } <span class="comment">// end namespace OpenRAVE</span>
<a name="l02707"></a>02707 
<a name="l02708"></a>02708 <span class="preprocessor">#endif</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu Mar 22 20:40:52 2012 for OpenRAVE by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
